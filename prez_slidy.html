<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Filip Rodik; Ana Janković" />
  <meta name="date" content="2018-04-04" />
  <title>Scraping with rvest and RSelenium</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link href="data:text/css;charset=utf-8,%0Abody%0A%7B%0Amargin%3A%200%200%200%200%3B%0Apadding%3A%200%200%200%200%3B%0Awidth%3A%20100%25%3B%0Aheight%3A%20100%25%3B%0Acolor%3A%20black%3B%0Abackground%2Dcolor%3A%20white%3B%0Afont%2Dfamily%3A%20%22Gill%20Sans%20MT%22%2C%20%22Gill%20Sans%22%2C%20GillSans%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014pt%3B%0A%7D%0Adiv%2Etoolbar%20%7B%0Aposition%3A%20fixed%3B%20z%2Dindex%3A%20200%3B%0Atop%3A%20auto%3B%20bottom%3A%200%3B%20left%3A%200%3B%20right%3A%200%3B%0Aheight%3A%201%2E2em%3B%20text%2Dalign%3A%20right%3B%0Apadding%2Dleft%3A%201em%3B%0Apadding%2Dright%3A%201em%3B%20font%2Dsize%3A%2060%25%3B%0Acolor%3A%20DimGray%3B%0Abackground%2Dcolor%3A%20rgb%28240%2C240%2C240%29%3B%0Aborder%2Dtop%3A%20solid%201px%20rgb%28180%2C180%2C180%29%3B%0A%7D%0Adiv%2Etoolbar%20span%2Ecopyright%20%7B%0Acolor%3A%20DimGray%3B%0Amargin%2Dleft%3A%200%2E5em%3B%0A%7D%0Adiv%2Einitial%5Fprompt%20%7B%0Aposition%3A%20absolute%3B%0Az%2Dindex%3A%201000%3B%0Abottom%3A%201%2E2em%3B%0Awidth%3A%20100%25%3B%0Abackground%2Dcolor%3A%20rgb%28200%2C200%2C200%29%3B%0Aopacity%3A%200%2E35%3B%0Abackground%2Dcolor%3A%20rgb%28200%2C200%2C200%2C%200%2E35%29%3B%0Acursor%3A%20pointer%3B%0A%7D%0Adiv%2Einitial%5Fprompt%20p%2Ehelp%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Adiv%2Einitial%5Fprompt%20p%2Eclose%20%7B%0Atext%2Dalign%3A%20right%3B%0Afont%2Dstyle%3A%20italic%3B%0A%7D%0Adiv%2Eslidy%5Ftoc%20%7B%0Aposition%3A%20absolute%3B%0Az%2Dindex%3A%20300%3B%0Awidth%3A%2060%25%3B%0Amax%2Dwidth%3A%2030em%3B%0Aheight%3A%2030em%3B%0Aoverflow%3A%20auto%3B%0Atop%3A%20auto%3B%0Aright%3A%20auto%3B%0Aleft%3A%204em%3B%0Abottom%3A%204em%3B%0Apadding%3A%201em%3B%0Abackground%3A%20rgb%28240%2C240%2C240%29%3B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%2Dwidth%3A%202px%3B%0Afont%2Dsize%3A%2060%25%3B%0A%7D%0Adiv%2Eslidy%5Ftoc%20%2Etoc%5Fheading%20%7B%0Atext%2Dalign%3A%20center%3B%0Awidth%3A%20100%25%3B%0Amargin%3A%200%3B%0Amargin%2Dbottom%3A%201em%3B%0Aborder%2Dbottom%2Dstyle%3A%20solid%3B%0Aborder%2Dbottom%2Dcolor%3A%20rgb%28180%2C180%2C180%29%3B%0Aborder%2Dbottom%2Dwidth%3A%201px%3B%0A%7D%0Adiv%2Eslide%20%7B%0Az%2Dindex%3A%2020%3B%0Amargin%3A%200%200%200%200%3B%0Apadding%2Dtop%3A%200%3B%0Apadding%2Dbottom%3A%200%3B%0Apadding%2Dleft%3A%2020px%3B%0Apadding%2Dright%3A%2020px%3B%0Aborder%2Dwidth%3A%200%3B%0Aclear%3A%20both%3B%0Atop%3A%200%3B%0Abottom%3A%200%3B%0Aleft%3A%200%3B%0Aright%3A%200%3B%0Aline%2Dheight%3A%20120%25%3B%0Abackground%2Dcolor%3A%20transparent%3B%0A%7D%0Adiv%2Ebackground%20%7B%0Adisplay%3A%20none%3B%0A%7D%0Adiv%2Ehandout%20%7B%0Amargin%2Dleft%3A%2020px%3B%0Amargin%2Dright%3A%2020px%3B%0A%7D%0Adiv%2Eslide%2Etitlepage%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Adiv%2Eslide%2Etitlepage%20h1%20%7B%0Apadding%2Dtop%3A%2010%25%3B%0Amargin%2Dright%3A%200%3B%0A%7D%0Adiv%2Eslide%20h1%20%7B%0Apadding%2Dleft%3A%200%3B%0Apadding%2Dright%3A%2020pt%3B%0Apadding%2Dtop%3A%204pt%3B%0Apadding%2Dbottom%3A%204pt%3B%0Amargin%2Dtop%3A%200%3B%0Amargin%2Dleft%3A%200%3B%0Amargin%2Dright%3A%2060pt%3B%0Amargin%2Dbottom%3A%200%2E5em%3B%0Adisplay%3A%20block%3B%20font%2Dsize%3A%20160%25%3B%0Aline%2Dheight%3A%201%2E2em%3B%0Abackground%3A%20transparent%3B%0A%7D%0A%40media%20screen%20and%20%28max%2Ddevice%2Dwidth%3A%201024px%29%0A%7B%0Adiv%2Eslide%20%7B%20font%2Dsize%3A%20100%25%3B%20%7D%0A%7D%0A%40media%20screen%20and%20%28max%2Ddevice%2Dwidth%3A%20800px%29%0A%7B%0Adiv%2Eslide%20%7B%20font%2Dsize%3A%20200%25%3B%20%7D%0Adiv%2Eslidy%5Ftoc%20%7B%0Atop%3A%201em%3B%0Aleft%3A%201em%3B%0Aright%3A%20auto%3B%0Awidth%3A%2080%25%3B%0Afont%2Dsize%3A%20180%25%3B%0A%7D%0A%7D%0Adiv%2Etoc%2Dheading%20%7B%0Awidth%3A%20100%25%3B%0Aborder%2Dbottom%3A%20solid%201px%20rgb%28180%2C180%2C180%29%3B%0Amargin%2Dbottom%3A%201em%3B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Aimage%2Drendering%3A%20optimize%2Dquality%3B%0A%7D%0Apre%20%7B%0Afont%2Dsize%3A%2080%25%3B%0Afont%2Dweight%3A%20bold%3B%0Aline%2Dheight%3A%20120%25%3B%0Apadding%2Dtop%3A%200%2E2em%3B%0Apadding%2Dbottom%3A%200%2E2em%3B%0Apadding%2Dleft%3A%201em%3B%0Apadding%2Dright%3A%201em%3B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%2Dleft%2Dwidth%3A%201em%3B%0Aborder%2Dtop%2Dwidth%3A%20thin%3B%0Aborder%2Dright%2Dwidth%3A%20thin%3B%0Aborder%2Dbottom%2Dwidth%3A%20thin%3B%0Aborder%2Dcolor%3A%20%2395ABD0%3B%0Acolor%3A%20%2300428C%3B%0Abackground%2Dcolor%3A%20%23E4E5E7%3B%0A%7D%0Ali%20pre%20%7B%20margin%2Dleft%3A%200%3B%20%7D%0Ablockquote%20%7B%20font%2Dstyle%3A%20italic%20%7D%0Aimg%20%7B%20background%2Dcolor%3A%20transparent%20%7D%0Ap%2Ecopyright%20%7B%20font%2Dsize%3A%20smaller%20%7D%0A%2Ecenter%20%7B%20text%2Dalign%3A%20center%20%7D%0A%2Efootnote%20%7B%20font%2Dsize%3A%20smaller%3B%20margin%2Dleft%3A%202em%3B%20%7D%0Aa%20img%20%7B%20border%2Dwidth%3A%200%3B%20border%2Dstyle%3A%20none%20%7D%0Aa%3Avisited%20%7B%20color%3A%20navy%20%7D%0Aa%3Alink%20%7B%20color%3A%20navy%20%7D%0Aa%3Ahover%20%7B%20color%3A%20red%3B%20text%2Ddecoration%3A%20underline%20%7D%0Aa%3Aactive%20%7B%20color%3A%20red%3B%20text%2Ddecoration%3A%20underline%20%7D%0Aa%20%7Btext%2Ddecoration%3A%20none%7D%0A%2Etoolbar%20a%3Alink%20%7Bcolor%3A%20blue%7D%0A%2Etoolbar%20a%3Avisited%20%7Bcolor%3A%20blue%7D%0A%2Etoolbar%20a%3Aactive%20%7Bcolor%3A%20red%7D%0A%2Etoolbar%20a%3Ahover%20%7Bcolor%3A%20red%7D%0Aul%20%7B%20list%2Dstyle%2Dtype%3A%20square%3B%20%7D%0Aul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20disc%3B%20%7D%0Aul%20ul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20circle%3B%20%7D%0Aul%20ul%20ul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20disc%3B%20%7D%0Ali%20%7B%20margin%2Dleft%3A%200%2E5em%3B%20margin%2Dtop%3A%200%2E5em%3B%20%7D%0Ali%20li%20%7B%20font%2Dsize%3A%2085%25%3B%20font%2Dstyle%3A%20italic%20%7D%0Ali%20li%20li%20%7B%20font%2Dsize%3A%2085%25%3B%20font%2Dstyle%3A%20normal%20%7D%0Adiv%20dt%0A%7B%0Amargin%2Dleft%3A%200%3B%0Amargin%2Dtop%3A%201em%3B%0Amargin%2Dbottom%3A%200%2E5em%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Adiv%20dd%0A%7B%0Amargin%2Dleft%3A%202em%3B%0Amargin%2Dbottom%3A%200%2E5em%3B%0A%7D%0Ap%2Cpre%2Cul%2Col%2Cblockquote%2Ch2%2Ch3%2Ch4%2Ch5%2Ch6%2Cdl%2Ctable%20%7B%0Amargin%2Dleft%3A%201em%3B%0Amargin%2Dright%3A%201em%3B%0A%7D%0Ap%2Esubhead%20%7B%20font%2Dweight%3A%20bold%3B%20margin%2Dtop%3A%202em%3B%20%7D%0A%2Esmaller%20%7B%20font%2Dsize%3A%20smaller%20%7D%0A%2Ebigger%20%7B%20font%2Dsize%3A%20130%25%20%7D%0Atd%2Cth%20%7B%20padding%3A%200%2E2em%20%7D%0Aul%20%7B%0Amargin%3A%200%2E5em%201%2E5em%200%2E5em%201%2E5em%3B%0Apadding%3A%200%3B%0A%7D%0Aol%20%7B%0Amargin%3A%200%2E5em%201%2E5em%200%2E5em%201%2E5em%3B%0Apadding%3A%200%3B%0A%7D%0Aul%20%7B%20list%2Dstyle%2Dtype%3A%20square%3B%20%7D%0Aul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20disc%3B%20%7D%0Aul%20ul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20circle%3B%20%7D%0Aul%20ul%20ul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20disc%3B%20%7D%0Aul%20li%20%7B%20list%2Dstyle%3A%20square%3B%0Amargin%3A%200%2E1em%200em%200%2E6em%200%3B%0Apadding%3A%200%200%200%200%3B%0Aline%2Dheight%3A%20140%25%3B%0A%7D%0Aol%20li%20%7B%20margin%3A%200%2E1em%200em%200%2E6em%201%2E5em%3B%0Apadding%3A%200%200%200%200px%3B%0Aline%2Dheight%3A%20140%25%3B%0Alist%2Dstyle%2Dtype%3A%20decimal%3B%0A%7D%0Ali%20ul%20li%20%7B%20font%2Dsize%3A%2085%25%3B%20font%2Dstyle%3A%20italic%3B%0Alist%2Dstyle%2Dtype%3A%20disc%3B%0Abackground%3A%20transparent%3B%0Apadding%3A%200%200%200%200%3B%0A%7D%0Ali%20li%20ul%20li%20%7B%20font%2Dsize%3A%2085%25%3B%20font%2Dstyle%3A%20normal%3B%0Alist%2Dstyle%2Dtype%3A%20circle%3B%0Abackground%3A%20transparent%3B%0Apadding%3A%200%200%200%200%3B%0A%7D%0Ali%20li%20li%20ul%20li%20%7B%0Alist%2Dstyle%2Dtype%3A%20disc%3B%0Abackground%3A%20transparent%3B%0Apadding%3A%200%200%200%200%3B%0A%7D%0Ali%20ol%20li%20%7B%0Alist%2Dstyle%2Dtype%3A%20decimal%3B%0A%7D%0Ali%20li%20ol%20li%20%7B%0Alist%2Dstyle%2Dtype%3A%20decimal%3B%0A%7D%0A%0Aol%2Eoutline%20li%3Ahover%20%7B%20cursor%3A%20pointer%20%7D%0Aol%2Eoutline%20li%2Enofold%3Ahover%20%7B%20cursor%3A%20default%20%7D%0Aul%2Eoutline%20li%3Ahover%20%7B%20cursor%3A%20pointer%20%7D%0Aul%2Eoutline%20li%2Enofold%3Ahover%20%7B%20cursor%3A%20default%20%7D%0Aol%2Eoutline%20%7B%20list%2Dstyle%3Adecimal%3B%20%7D%0Aol%2Eoutline%20ol%20%7B%20list%2Dstyle%2Dtype%3Alower%2Dalpha%20%7D%0Aol%2Eoutline%20li%2Enofold%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAIACAMzMzOvr%2FywAAAAACQAJAAACD4SPoRvG614Dctb4MEMcFAA7%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aol%2Eoutline%20li%2Eunfolded%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAMPD%2F8zMzOvr%2F%2F%2F%2F%2FywAAAAACQAJAAACEYyPoivG614LAlg7ZZbxoR8UADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aol%2Eoutline%20li%2Efolded%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAMPD%2F8zMzOvr%2F%2F%2F%2F%2FywAAAAACQAJAAACFIyPoiu2sJyCyoF7W3hxz850CFIAADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aol%2Eoutline%20li%2Eunfolded%3Ahover%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAAAAAAAA%2F8PD%2F%2F%2F%2F%2FywAAAAACQAJAAACEYSPoivG614DIlg7ZZbxoQ8UADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aol%2Eoutline%20li%2Efolded%3Ahover%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAAAAAAAA%2F8PD%2F%2F%2F%2F%2FywAAAAACQAJAAACFISPoiu2sZyCyoV7G3hxz850CFIAADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aul%2Eoutline%20li%2Enofold%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAIACAMzMzOvr%2FywAAAAACQAJAAACD4SPoRvG614Dctb4MEMcFAA7%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aul%2Eoutline%20li%2Eunfolded%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAMPD%2F8zMzOvr%2F%2F%2F%2F%2FywAAAAACQAJAAACEYyPoivG614LAlg7ZZbxoR8UADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aul%2Eoutline%20li%2Efolded%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAMPD%2F8zMzOvr%2F%2F%2F%2F%2FywAAAAACQAJAAACFIyPoiu2sJyCyoF7W3hxz850CFIAADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aul%2Eoutline%20li%2Eunfolded%3Ahover%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAAAAAAAA%2F8PD%2F%2F%2F%2F%2FywAAAAACQAJAAACEYSPoivG614DIlg7ZZbxoQ8UADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aul%2Eoutline%20li%2Efolded%3Ahover%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAAAAAAAA%2F8PD%2F%2F%2F%2F%2FywAAAAACQAJAAACFISPoiu2sZyCyoV7G3hxz850CFIAADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0A%0Aa%2Etitleslide%20%7B%20font%2Dweight%3A%20bold%3B%20font%2Dstyle%3A%20italic%20%7D%0A%0Aimg%2Ehidden%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0Adiv%2Einitial%5Fprompt%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0Adiv%2Eslide%20%7B%0Avisibility%3A%20visible%3B%0Aposition%3A%20inherit%3B%0A%7D%0Adiv%2Ehandout%20%7B%0Aborder%2Dtop%2Dstyle%3A%20solid%3B%0Aborder%2Dtop%2Dwidth%3A%20thin%3B%0Aborder%2Dtop%2Dcolor%3A%20black%3B%0A%7D%0A%40media%20screen%20%7B%0A%2Ehidden%20%7B%20display%3A%20none%3B%20visibility%3A%20visible%20%7D%0Adiv%2Eslide%2Ehidden%20%7B%20display%3A%20block%3B%20visibility%3A%20visible%20%7D%0Adiv%2Ehandout%2Ehidden%20%7B%20display%3A%20block%3B%20visibility%3A%20visible%20%7D%0Adiv%2Ebackground%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0Abody%2Esingle%5Fslide%20div%2Einitial%5Fprompt%20%7B%20display%3A%20block%3B%20visibility%3A%20visible%20%7D%0Abody%2Esingle%5Fslide%20div%2Ebackground%20%7B%20display%3A%20block%3B%20visibility%3A%20visible%20%7D%0Abody%2Esingle%5Fslide%20div%2Ebackground%2Ehidden%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0Abody%2Esingle%5Fslide%20%2Einvisible%20%7B%20visibility%3A%20hidden%20%7D%0Abody%2Esingle%5Fslide%20%2Ehidden%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0Abody%2Esingle%5Fslide%20div%2Eslide%20%7B%20position%3A%20absolute%20%7D%0Abody%2Esingle%5Fslide%20div%2Ehandout%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0A%7D%0A%40media%20print%20%7B%0A%2Ehidden%20%7B%20display%3A%20block%3B%20visibility%3A%20visible%20%7D%0Adiv%2Eslide%20pre%20%7B%20font%2Dsize%3A%2060%25%3B%20padding%2Dleft%3A%200%2E5em%3B%20%7D%0Adiv%2Etoolbar%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%3B%20%7D%0Adiv%2Eslidy%5Ftoc%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%3B%20%7D%0Adiv%2Ebackground%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%3B%20%7D%0Adiv%2Eslide%20%7B%20page%2Dbreak%2Dbefore%3A%20always%20%7D%0A%0Adiv%2Eslide%2Efirst%2Dslide%20%7B%20page%2Dbreak%2Dbefore%3A%20avoid%20%7D%0A%7D%0A%0A%0A%2Ejslider%20table%20%7B%0Amargin%2Dleft%3A%200em%3B%0Amargin%2Dright%3A%200em%3B%0A%7D%0A%0Atable%2EdataTable%2C%20%2Eshiny%2Ddatatable%2Doutput%20div%20%7B%0Afont%2Dsize%3A%2014pt%3B%0A%7D%0A%0A%2EdataTables%5Finfo%2C%20%2EdataTables%5Fpaginate%20%7B%0Afont%2Dsize%3A%2019px%3B%0A%7D%0A%0Apre%2EsourceCode%2C%20code%2EsourceCode%20%7B%0Afont%2Dsize%3A%2080%25%3B%0A%7D%0A%0Alabel%2C%20button%2C%20input%2C%20select%2C%20textarea%20%7B%0Afont%2Dsize%3A%2014pt%3B%0A%7D%0A%0Aul%2Enav%2C%20ul%2Enav%20li%20%7B%0Alist%2Dstyle%2Dtype%3A%20none%3B%0A%7D%0A" rel="stylesheet" />
  <script src="data:application/x-javascript;base64,Lyogc2xpZHkuanMKCiAgIENvcHlyaWdodCAoYykgMjAwNS0yMDEzIFczQyAoTUlULCBFUkNJTSwgS2VpbyksIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAgIFczQyBsaWFiaWxpdHksIHRyYWRlbWFyaywgZG9jdW1lbnQgdXNlIGFuZCBzb2Z0d2FyZSBsaWNlbnNpbmcKICAgcnVsZXMgYXBwbHksIHNlZToKCiAgIGh0dHA6Ly93d3cudzMub3JnL0NvbnNvcnRpdW0vTGVnYWwvY29weXJpZ2h0LWRvY3VtZW50cwogICBodHRwOi8vd3d3LnczLm9yZy9Db25zb3J0aXVtL0xlZ2FsL2NvcHlyaWdodC1zb2Z0d2FyZQoKICAgRGVmaW5lcyBzaW5nbGUgbmFtZSAidzNjX3NsaWR5IiBpbiBnbG9iYWwgbmFtZXNwYWNlCiAgIEFkZHMgZXZlbnQgaGFuZGxlcnMgd2l0aG91dCB0cmFtcGxpbmcgb24gYW55IG90aGVycwoqLwoKLy8gdGhlIHNsaWR5IG9iamVjdCBpbXBsZW1lbnRhdGlvbgp2YXIgdzNjX3NsaWR5ID0gewogIC8vIGNsYXNzaWZ5IHdoaWNoIGtpbmQgb2YgYnJvd3NlciB3ZSdyZSBydW5uaW5nIHVuZGVyCiAgbnNfcG9zOiAodHlwZW9mIHdpbmRvdy5wYWdlWU9mZnNldCE9J3VuZGVmaW5lZCcpLAogIGtodG1sOiAoKG5hdmlnYXRvci51c2VyQWdlbnQpLmluZGV4T2YoIktIVE1MIikgPj0gMCA/IHRydWUgOiBmYWxzZSksCiAgb3BlcmE6ICgobmF2aWdhdG9yLnVzZXJBZ2VudCkuaW5kZXhPZigiT3BlcmEiKSA+PSAwID8gdHJ1ZSA6IGZhbHNlKSwKICBpcGFkOiAoKG5hdmlnYXRvci51c2VyQWdlbnQpLmluZGV4T2YoImlQYWQiKSA+PSAwID8gdHJ1ZSA6IGZhbHNlKSwKICBpcGhvbmU6ICgobmF2aWdhdG9yLnVzZXJBZ2VudCkuaW5kZXhPZigiaVBob25lIikgPj0gMCA/IHRydWUgOiBmYWxzZSksCiAgYW5kcm9pZDogKChuYXZpZ2F0b3IudXNlckFnZW50KS5pbmRleE9mKCJBbmRyb2lkIikgPj0gMCA/IHRydWUgOiBmYWxzZSksCiAgaWU6ICh0eXBlb2YgZG9jdW1lbnQuYWxsICE9ICJ1bmRlZmluZWQiICYmICF0aGlzLm9wZXJhKSwKICBpZTY6ICghdGhpcy5uc19wb3MgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDYiKSAhPSAtMSksCiAgaWU3OiAoIXRoaXMubnNfcG9zICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSA3IikgIT0gLTEpLAogIGllODogKCF0aGlzLm5zX3BvcyAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1TSUUgOCIpICE9IC0xKSwKICBpZTk6ICghdGhpcy5uc19wb3MgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDkiKSAhPSAtMSksCgogIC8vIGRhdGEgZm9yIHN3aXBlIGFuZCBkb3VibGUgdGFwIGRldGVjdGlvbiBvbiB0b3VjaCBzY3JlZW5zCiAgbGFzdF90YXA6IDAsCiAgcHJldl90YXA6IDAsCiAgc3RhcnRfeDogMCwKICBzdGFydF95OiAwLAogIGRlbHRhX3g6IDAsCiAgZGVsdGFfeTogMCwKCiAgLy8gYXJlIHdlIHJ1bm5pbmcgYXMgWEhUTUw/IChkb2Vzbid0IHdvcmsgb24gT3BlcmEpCiAgaXNfeGh0bWw6IC94bWwvLnRlc3QoZG9jdW1lbnQuY29udGVudFR5cGUpLAoKICBzbGlkZV9udW1iZXI6IDAsIC8vIGludGVnZXIgc2xpZGUgY291bnQ6IDAsIDEsIDIsIC4uLgogIHNsaWRlX251bWJlcl9lbGVtZW50OiBudWxsLCAvLyBlbGVtZW50IGNvbnRhaW5pbmcgc2xpZGUgbnVtYmVyCiAgc2xpZGVzOiBbXSwgLy8gc2V0IHRvIGFycmF5IG9mIHNsaWRlIGRpdidzCiAgbm90ZXM6IFtdLCAvLyBzZXQgdG8gYXJyYXkgb2YgaGFuZG91dCBkaXYncwogIGJhY2tncm91bmRzOiBbXSwgLy8gc2V0IHRvIGFycmF5IG9mIGJhY2tncm91bmQgZGl2J3MKICBvYnNlcnZlcnM6IFtdLCAvLyBsaXN0IG9mIG9ic2VydmVyIGZ1bmN0aW9ucwogIHRvb2xiYXI6IG51bGwsIC8vIGVsZW1lbnQgY29udGFpbmluZyB0b29sYmFyCiAgdGl0bGU6IG51bGwsIC8vIGRvY3VtZW50IHRpdGxlCiAgbGFzdF9zaG93bjogbnVsbCwgLy8gbGFzdCBpbmNyZW1lbnRhbGx5IHNob3duIGl0ZW0KICBlb3M6IG51bGwsICAvLyBzcGFuIGVsZW1lbnQgZm9yIGVuZCBvZiBzbGlkZSBpbmRpY2F0b3IKICB0b2M6IG51bGwsIC8vIHRhYmxlIG9mIGNvbnRlbnRzCiAgb3V0bGluZTogbnVsbCwgLy8gb3V0bGluZSBlbGVtZW50IHdpdGggdGhlIGZvY3VzCiAgc2VsZWN0ZWRfdGV4dF9sZW46IDAsIC8vIGxlbmd0aCBvZiBkcmFnIHNlbGVjdGlvbiBvbiBkb2N1bWVudAogIHZpZXdfYWxsOiAwLCAgLy8gMSB0byB2aWV3IGFsbCBzbGlkZXMgKyBoYW5kb3V0cwogIHdhbnRfdG9vbGJhcjogdHJ1ZSwgIC8vIHVzZXIgcHJlZmVyZW5jZSB0byBzaG93L2hpZGUgdG9vbGJhcgogIG1vdXNlX2NsaWNrX2VuYWJsZWQ6IHRydWUsIC8vIGVuYWJsZXMgbGVmdCBjbGljayBmb3IgbmV4dCBzbGlkZQogIHNjcm9sbF9oYWNrOiAwLCAvLyBJRSB3b3JrIGFyb3VuZCBmb3IgcG9zaXRpb246IGZpeGVkCiAgZGlzYWJsZV9zbGlkZV9jbGljazogZmFsc2UsICAvLyB1c2VkIGJ5IGNsaWNrZWQgYW5jaG9ycwoKICBsYW5nOiAiZW4iLCAvLyB1cGRhdGVkIHRvIGxhbmd1YWdlIHNwZWNpZmllZCBieSBodG1sIGZpbGUKCiAgaGVscF9hbmNob3I6IG51bGwsIC8vIHVzZWQgZm9yIGtleWJvYXJkIGZvY3VzIGhhY2sgaW4gc2hvd1Rvb2xiYXIoKQogIGhlbHBfcGFnZTogImh0dHA6Ly93d3cudzMub3JnL1RhbGtzL1Rvb2xzL1NsaWR5Mi9oZWxwL2hlbHAuaHRtbCIsCiAgaGVscF90ZXh0OiAiTmF2aWdhdGUgd2l0aCBtb3VzZSBjbGljaywgc3BhY2UgYmFyLCBDdXJzb3IgTGVmdC9SaWdodCwgIiArCiAgICAgICAgICAgICAib3IgUGcgVXAgYW5kIFBnIERuLiBVc2UgUyBhbmQgQiB0byBjaGFuZ2UgZm9udCBzaXplLiIsCgogIHNpemVfaW5kZXg6IDAsCiAgc2l6ZV9hZGp1c3RtZW50OiAwLAogIHNpemVzOiAgbmV3IEFycmF5KCIxMHB0IiwgIjEycHQiLCAiMTRwdCIsICIxNnB0IiwgIjE4cHQiLCAiMjBwdCIsCiAgICAgICAgICAgICAgICAgICAgIjIycHQiLCAiMjRwdCIsICIyNnB0IiwgIjI4cHQiLCAiMzBwdCIsICIzMnB0IiksCgogIC8vIG5lZWRlZCBmb3IgZWZmaWNpZW50IHJlc2l6aW5nCiAgbGFzdF93aWR0aDogMCwKICBsYXN0X2hlaWdodDogMCwKCgogIC8vIE5lZWRlZCBmb3IgY3Jvc3MgYnJvd3NlciBzdXBwb3J0IGZvciByZWxhdGl2ZSB3aWR0aC9oZWlnaHQgb24KICAvLyBvYmplY3QgZWxlbWVudHMuIFRoZSB3b3JrIGFyb3VuZCBpcyB0byBzYXZlIHdpZHRoL2hlaWdodCBhdHRyaWJ1dGVzCiAgLy8gYW5kIHRoZW4gdG8gcmVjb21wdXRlIGFic29sdXRlIHdpZHRoL2hlaWdodCBkaW1lbnNpb25zIG9uIHJlc2l6aW5nCiAgIG9iamVjdHM6IFtdLAoKICAvLyBhdHRhY2ggaW5pdGlhbGlhdGlvbiBldmVudCBoYW5kbGVycwogIHNldF91cDogZnVuY3Rpb24gKCkgewogICAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHsgdzNjX3NsaWR5LmluaXQoKTsgfTsKICAgIGlmICh0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgIT0gInVuZGVmaW5lZCIpCiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgaW5pdCwgZmFsc2UpOwogICAgZWxzZQogICAgICB3aW5kb3cuYXR0YWNoRXZlbnQoIm9ubG9hZCIsIGluaXQpOwogIH0sCgogIGhpZGVfc2xpZGVzOiBmdW5jdGlvbiAoKSB7CiAgICBpZiAoZG9jdW1lbnQuYm9keSAmJiAhdzNjX3NsaWR5LmluaXRpYWxpemVkKQogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnZpc2liaWxpdHkgPSAiaGlkZGVuIjsKICAgIGVsc2UKICAgICAgc2V0VGltZW91dCh3M2Nfc2xpZHkuaGlkZV9zbGlkZXMsIDUwKTsKICB9LAoKICAvLyBoYWNrIHRvIHBlcnN1YWRlIElFIHRvIGNvbXB1dGUgY29ycmVjdCBkb2N1bWVudCBoZWlnaHQKICAvLyBhcyBuZWVkZWQgZm9yIHNpbXVsYXRpbmcgZml4ZWQgcG9zaXRpb25pbmcgb2YgdG9vbGJhcgogIGllX2hhY2s6IGZ1bmN0aW9uICgpIHsKICAgIHdpbmRvdy5yZXNpemVCeSgwLC0xKTsKICAgIHdpbmRvdy5yZXNpemVCeSgwLCAxKTsKICB9LAoKICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAvL2FsZXJ0KCJzbGlkeSBzdGFydGluZyB0ZXN0IDEwIik7CiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7CiAgICB0aGlzLmluaXRfbG9jYWxpemF0aW9uKCk7CiAgICB0aGlzLmFkZF90b29sYmFyKCk7CiAgICB0aGlzLndyYXBfaW1wbGljaXRfc2xpZGVzKCk7CiAgICB0aGlzLmNvbGxlY3Rfc2xpZGVzKCk7CiAgICB0aGlzLmNvbGxlY3Rfbm90ZXMoKTsKICAgIHRoaXMuY29sbGVjdF9iYWNrZ3JvdW5kcygpOwogICAgdGhpcy5vYmplY3RzID0gZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZSgib2JqZWN0Iik7CiAgICB0aGlzLnBhdGNoX2FuY2hvcnMoKTsKICAgIHRoaXMuc2xpZGVfbnVtYmVyID0gdGhpcy5maW5kX3NsaWRlX251bWJlcihsb2NhdGlvbi5ocmVmKTsKICAgIHdpbmRvdy5vZmZzY3JlZW5idWZmZXJpbmcgPSB0cnVlOwogICAgdGhpcy5zaXplX2FkanVzdG1lbnQgPSB0aGlzLmZpbmRfc2l6ZV9hZGp1c3QoKTsKICAgIHRoaXMudGltZV9sZWZ0ID0gdGhpcy5maW5kX2R1cmF0aW9uKCk7CiAgICB0aGlzLmhpZGVfaW1hZ2VfdG9vbGJhcigpOyAgLy8gc3VwcHJlc3MgSUUgaW1hZ2UgdG9vbGJhciBwb3B1cAogICAgdGhpcy5pbml0X291dGxpbmVyKCk7ICAvLyBhY3RpdmF0ZSBmb2xkL3VuZm9sZCBzdXBwb3J0CiAgICB0aGlzLnRpdGxlID0gZG9jdW1lbnQudGl0bGU7CiAgICB0aGlzLmtleWJvYXJkbGVzcyA9ICh0aGlzLmlwYWR8fHRoaXMuaXBob25lfHx0aGlzLmFuZHJvaWQpOwoKICAgIGlmICh0aGlzLmtleWJvYXJkbGVzcykKICAgIHsKICAgICAgdzNjX3NsaWR5LnJlbW92ZV9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpCiAgICAgIHRoaXMud2FudF90b29sYmFyID0gMDsKICAgIH0KCiAgICAvLyB3b3JrIGFyb3VuZCBmb3Igb3BlcmEgYnVnCiAgICB0aGlzLmlzX3hodG1sID0gKGRvY3VtZW50LmJvZHkudGFnTmFtZSA9PSAiQk9EWSIgPyBmYWxzZSA6IHRydWUpOwoKICAgIGlmICh0aGlzLnNsaWRlcy5sZW5ndGggPiAwKQogICAgewogICAgICB2YXIgc2xpZGUgPSB0aGlzLnNsaWRlc1t0aGlzLnNsaWRlX251bWJlcl07CiAgIAogICAgICBpZiAodGhpcy5zbGlkZV9udW1iZXIgPiAwKQogICAgICB7CiAgICAgICAgdGhpcy5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsKICAgICAgICB0aGlzLmxhc3Rfc2hvd24gPSB0aGlzLnByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW0obnVsbCk7CiAgICAgICAgdGhpcy5zZXRfZW9zX3N0YXR1cyh0cnVlKTsKICAgICAgfQogICAgICBlbHNlCiAgICAgIHsKICAgICAgICB0aGlzLmxhc3Rfc2hvd24gPSBudWxsOwogICAgICAgIHRoaXMuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJoaWRkZW4iKTsKICAgICAgICB0aGlzLnNldF9lb3Nfc3RhdHVzKCF0aGlzLm5leHRfaW5jcmVtZW50YWxfaXRlbSh0aGlzLmxhc3Rfc2hvd24pKTsKICAgICAgfQoKICAgICAgdGhpcy5zZXRfbG9jYXRpb24oKTsKICAgICAgdGhpcy5hZGRfY2xhc3ModGhpcy5zbGlkZXNbMF0sICJmaXJzdC1zbGlkZSIpOwogICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZShzbGlkZSk7CiAgICB9CgogICAgdGhpcy50b2MgPSB0aGlzLnRhYmxlX29mX2NvbnRlbnRzKCk7CgogICAgdGhpcy5hZGRfaW5pdGlhbF9wcm9tcHQoKTsKCiAgICAvLyBiaW5kIGV2ZW50IGhhbmRsZXJzIHdpdGhvdXQgaW50ZXJmZXJpbmcgd2l0aCBjdXN0b20gcGFnZSBzY3JpcHRzCiAgICAvLyBUYXAgZXZlbnRzIGJlaGF2ZSB0b28gd2VpcmRseSB0byBzdXBwb3J0IGNsaWNrcyByZWxpYWJseSBvbgogICAgLy8gaVBob25lIGFuZCBpUGFkLCBzbyBleGNsdWRlIHRoZXNlIGZyb20gY2xpY2sgaGFuZGxlcgoKICAgIGlmICghdGhpcy5rZXlib2FyZGxlc3MpCiAgICB7CiAgICAgIHRoaXMuYWRkX2xpc3RlbmVyKGRvY3VtZW50LmJvZHksICJjbGljayIsIHRoaXMubW91c2VfYnV0dG9uX2NsaWNrKTsKICAgICAgdGhpcy5hZGRfbGlzdGVuZXIoZG9jdW1lbnQuYm9keSwgIm1vdXNlZG93biIsIHRoaXMubW91c2VfYnV0dG9uX2Rvd24pOwogICAgfQoKICAgIHRoaXMuYWRkX2xpc3RlbmVyKGRvY3VtZW50LCAia2V5ZG93biIsIHRoaXMua2V5X2Rvd24pOwogICAgdGhpcy5hZGRfbGlzdGVuZXIoZG9jdW1lbnQsICJrZXlwcmVzcyIsIHRoaXMua2V5X3ByZXNzKTsKICAgIHRoaXMuYWRkX2xpc3RlbmVyKHdpbmRvdywgInJlc2l6ZSIsIHRoaXMucmVzaXplZCk7CiAgICB0aGlzLmFkZF9saXN0ZW5lcih3aW5kb3csICJzY3JvbGwiLCB0aGlzLnNjcm9sbGVkKTsKICAgIHRoaXMuYWRkX2xpc3RlbmVyKHdpbmRvdywgInVubG9hZCIsIHRoaXMudW5sb2FkZWQpOwoKICAgIHRoaXMuYWRkX2xpc3RlbmVyKGRvY3VtZW50LCAiZ2VzdHVyZWNoYW5nZSIsIGZ1bmN0aW9uICgpCiAgICB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pOwoKICAgIHRoaXMuYXR0YWNoX3RvdWNoX2hhbmRlcnModGhpcy5zbGlkZXMpOwoKICAgIC8vIHRoaXMgc2VlbXMgdG8gYmUgYSBkZWJ1Z2dpbmcgaGFjawogICAgLy9pZiAoIWRvY3VtZW50LmJvZHkub25jbGljaykKICAgIC8vICBkb2N1bWVudC5ib2R5Lm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7IH07CgogICAgdGhpcy5zaW5nbGVfc2xpZGVfdmlldygpOwoKICAgIC8vdGhpcy5zZXRfbG9jYXRpb24oKTsKCiAgICB0aGlzLnJlc2l6ZWQoKTsKCiAgICBpZiAodGhpcy5pZTcpCiAgICAgIHNldFRpbWVvdXQodzNjX3NsaWR5LmllX2hhY2ssIDEwMCk7CgogICAgdGhpcy5zaG93X3Rvb2xiYXIoKTsKCiAgICAvLyBmb3IgYmFjayBidXR0b24gZGV0ZWN0aW9uCiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IHczY19zbGlkeS5jaGVja19sb2NhdGlvbigpOyB9LCAyMDApOwogICAgdzNjX3NsaWR5LmluaXRpYWxpemVkID0gdHJ1ZTsKICB9LAoKICAvLyBjcmVhdGUgZGl2IGVsZW1lbnQgd2l0aCBsaW5rcyB0byBlYWNoIHNsaWRlCiAgdGFibGVfb2ZfY29udGVudHM6IGZ1bmN0aW9uICgpIHsKICAgIHZhciB0b2MgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJkaXYiKTsKICAgIHRoaXMuYWRkX2NsYXNzKHRvYywgInNsaWR5X3RvYyBoaWRkZW4iKTsKICAgIC8vdG9jLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLCAiMCIpOwoKICAgIHZhciBoZWFkaW5nID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiZGl2Iik7CiAgICB0aGlzLmFkZF9jbGFzcyhoZWFkaW5nLCAidG9jLWhlYWRpbmciKTsKICAgIGhlYWRpbmcuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgiVGFibGUgb2YgQ29udGVudHMiKTsKCiAgICB0b2MuYXBwZW5kQ2hpbGQoaGVhZGluZyk7CiAgICB2YXIgcHJldmlvdXMgPSBudWxsOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zbGlkZXMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIHZhciB0aXRsZSA9IHRoaXMuaGFzX2NsYXNzKHRoaXMuc2xpZGVzW2ldLCAidGl0bGUiKTsKICAgICAgdmFyIG51bSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKChpICsgMSkgKyAiLiAiKTsKCiAgICAgIHRvYy5hcHBlbmRDaGlsZChudW0pOwoKICAgICAgdmFyIGEgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJhIik7CiAgICAgIGEuc2V0QXR0cmlidXRlKCJocmVmIiwgIiMoIiArIChpKzEpICsgIikiKTsKCiAgICAgIGlmICh0aXRsZSkKICAgICAgICB0aGlzLmFkZF9jbGFzcyhhLCAidGl0bGVzbGlkZSIpOwoKICAgICAgdmFyIG5hbWUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLnNsaWRlX25hbWUoaSkpOwogICAgICBhLmFwcGVuZENoaWxkKG5hbWUpOwogICAgICBhLm9uY2xpY2sgPSB3M2Nfc2xpZHkudG9jX2NsaWNrOwogICAgICBhLm9ua2V5ZG93biA9IHczY19zbGlkeS50b2Nfa2V5X2Rvd247CiAgICAgIGEucHJldmlvdXMgPSBwcmV2aW91czsKCiAgICAgIGlmIChwcmV2aW91cykKICAgICAgICBwcmV2aW91cy5uZXh0ID0gYTsKCiAgICAgIHRvYy5hcHBlbmRDaGlsZChhKTsKCiAgICAgIGlmIChpID09IDApCiAgICAgICAgdG9jLmZpcnN0ID0gYTsKCiAgICAgIGlmIChpIDwgdGhpcy5zbGlkZXMubGVuZ3RoIC0gMSkKICAgICAgewogICAgICAgIHZhciBiciA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImJyIik7CiAgICAgICAgdG9jLmFwcGVuZENoaWxkKGJyKTsKICAgICAgfQoKICAgICAgcHJldmlvdXMgPSBhOwogICAgfQoKICAgIHRvYy5mb2N1cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMuZmlyc3QpCiAgICAgICAgdGhpcy5maXJzdC5mb2N1cygpOwogICAgfQoKICAgIHRvYy5vbm1vdXNldXAgPSB3M2Nfc2xpZHkubW91c2VfYnV0dG9uX3VwOwoKICAgIHRvYy5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKICAgICAgZXx8KGU9d2luZG93LmV2ZW50KTsKCiAgICAgIGlmICh3M2Nfc2xpZHkuc2VsZWN0ZWRfdGV4dF9sZW4gPD0gMCkKICAgICAgICAgdzNjX3NsaWR5LmhpZGVfdGFibGVfb2ZfY29udGVudHModHJ1ZSk7CgogICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihlKTsKICAgIAogICAgICBpZiAoZS5jYW5jZWwgIT0gdW5kZWZpbmVkKQogICAgICAgIGUuY2FuY2VsID0gdHJ1ZTsKICAgICAgCiAgICAgIGlmIChlLnJldHVyblZhbHVlICE9IHVuZGVmaW5lZCkKICAgICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7CiAgICAgIAogICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwoKICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKHRvYywgZG9jdW1lbnQuYm9keS5maXJzdENoaWxkKTsKICAgIHJldHVybiB0b2M7CiAgfSwKCiAgaXNfc2hvd25fdG9jOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gIXczY19zbGlkeS5oYXNfY2xhc3ModzNjX3NsaWR5LnRvYywgImhpZGRlbiIpOwogIH0sCgogIHNob3dfdGFibGVfb2ZfY29udGVudHM6IGZ1bmN0aW9uICgpIHsKICAgIHczY19zbGlkeS5yZW1vdmVfY2xhc3ModzNjX3NsaWR5LnRvYywgImhpZGRlbiIpOwogICAgdmFyIHRvYyA9IHczY19zbGlkeS50b2M7CiAgICB0b2MuZm9jdXMoKTsKCiAgICBpZiAodzNjX3NsaWR5LmllNyAmJiB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID09IDApCiAgICAgIHNldFRpbWVvdXQodzNjX3NsaWR5LmllX2hhY2ssIDEwMCk7CiAgfSwKCiAgaGlkZV90YWJsZV9vZl9jb250ZW50czogZnVuY3Rpb24gKGZvY3VzKSB7CiAgICB3M2Nfc2xpZHkuYWRkX2NsYXNzKHczY19zbGlkeS50b2MsICJoaWRkZW4iKTsKCiAgICBpZiAoZm9jdXMgJiYgIXczY19zbGlkeS5vcGVyYSAmJgogICAgICAgICF3M2Nfc2xpZHkuaGFzX2NsYXNzKHczY19zbGlkeS50b2MsICJoaWRkZW4iKSkKICAgICAgdzNjX3NsaWR5LnNldF9mb2N1cygpOwogIH0sCgogIHRvZ2dsZV90YWJsZV9vZl9jb250ZW50czogZnVuY3Rpb24gKCkgewogICAgaWYgKHczY19zbGlkeS5pc19zaG93bl90b2MoKSkKICAgICAgdzNjX3NsaWR5LmhpZGVfdGFibGVfb2ZfY29udGVudHModHJ1ZSk7CiAgICBlbHNlCiAgICAgIHczY19zbGlkeS5zaG93X3RhYmxlX29mX2NvbnRlbnRzKCk7CiAgfSwKCiAgLy8gY2FsbGVkIG9uIGNsaWNraW5nIHRvYyBlbnRyeQogIHRvY19jbGljazogZnVuY3Rpb24gKGUpIHsKICAgIGlmICghZSkKICAgICAgZSA9IHdpbmRvdy5ldmVudDsKCiAgICB2YXIgdGFyZ2V0ID0gdzNjX3NsaWR5LmdldF90YXJnZXQoZSk7CgogICAgaWYgKHRhcmdldCAmJiB0YXJnZXQubm9kZVR5cGUgPT0gMSkKICAgIHsKICAgICAgdmFyIHVyaSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoImhyZWYiKTsKCiAgICAgIGlmICh1cmkpCiAgICAgIHsKICAgICAgICAvL2FsZXJ0KCJnb2luZyB0byAiICsgdXJpKTsKICAgICAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgIHczY19zbGlkeS5oaWRlX3NsaWRlKHNsaWRlKTsKICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID0gdzNjX3NsaWR5LmZpbmRfc2xpZGVfbnVtYmVyKHVyaSk7CiAgICAgICAgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbnVsbDsKICAgICAgICB3M2Nfc2xpZHkuc2V0X2xvY2F0aW9uKCk7CiAgICAgICAgdzNjX3NsaWR5LnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgiaGlkZGVuIik7CiAgICAgICAgdzNjX3NsaWR5LnNldF9lb3Nfc3RhdHVzKCF3M2Nfc2xpZHkubmV4dF9pbmNyZW1lbnRhbF9pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKSk7CiAgICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgICAgIC8vdGFyZ2V0LmZvY3VzKCk7CgogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgIGlmICghdzNjX3NsaWR5Lm9wZXJhKQogICAgICAgICAgICB3M2Nfc2xpZHkuc2V0X2ZvY3VzKCk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKQogICAgICAgIHsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICB3M2Nfc2xpZHkuaGlkZV90YWJsZV9vZl9jb250ZW50cyh0cnVlKTsKICAgIGlmICh3M2Nfc2xpZHkuaWU3KSB3M2Nfc2xpZHkuaWVfaGFjaygpOwogICAgdzNjX3NsaWR5LnN0b3BfcHJvcGFnYXRpb24oZSk7CiAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChlKTsKICB9LAoKICAvLyBjYWxsZWQgb25rZXlkb3duIGZvciB0b2MgZW50cnkKICB0b2Nfa2V5X2Rvd246IGZ1bmN0aW9uIChldmVudCkgewogICAgdmFyIGtleTsKCiAgICBpZiAoIWV2ZW50KQogICAgICB2YXIgZXZlbnQgPSB3aW5kb3cuZXZlbnQ7CgogICAgLy8ga2x1ZGdlIGFyb3VuZCBOUy9JRSBkaWZmZXJlbmNlcyAKICAgIGlmICh3aW5kb3cuZXZlbnQpCiAgICAgIGtleSA9IHdpbmRvdy5ldmVudC5rZXlDb2RlOwogICAgZWxzZSBpZiAoZXZlbnQud2hpY2gpCiAgICAgIGtleSA9IGV2ZW50LndoaWNoOwogICAgZWxzZQogICAgICByZXR1cm4gdHJ1ZTsgLy8gWWlrZXMhIHVua25vd24gYnJvd3NlcgoKICAgIC8vIGlnbm9yZSBldmVudCBpZiBrZXkgdmFsdWUgaXMgemVybwogICAgLy8gYXMgZm9yIGFsdCBvbiBPcGVyYSBhbmQgS29ucXVlcm9yCiAgICBpZiAoIWtleSkKICAgICAgcmV0dXJuIHRydWU7CgogICAgLy8gY2hlY2sgZm9yIGNvbmN1cnJlbnQgY29udHJvbC9jb21tYW5kL2FsdCBrZXkKICAgIC8vIGJ1dCBhcmUgdGhlc2Ugb25seSBwcmVzZW50IG9uIG1vdXNlIGV2ZW50cz8KCiAgICBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5hbHRLZXkpCiAgICAgIHJldHVybiB0cnVlOwoKICAgIGlmIChrZXkgPT0gMTMpCiAgICB7CiAgICAgIHZhciB1cmkgPSB0aGlzLmdldEF0dHJpYnV0ZSgiaHJlZiIpOwoKICAgICAgaWYgKHVyaSkKICAgICAgewogICAgICAgIC8vYWxlcnQoImdvaW5nIHRvICIgKyB1cmkpOwogICAgICAgdmFyIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICB3M2Nfc2xpZHkuaGlkZV9zbGlkZShzbGlkZSk7CiAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IHczY19zbGlkeS5maW5kX3NsaWRlX251bWJlcih1cmkpOwogICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IG51bGw7CiAgICAgICAgdzNjX3NsaWR5LnNldF9sb2NhdGlvbigpOwogICAgICAgIHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoImhpZGRlbiIpOwogICAgICAgIHczY19zbGlkeS5zZXRfZW9zX3N0YXR1cyghdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbSh3M2Nfc2xpZHkubGFzdF9zaG93bikpOwogICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgICAvL3RhcmdldC5mb2N1cygpOwoKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICBpZiAoIXczY19zbGlkeS5vcGVyYSkKICAgICAgICAgICAgdzNjX3NsaWR5LnNldF9mb2N1cygpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkKICAgICAgICB7CiAgICAgICAgfQogICAgICB9CgogICAgICB3M2Nfc2xpZHkuaGlkZV90YWJsZV9vZl9jb250ZW50cyh0cnVlKTsKCiAgICAgIGlmIChzZWxmLmllNykKICAgICAgIHczY19zbGlkeS5pZV9oYWNrKCk7CgogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CgogICAgaWYgKGtleSA9PSA0MCAmJiB0aGlzLm5leHQpCiAgICB7CiAgICAgIHRoaXMubmV4dC5mb2N1cygpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CgogICAgaWYgKGtleSA9PSAzOCAmJiB0aGlzLnByZXZpb3VzKQogICAgewogICAgICB0aGlzLnByZXZpb3VzLmZvY3VzKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9LAoKICB0b3VjaHN0YXJ0OiBmdW5jdGlvbiAoZSkKICB7CiAgICAvLyBhIGRvdWJsZSB0b3VjaCBvZnRlbiBzdGFydHMgd2l0aCBhCiAgICAvLyBzaW5nbGUgdG91Y2ggZHVlIHRvIGZpbmdlcnMgdG91Y2hpbmcKICAgIC8vIGRvd24gYXQgc2xpZ2h0bHkgZGlmZmVyZW50IHRpbWVzCiAgICAvLyB0aHVzIGF2b2lkIGNhbGxpbmcgcHJldmVudERlZmF1bHQgaGVyZQogICAgdGhpcy5wcmV2X3RhcCA9IHRoaXMubGFzdF90YXA7CiAgICB0aGlzLmxhc3RfdGFwID0gKG5ldyBEYXRlKS5nZXRUaW1lKCk7CgogICAgdmFyIHRhcF9kZWxheSA9IHRoaXMubGFzdF90YXAgLSB0aGlzLnByZXZfdGFwOwoKICAgIGlmICh0YXBfZGVsYXkgPD0gMjAwKQogICAgewogICAgICAvLyBkb3VibGUgdGFwCiAgICB9CgogICAgdmFyIHRvdWNoID0gZS50b3VjaGVzWzBdOwoKICAgIHRoaXMucGFnZVggPSB0b3VjaC5wYWdlWDsKICAgIHRoaXMucGFnZVkgPSB0b3VjaC5wYWdlWTsKICAgIHRoaXMuc2NyZWVuWCA9IHRvdWNoLnNjcmVlblg7CiAgICB0aGlzLnNjcmVlblkgPSB0b3VjaC5zY3JlZW5ZOwogICAgdGhpcy5jbGllbnRYID0gdG91Y2guY2xpZW50WDsKICAgIHRoaXMuY2xpZW50WSA9IHRvdWNoLmNsaWVudFk7CgogICAgdGhpcy5kZWx0YV94ID0gdGhpcy5kZWx0YV95ID0gMDsKICB9LAoKICB0b3VjaG1vdmU6IGZ1bmN0aW9uIChlKQogIHsKICAgIC8vIG92ZXJyaWRlIG5hdGl2ZSBnZXN0dXJlcyBmb3Igc2luZ2xlIHRvdWNoCiAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA+IDEpCiAgICAgIHJldHVybjsKCiAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB2YXIgdG91Y2ggPSBlLnRvdWNoZXNbMF07CiAgICB0aGlzLmRlbHRhX3ggPSB0b3VjaC5wYWdlWCAtIHRoaXMucGFnZVg7CiAgICB0aGlzLmRlbHRhX3kgPSB0b3VjaC5wYWdlWSAtIHRoaXMucGFnZVk7CiAgfSwKCiAgdG91Y2hlbmQ6IGZ1bmN0aW9uIChlKQogIHsKICAgIC8vIGRlZmF1bHQgYmVoYXZpb3IgZm9yIG11bHRpLXRvdWNoCiAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA+IDEpCiAgICAgIHJldHVybjsKCiAgICB2YXIgZGVsYXkgPSAobmV3IERhdGUpLmdldFRpbWUoKSAtIHRoaXMubGFzdF90YXA7CiAgICB2YXIgZHggPSB0aGlzLmRlbHRhX3g7CiAgICB2YXIgZHkgPSB0aGlzLmRlbHRhX3k7CiAgICB2YXIgYWJzX2R4ID0gTWF0aC5hYnMoZHgpOwogICAgdmFyIGFic19keSA9IE1hdGguYWJzKGR5KTsKCiAgICBpZiAoZGVsYXkgPCA1MDAgJiYgKGFic19keCA+IDEwMCB8fCBhYnNfZHkgPiAxMDApKQogICAgewogICAgICBpZiAoYWJzX2R4ID4gMC41ICogYWJzX2R5KQogICAgICB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICBpZiAoZHggPCAwKQogICAgICAgICAgdzNjX3NsaWR5Lm5leHRfc2xpZGUodHJ1ZSk7CiAgICAgICAgZWxzZQogICAgICAgICAgdzNjX3NsaWR5LnByZXZpb3VzX3NsaWRlKHRydWUpOwogICAgICB9CiAgICAgIGVsc2UgaWYgKGFic19keSA+IDIgKiBhYnNfZHgpCiAgICAgIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgdzNjX3NsaWR5LnRvZ2dsZV90YWJsZV9vZl9jb250ZW50cygpOwogICAgICB9CiAgICB9CiAgfSwKCiAgLy8gIyMjIE9CU09MRVRFICMjIwogIGJlZm9yZV9wcmludDogZnVuY3Rpb24gKCkgewogICAgdGhpcy5zaG93X2FsbF9zbGlkZXMoKTsKICAgIHRoaXMuaGlkZV90b29sYmFyKCk7CiAgICBhbGVydCgiYmVmb3JlIHByaW50Iik7CiAgfSwKCiAgLy8gIyMjIE9CU09MRVRFICMjIwogIGFmdGVyX3ByaW50OiBmdW5jdGlvbiAoKSB7CiAgICBpZiAoIXRoaXMudmlld19hbGwpCiAgICB7CiAgICAgIHRoaXMuc2luZ2xlX3NsaWRlX3ZpZXcoKTsKICAgICAgdGhpcy5zaG93X3Rvb2xiYXIoKTsKICAgIH0KICAgIGFsZXJ0KCJhZnRlciBwcmludCIpOwogIH0sCgogIC8vICMjIyBPQlNPTEVURSAjIyMKICBwcmludF9zbGlkZXM6IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuYmVmb3JlX3ByaW50KCk7CiAgICB3aW5kb3cucHJpbnQoKTsKICAgIHRoaXMuYWZ0ZXJfcHJpbnQoKTsKICB9LAoKICAvLyAjIyMgT0JTT0xFVEUgPz8gIyMjCiAgdG9nZ2xlX3ZpZXc6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh0aGlzLnZpZXdfYWxsKQogICAgewogICAgICB0aGlzLnNpbmdsZV9zbGlkZV92aWV3KCk7CiAgICAgIHRoaXMuc2hvd190b29sYmFyKCk7CiAgICAgIHRoaXMudmlld19hbGwgPSAwOwogICAgfQogICAgZWxzZQogICAgewogICAgICB0aGlzLnNob3dfYWxsX3NsaWRlcygpOwogICAgICB0aGlzLmhpZGVfdG9vbGJhcigpOwogICAgICB0aGlzLnZpZXdfYWxsID0gMTsKICAgIH0KICB9LAoKICAvLyBwcmVwYXJlIGZvciBwcmludGluZyAgIyMjIE9CU09MRVRFICMjIwogIHNob3dfYWxsX3NsaWRlczogZnVuY3Rpb24gKCkgewogICAgdGhpcy5yZW1vdmVfY2xhc3MoZG9jdW1lbnQuYm9keSwgInNpbmdsZV9zbGlkZSIpOwogICAgdGhpcy5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsKICB9LAoKICAvLyByZXN0b3JlIGFmdGVyIHByaW50aW5nICAjIyMgT0JTT0xFVEUgIyMjCiAgc2luZ2xlX3NsaWRlX3ZpZXc6IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuYWRkX2NsYXNzKGRvY3VtZW50LmJvZHksICJzaW5nbGVfc2xpZGUiKTsKICAgIHRoaXMuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJ2aXNpYmxlIik7CiAgICB0aGlzLmxhc3Rfc2hvd24gPSB0aGlzLnByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW0obnVsbCk7CiAgfSwKCiAgLy8gc3VwcHJlc3MgSUUncyBpbWFnZSB0b29sYmFyIHBvcCB1cAogIGhpZGVfaW1hZ2VfdG9vbGJhcjogZnVuY3Rpb24gKCkgewogICAgaWYgKCF0aGlzLm5zX3BvcykKICAgIHsKICAgICAgdmFyIGltYWdlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJJTUciKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW1hZ2VzLmxlbmd0aDsgKytpKQogICAgICAgIGltYWdlc1tpXS5zZXRBdHRyaWJ1dGUoImdhbGxlcnlpbWciLCAibm8iKTsKICAgIH0KICB9LAoKICB1bmxvYWRlZDogZnVuY3Rpb24gKGUpIHsKICAgIC8vYWxlcnQoInVubG9hZGVkIik7CiAgfSwKCiAgLy8gU2FmYXJpIGFuZCBLb25xdWVyb3IgZG9uJ3QgeWV0IHN1cHBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSgpCiAgLy8gYW5kIHRoZXkgYWx3YXlzIHJlbG9hZCBwYWdlIHdoZW4gbG9jYXRpb24uaHJlZiBpcyB1cGRhdGVkCiAgaXNfS0hUTUw6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7CiAgICByZXR1cm4gKGFnZW50LmluZGV4T2YoIktIVE1MIikgPj0gMCA/IHRydWUgOiBmYWxzZSk7CiAgfSwKCiAgLy8gZmluZCBzbGlkZSBuYW1lIGZyb20gZmlyc3QgaDEgZWxlbWVudAogIC8vIGRlZmF1bHQgdG8gZG9jdW1lbnQgdGl0bGUgKyBzbGlkZSBudW1iZXIKICBzbGlkZV9uYW1lOiBmdW5jdGlvbiAoaW5kZXgpIHsKICAgIHZhciBuYW1lID0gbnVsbDsKICAgIHZhciBzbGlkZSA9IHRoaXMuc2xpZGVzW2luZGV4XTsKCiAgICB2YXIgaGVhZGluZyA9IHRoaXMuZmluZF9oZWFkaW5nKHNsaWRlKTsKCiAgICBpZiAoaGVhZGluZykKICAgICAgbmFtZSA9IHRoaXMuZXh0cmFjdF90ZXh0KGhlYWRpbmcpOwoKICAgIGlmICghbmFtZSkKICAgICAgbmFtZSA9IHRoaXMudGl0bGUgKyAiKCIgKyAoaW5kZXggKyAxKSArICIpIjsKCiAgICBuYW1lLnJlcGxhY2UoL1wmL2csICImYW1wOyIpOwogICAgbmFtZS5yZXBsYWNlKC9cPC9nLCAiJmx0OyIpOwogICAgbmFtZS5yZXBsYWNlKC9cPi9nLCAiJmd0OyIpOwoKICAgIHJldHVybiBuYW1lOwogIH0sCgogIC8vIGZpbmQgZmlyc3QgaDEgZWxlbWVudCBpbiBET00gdHJlZQogIGZpbmRfaGVhZGluZzogZnVuY3Rpb24gKG5vZGUpIHsKICAgIGlmICghbm9kZSB8fCBub2RlLm5vZGVUeXBlICE9IDEpCiAgICAgIHJldHVybiBudWxsOwoKICAgIGlmIChub2RlLm5vZGVOYW1lID09ICJIMSIgfHwgbm9kZS5ub2RlTmFtZSA9PSAiaDEiKQogICAgICByZXR1cm4gbm9kZTsKCiAgICB2YXIgY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7CgogICAgd2hpbGUgKGNoaWxkKQogICAgewogICAgICBub2RlID0gdGhpcy5maW5kX2hlYWRpbmcoY2hpbGQpOwoKICAgICAgaWYgKG5vZGUpCiAgICAgICAgcmV0dXJuIG5vZGU7CgogICAgICBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nOwogICAgfQoKICAgIHJldHVybiBudWxsOwogIH0sCgogIC8vIHJlY3Vyc2l2ZWx5IGV4dHJhY3QgdGV4dCBmcm9tIERPTSB0cmVlCiAgZXh0cmFjdF90ZXh0OiBmdW5jdGlvbiAobm9kZSkgewogICAgaWYgKCFub2RlKQogICAgICByZXR1cm4gIiI7CgogICAgLy8gdGV4dCBub2RlcwogICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMykKICAgICAgcmV0dXJuIG5vZGUubm9kZVZhbHVlOwoKICAgIC8vIGVsZW1lbnRzCiAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKQogICAgewogICAgICBub2RlID0gbm9kZS5maXJzdENoaWxkOwogICAgICB2YXIgdGV4dCA9ICIiOwoKICAgICAgd2hpbGUgKG5vZGUpCiAgICAgIHsKICAgICAgICB0ZXh0ID0gdGV4dCArIHRoaXMuZXh0cmFjdF90ZXh0KG5vZGUpOwogICAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nOwogICAgICB9CgogICAgICByZXR1cm4gdGV4dDsKICAgIH0KCiAgICByZXR1cm4gIiI7CiAgfSwKCiAgLy8gZmluZCBjb3B5cmlnaHQgdGV4dCBmcm9tIG1ldGEgZWxlbWVudAogIGZpbmRfY29weXJpZ2h0OiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgbmFtZSwgY29udGVudDsKICAgIHZhciBtZXRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIm1ldGEiKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1ldGEubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIG5hbWUgPSBtZXRhW2ldLmdldEF0dHJpYnV0ZSgibmFtZSIpOwogICAgICBjb250ZW50ID0gbWV0YVtpXS5nZXRBdHRyaWJ1dGUoImNvbnRlbnQiKTsKCiAgICAgIGlmIChuYW1lID09ICJjb3B5cmlnaHQiKQogICAgICAgIHJldHVybiBjb250ZW50OwogICAgfQoKICAgIHJldHVybiBudWxsOwogIH0sCgogIGZpbmRfc2l6ZV9hZGp1c3Q6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBuYW1lLCBjb250ZW50LCBvZmZzZXQ7CiAgICB2YXIgbWV0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJtZXRhIik7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhLmxlbmd0aDsgKytpKQogICAgewogICAgICBuYW1lID0gbWV0YVtpXS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTsKICAgICAgY29udGVudCA9IG1ldGFbaV0uZ2V0QXR0cmlidXRlKCJjb250ZW50Iik7CgogICAgICBpZiAobmFtZSA9PSAiZm9udC1zaXplLWFkanVzdG1lbnQiKQogICAgICAgIHJldHVybiAxICogY29udGVudDsKICAgIH0KCiAgICByZXR1cm4gMTsKICB9LAoKICAvLyA8bWV0YSBuYW1lPSJkdXJhdGlvbiIgY29udGVudD0iMjAiIC8+ICBmb3IgMjAgbWludXRlcwogIGZpbmRfZHVyYXRpb246IGZ1bmN0aW9uICgpIHsKICAgIHZhciBuYW1lLCBjb250ZW50LCBvZmZzZXQ7CiAgICB2YXIgbWV0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJtZXRhIik7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhLmxlbmd0aDsgKytpKQogICAgewogICAgICBuYW1lID0gbWV0YVtpXS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTsKICAgICAgY29udGVudCA9IG1ldGFbaV0uZ2V0QXR0cmlidXRlKCJjb250ZW50Iik7CgogICAgICBpZiAobmFtZSA9PSAiZHVyYXRpb24iKQogICAgICAgIHJldHVybiA2MDAwMCAqIGNvbnRlbnQ7CiAgICB9CgogICAgcmV0dXJuIG51bGw7CiAgfSwKCiAgcmVwbGFjZV9ieV9ub25fYnJlYWtpbmdfc3BhY2U6IGZ1bmN0aW9uIChzdHIpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKQogICAgICBzdHJbaV0gPSAxNjA7CiAgfSwKCiAgLy8gIyMjIENIRUNLIE1FICMjIyBpcyB1c2Ugb2YgImxpIiBva2F5IGZvciB0ZXh0L2h0bWw/CiAgLy8gZm9yIFhIVE1MIGRvIHdlIGFsc28gbmVlZCB0byBzcGVjaWZ5IG5hbWVzcGFjZT8KICBpbml0X291dGxpbmVyOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgaXRlbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGkiKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgKytpKQogICAgewogICAgICB2YXIgdGFyZ2V0ID0gaXRlbXNbaV07CgogICAgICBpZiAoIXRoaXMuaGFzX2NsYXNzKHRhcmdldC5wYXJlbnROb2RlLCAib3V0bGluZSIpKQogICAgICAgIGNvbnRpbnVlOwoKICAgICAgdGFyZ2V0Lm9uY2xpY2sgPSB0aGlzLm91dGxpbmVfY2xpY2s7Ci8qICMjIyBtb3JlIHdvcmsgbmVlZGVkIGZvciBJRTYKICAgICAgaWYgKCF0aGlzLm5zX3BvcykKICAgICAgewogICAgICAgIHRhcmdldC5vbm1vdXNlb3ZlciA9IHRoaXMuaG92ZXJfb3V0bGluZTsKICAgICAgICB0YXJnZXQub25tb3VzZW91dCA9IHRoaXMudW5ob3Zlcl9vdXRsaW5lOwogICAgICB9CiovCiAgICAgIGlmICh0aGlzLmZvbGRhYmxlKHRhcmdldCkpCiAgICAgIHsKICAgICAgICB0YXJnZXQuZm9sZGFibGUgPSB0cnVlOwogICAgICAgIHRhcmdldC5vbmZvY3VzID0gZnVuY3Rpb24gKCkge3czY19zbGlkeS5vdXRsaW5lID0gdGhpczt9OwogICAgICAgIHRhcmdldC5vbmJsdXIgPSBmdW5jdGlvbiAoKSB7dzNjX3NsaWR5Lm91dGxpbmUgPSBudWxsO307CgogICAgICAgIGlmICghdGFyZ2V0LmdldEF0dHJpYnV0ZSgidGFiaW5kZXgiKSkKICAgICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IiwgIjAiKTsKCiAgICAgICAgaWYgKHRoaXMuaGFzX2NsYXNzKHRhcmdldCwgImV4cGFuZCIpKQogICAgICAgICAgdGhpcy51bmZvbGQodGFyZ2V0KTsKICAgICAgICBlbHNlCiAgICAgICAgICB0aGlzLmZvbGQodGFyZ2V0KTsKICAgICAgfQogICAgICBlbHNlCiAgICAgIHsKICAgICAgICB0aGlzLmFkZF9jbGFzcyh0YXJnZXQsICJub2ZvbGQiKTsKICAgICAgICB0YXJnZXQudmlzaWJsZSA9IHRydWU7CiAgICAgICAgdGFyZ2V0LmZvbGRhYmxlID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LAoKICBmb2xkYWJsZTogZnVuY3Rpb24gKGl0ZW0pIHsKICAgIGlmICghaXRlbSB8fCBpdGVtLm5vZGVUeXBlICE9IDEpCiAgICAgIHJldHVybiBmYWxzZTsKCiAgICB2YXIgbm9kZSA9IGl0ZW0uZmlyc3RDaGlsZDsKCiAgICB3aGlsZSAobm9kZSkKICAgIHsKICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSAmJiB0aGlzLmlzX2Jsb2NrKG5vZGUpKQogICAgICAgIHJldHVybiB0cnVlOwoKICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0sCgogIC8vICMjIyBDSEVDSyBNRSAjIyMgc3dpdGNoIHRvIGFkZC9yZW1vdmUgImhpZGRlbiIgY2xhc3MKICBmb2xkOiBmdW5jdGlvbiAoaXRlbSkgewogICAgaWYgKGl0ZW0pCiAgICB7CiAgICAgIHRoaXMucmVtb3ZlX2NsYXNzKGl0ZW0sICJ1bmZvbGRlZCIpOwogICAgICB0aGlzLmFkZF9jbGFzcyhpdGVtLCAiZm9sZGVkIik7CiAgICB9CgogICAgdmFyIG5vZGUgPSBpdGVtID8gaXRlbS5maXJzdENoaWxkIDogbnVsbDsKCiAgICB3aGlsZSAobm9kZSkKICAgIHsKICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSAmJiB0aGlzLmlzX2Jsb2NrKG5vZGUpKSAvLyBlbGVtZW50CiAgICAgIHsKICAgICAgICAgdzNjX3NsaWR5LmFkZF9jbGFzcyhub2RlLCAiaGlkZGVuIik7CiAgICAgIH0KCiAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nOwogICAgfQoKICAgIGl0ZW0udmlzaWJsZSA9IGZhbHNlOwogIH0sCgogIC8vICMjIyBDSEVDSyBNRSAjIyMgc3dpdGNoIHRvIGFkZC9yZW1vdmUgImhpZGRlbiIgY2xhc3MKICB1bmZvbGQ6IGZ1bmN0aW9uIChpdGVtKSB7CiAgICBpZiAoaXRlbSkKICAgIHsKICAgICAgdGhpcy5hZGRfY2xhc3MoaXRlbSwgInVuZm9sZGVkIik7CiAgICAgIHRoaXMucmVtb3ZlX2NsYXNzKGl0ZW0sICJmb2xkZWQiKTsKICAgIH0KCiAgICB2YXIgbm9kZSA9IGl0ZW0gPyBpdGVtLmZpcnN0Q2hpbGQgOiBudWxsOwoKICAgIHdoaWxlIChub2RlKQogICAgewogICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxICYmIHRoaXMuaXNfYmxvY2sobm9kZSkpIC8vIGVsZW1lbnQKICAgICAgewogICAgICAgIHczY19zbGlkeS5yZW1vdmVfY2xhc3Mobm9kZSwgImhpZGRlbiIpOwogICAgICB9CgogICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZzsKICAgIH0KCiAgICBpdGVtLnZpc2libGUgPSB0cnVlOwogIH0sCgogIG91dGxpbmVfY2xpY2s6IGZ1bmN0aW9uIChlKSB7CiAgICBpZiAoIWUpCiAgICAgIGUgPSB3aW5kb3cuZXZlbnQ7CgogICAgdmFyIHJpZ2h0Y2xpY2sgPSBmYWxzZTsKICAgIHZhciB0YXJnZXQgPSB3M2Nfc2xpZHkuZ2V0X3RhcmdldChlKTsKCiAgICB3aGlsZSAodGFyZ2V0ICYmIHRhcmdldC52aXNpYmxlID09IHVuZGVmaW5lZCkKICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7CgogICAgaWYgKCF0YXJnZXQpCiAgICAgIHJldHVybiB0cnVlOwoKICAgIGlmIChlLndoaWNoKQogICAgICByaWdodGNsaWNrID0gKGUud2hpY2ggPT0gMyk7CiAgICBlbHNlIGlmIChlLmJ1dHRvbikKICAgICAgcmlnaHRjbGljayA9IChlLmJ1dHRvbiA9PSAyKTsKCiAgICBpZiAoIXJpZ2h0Y2xpY2sgJiYgdGFyZ2V0LnZpc2libGUgIT0gdW5kZWZpbmVkKQogICAgewogICAgICBpZiAodGFyZ2V0LmZvbGRhYmxlKQogICAgICB7CiAgICAgICAgaWYgKHRhcmdldC52aXNpYmxlKQogICAgICAgICAgdzNjX3NsaWR5LmZvbGQodGFyZ2V0KTsKICAgICAgICBlbHNlCiAgICAgICAgICB3M2Nfc2xpZHkudW5mb2xkKHRhcmdldCk7CiAgICAgIH0KCiAgICAgIHczY19zbGlkeS5zdG9wX3Byb3BhZ2F0aW9uKGUpOwogICAgICBlLmNhbmNlbCA9IHRydWU7CiAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfSwKCiAgYWRkX2luaXRpYWxfcHJvbXB0OiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgcHJvbXB0ID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiZGl2Iik7CiAgICBwcm9tcHQuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJpbml0aWFsX3Byb21wdCIpOwoKICAgIHZhciBwMSA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoInAiKTsKICAgIHByb21wdC5hcHBlbmRDaGlsZChwMSk7CiAgICBwMS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImhlbHAiKTsKCiAgICBpZiAodGhpcy5rZXlib2FyZGxlc3MpCiAgICAgIHAxLmlubmVySFRNTCA9ICJzd2lwZSBsZWZ0IHRvIG1vdmUgdG8gbmV4dCBzbGlkZSI7CiAgICBlbHNlCiAgICAgIHAxLmlubmVySFRNTCA9ICJTcGFjZSwgUmlnaHQgQXJyb3cgb3Igc3dpcGUgbGVmdCB0byBtb3ZlIHRvICIgKwogICAgICAgICAgICAgICAgICAgICAibmV4dCBzbGlkZSwgY2xpY2sgaGVscCBiZWxvdyBmb3IgbW9yZSBkZXRhaWxzIjsKCiAgICB0aGlzLmFkZF9saXN0ZW5lcihwcm9tcHQsICJjbGljayIsIGZ1bmN0aW9uIChlKSB7CiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQocHJvbXB0KTsKICAgICAgdzNjX3NsaWR5LnN0b3BfcHJvcGFnYXRpb24oZSk7CiAgICAKICAgICAgaWYgKGUuY2FuY2VsICE9IHVuZGVmaW5lZCkKICAgICAgICBlLmNhbmNlbCA9IHRydWU7CiAgICAgIAogICAgICBpZiAoZS5yZXR1cm5WYWx1ZSAhPSB1bmRlZmluZWQpCiAgICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOwogICAgICAKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSk7CgogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwcm9tcHQpOwogICAgdGhpcy5pbml0aWFsX3Byb21wdCA9IHByb21wdDsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChwcm9tcHQpO30sIDUwMDApOwogIH0sCgogIGFkZF90b29sYmFyOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgY291bnRlciwgcGFnZTsKCiAgICAgdGhpcy50b29sYmFyID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiZGl2Iik7CiAgICAgdGhpcy50b29sYmFyLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAidG9vbGJhciIpOwoKICAgICAvLyBhIHJlYXNvbmFibHkgYmVoYXZlZCBicm93c2VyCiAgICAgaWYgKHRoaXMubnNfcG9zIHx8ICF0aGlzLmllNikKICAgICB7CiAgICAgICB2YXIgcmlnaHQgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJkaXYiKTsKICAgICAgIHJpZ2h0LnNldEF0dHJpYnV0ZSgic3R5bGUiLCAiZmxvYXQ6IHJpZ2h0OyB0ZXh0LWFsaWduOiByaWdodCIpOwoKICAgICAgIGNvdW50ZXIgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIikKICAgICAgIGNvdW50ZXIuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgic2xpZGUiKSArICIgbi9tIjsKICAgICAgIHJpZ2h0LmFwcGVuZENoaWxkKGNvdW50ZXIpOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKHJpZ2h0KTsKCiAgICAgICB2YXIgbGVmdCA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImRpdiIpOwogICAgICAgbGVmdC5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgInRleHQtYWxpZ246IGxlZnQiKTsKCiAgICAgICAvLyBnbG9iYWwgZW5kIG9mIHNsaWRlIGluZGljYXRvcgogICAgICAgdGhpcy5lb3MgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIik7CiAgICAgICB0aGlzLmVvcy5pbm5lckhUTUwgPSAiKiAiOwogICAgICAgbGVmdC5hcHBlbmRDaGlsZCh0aGlzLmVvcyk7CgogICAgICAgdmFyIGhlbHAgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJhIik7CiAgICAgICBoZWxwLnNldEF0dHJpYnV0ZSgiaHJlZiIsIHRoaXMuaGVscF9wYWdlKTsKICAgICAgIGhlbHAuc2V0QXR0cmlidXRlKCJ0aXRsZSIsIHRoaXMubG9jYWxpemUodGhpcy5oZWxwX3RleHQpKTsKICAgICAgIGhlbHAuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgiaGVscD8iKTsKICAgICAgIGxlZnQuYXBwZW5kQ2hpbGQoaGVscCk7CiAgICAgICBoZWxwLnN0eWxlLmRpc3BsYXk9Im5vbmUiOyAKICAgICAgIHRoaXMuaGVscF9hbmNob3IgPSBoZWxwOyAgLy8gc2F2ZSBmb3IgZm9jdXMgaGFjawoKICAgICAgIHZhciBnYXAxID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiAiKTsKICAgICAgIGxlZnQuYXBwZW5kQ2hpbGQoZ2FwMSk7CgogICAgICAgdmFyIGNvbnRlbnRzID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiYSIpOwogICAgICAgY29udGVudHMuc2V0QXR0cmlidXRlKCJocmVmIiwgImphdmFzY3JpcHQ6dzNjX3NsaWR5LnRvZ2dsZV90YWJsZV9vZl9jb250ZW50cygpIik7CiAgICAgICBjb250ZW50cy5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgdGhpcy5sb2NhbGl6ZSgidGFibGUgb2YgY29udGVudHMiKSk7CiAgICAgICBjb250ZW50cy5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCJDb250ZW50cyIpOwogICAgICAgbGVmdC5hcHBlbmRDaGlsZChjb250ZW50cyk7CgogICAgICAgdmFyIGdhcDIgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiICIpOwogICAgICAgbGVmdC5hcHBlbmRDaGlsZChnYXAyKTsKCiAgICAgICB2YXIgY29weXJpZ2h0ID0gdGhpcy5maW5kX2NvcHlyaWdodCgpOwoKICAgICAgIGlmIChjb3B5cmlnaHQpCiAgICAgICB7CiAgICAgICAgIHZhciBzcGFuID0gdGhpcy5jcmVhdGVfZWxlbWVudCgic3BhbiIpOwogICAgICAgICBzcGFuLmNsYXNzTmFtZSA9ICJjb3B5cmlnaHQiOwogICAgICAgICBzcGFuLmlubmVySFRNTCA9IGNvcHlyaWdodDsKICAgICAgICAgbGVmdC5hcHBlbmRDaGlsZChzcGFuKTsKICAgICAgIH0KCiAgICAgICB0aGlzLnRvb2xiYXIuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsICIwIik7CiAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQobGVmdCk7CiAgICAgfQogICAgIGVsc2UgLy8gSUU2IHNvIG5lZWQgdG8gd29yayBhcm91bmQgaXRzIHBvb3IgQ1NTIHN1cHBvcnQKICAgICB7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUucG9zaXRpb24gPSAodGhpcy5pZTcgPyAiZml4ZWQiIDogImFic29sdXRlIik7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUuekluZGV4ID0gIjIwMCI7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUud2lkdGggPSAiOTkuOSUiOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmhlaWdodCA9ICIxLjJlbSI7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUudG9wID0gImF1dG8iOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmJvdHRvbSA9ICIwIjsKICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5sZWZ0ID0gIjAiOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLnJpZ2h0ID0gIjAiOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLnRleHRBbGlnbiA9ICJsZWZ0IjsKICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5mb250U2l6ZSA9ICI2MCUiOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmNvbG9yID0gInJlZCI7CiAgICAgICB0aGlzLnRvb2xiYXIuYm9yZGVyV2lkdGggPSAwOwogICAgICAgdGhpcy50b29sYmFyLmNsYXNzTmFtZSA9ICJ0b29sYmFyIjsKICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5iYWNrZ3JvdW5kID0gInJnYigyNDAsMjQwLDI0MCkiOwoKICAgICAgIC8vIHdvdWxkIGxpa2UgdG8gaGF2ZSBoZWxwIHRleHQgbGVmdCBhbGlnbmVkCiAgICAgICAvLyBhbmQgcGFnZSBjb3VudGVyIHJpZ2h0IGFsaWduZWQsIGZsb2F0aW5nCiAgICAgICAvLyBkaXYncyBkb24ndCB3b3JrLCBzbyBpbnN0ZWFkIHVzZSBuZXN0ZWQKICAgICAgIC8vIGFic29sdXRlbHkgcG9zaXRpb25lZCBkaXYncy4KCiAgICAgICB2YXIgc3AgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIik7CiAgICAgICBzcC5pbm5lckhUTUwgPSAiJm5ic3A7Jm5ic3A7KiZuYnNwOyI7CiAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQoc3ApOwogICAgICAgdGhpcy5lb3MgPSBzcDsgIC8vIGVuZCBvZiBzbGlkZSBpbmRpY2F0b3IKCiAgICAgICB2YXIgaGVscCA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImEiKTsKICAgICAgIGhlbHAuc2V0QXR0cmlidXRlKCJocmVmIiwgdGhpcy5oZWxwX3BhZ2UpOwogICAgICAgaGVscC5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgdGhpcy5sb2NhbGl6ZSh0aGlzLmhlbHBfdGV4dCkpOwogICAgICAgaGVscC5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCJoZWxwPyIpOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKGhlbHApOwogICAgICAgdGhpcy5oZWxwX2FuY2hvciA9IGhlbHA7ICAvLyBzYXZlIGZvciBmb2N1cyBoYWNrCgogICAgICAgdmFyIGdhcDEgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiICIpOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKGdhcDEpOwoKICAgICAgIHZhciBjb250ZW50cyA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImEiKTsKICAgICAgIGNvbnRlbnRzLnNldEF0dHJpYnV0ZSgiaHJlZiIsICJqYXZhc2NyaXB0OnRvZ2dsZVRhYmxlT2ZDb250ZW50cygpIik7CiAgICAgICBjb250ZW50cy5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgdGhpcy5sb2NhbGl6ZSgidGFibGUgb2YgY29udGVudHMiLmxvY2FsaXplKSk7CiAgICAgICBjb250ZW50cy5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCJjb250ZW50cz8iKTsKICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChjb250ZW50cyk7CgogICAgICAgdmFyIGdhcDIgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiICIpOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKGdhcDIpOwoKICAgICAgIHZhciBjb3B5cmlnaHQgPSB0aGlzLmZpbmRfY29weXJpZ2h0KCk7CgogICAgICAgaWYgKGNvcHlyaWdodCkKICAgICAgIHsKICAgICAgICAgdmFyIHNwYW4gPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIik7CiAgICAgICAgIHNwYW4uaW5uZXJIVE1MID0gY29weXJpZ2h0OwogICAgICAgICBzcGFuLnN0eWxlLmNvbG9yID0gImJsYWNrIjsKICAgICAgICAgc3Bhbi5zdHlsZS5tYXJnaW5MZWZ0ID0gIjAuNWVtIjsKICAgICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKHNwYW4pOwogICAgICAgfQoKICAgICAgIGNvdW50ZXIgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJkaXYiKQogICAgICAgY291bnRlci5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CiAgICAgICBjb3VudGVyLnN0eWxlLndpZHRoID0gImF1dG8iOyAvLyIyMCUiOwogICAgICAgY291bnRlci5zdHlsZS5oZWlnaHQgPSAiMS4yZW0iOwogICAgICAgY291bnRlci5zdHlsZS50b3AgPSAiYXV0byI7CiAgICAgICBjb3VudGVyLnN0eWxlLmJvdHRvbSA9IDA7CiAgICAgICBjb3VudGVyLnN0eWxlLnJpZ2h0ID0gIjAiOwogICAgICAgY291bnRlci5zdHlsZS50ZXh0QWxpZ24gPSAicmlnaHQiOwogICAgICAgY291bnRlci5zdHlsZS5jb2xvciA9ICJyZWQiOwogICAgICAgY291bnRlci5zdHlsZS5iYWNrZ3JvdW5kID0gInJnYigyNDAsMjQwLDI0MCkiOwoKICAgICAgIGNvdW50ZXIuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgic2xpZGUiKSArICIgbi9tIjsKICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChjb3VudGVyKTsKICAgICB9CgogICAgIC8vIGVuc3VyZSB0aGF0IGNsaWNrIGlzbid0IHBhc3NlZCB0aHJvdWdoIHRvIHRoZSBwYWdlCiAgICAgdGhpcy50b29sYmFyLm9uY2xpY2sgPQogICAgICAgICBmdW5jdGlvbiAoZSkgewogICAgICAgICAgIGlmICghZSkKICAgICAgICAgICAgIGUgPSB3aW5kb3cuZXZlbnQ7CgogICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDsKCiAgICAgICAgICAgaWYgKCF0YXJnZXQgJiYgZS5zcmNFbGVtZW50KQogICAgICAgICAgICAgdGFyZ2V0ID0gZS5zcmNFbGVtZW50OwoKICAgICAgICAgICAvLyB3b3JrIGFyb3VuZCBTYWZhcmkgYnVnCiAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQubm9kZVR5cGUgPT0gMykKICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlOwoKICAgICAgICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihlKTsKCiAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPSAiYSIpCiAgICAgICAgICAgICB3M2Nfc2xpZHkubW91c2VfYnV0dG9uX2NsaWNrKGUpOwogICAgICAgICB9OwoKICAgICB0aGlzLnNsaWRlX251bWJlcl9lbGVtZW50ID0gY291bnRlcjsKICAgICB0aGlzLnNldF9lb3Nfc3RhdHVzKGZhbHNlKTsKICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMudG9vbGJhcik7CiAgfSwKCiAgLy8gd3lzaXd5ZyBlZGl0b3JzIG1ha2UgaXQgaGFyZCB0byB1c2UgZGl2IGVsZW1lbnRzCiAgLy8gZS5nLiBhbWF5YSBsb3NlcyB0aGUgZGl2IHdoZW4geW91IGNvcHkgYW5kIHBhc3RlCiAgLy8gdGhpcyBmdW5jdGlvbiB3cmFwcyBkaXYgZWxlbWVudHMgYXJvdW5kIGltcGxpY2l0CiAgLy8gc2xpZGVzIHdoaWNoIHN0YXJ0IHdpdGggYW4gaDEgZWxlbWVudCBhbmQgY29udGludWUKICAvLyB1cCB0byB0aGUgbmV4dCBoZWFkaW5nIG9yIGRpdiBlbGVtZW50CiAgd3JhcF9pbXBsaWNpdF9zbGlkZXM6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBpLCBoZWFkaW5nLCBub2RlLCBuZXh0LCBkaXY7CiAgICB2YXIgaGVhZGluZ3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaDEiKTsKCiAgICBpZiAoIWhlYWRpbmdzKQogICAgICByZXR1cm47CgogICAgZm9yIChpID0gMDsgaSA8IGhlYWRpbmdzLmxlbmd0aDsgKytpKQogICAgewogICAgICBoZWFkaW5nID0gaGVhZGluZ3NbaV07CgogICAgICBpZiAoaGVhZGluZy5wYXJlbnROb2RlICE9IGRvY3VtZW50LmJvZHkpCiAgICAgICAgY29udGludWU7CgogICAgICBub2RlID0gaGVhZGluZy5uZXh0U2libGluZzsKCiAgICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICB0aGlzLmFkZF9jbGFzcyhkaXYsICJzbGlkZSIpOwogICAgICBkb2N1bWVudC5ib2R5LnJlcGxhY2VDaGlsZChkaXYsIGhlYWRpbmcpOwogICAgICBkaXYuYXBwZW5kQ2hpbGQoaGVhZGluZyk7CgogICAgICB3aGlsZSAobm9kZSkKICAgICAgewogICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpIC8vIGFuIGVsZW1lbnQKICAgICAgICB7CiAgICAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT0gIkgxIiB8fCBub2RlLm5vZGVOYW1lID09ICJoMSIpCiAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT0gIkRJViIgfHwgbm9kZS5ub2RlTmFtZSA9PSAiZGl2IikKICAgICAgICAgICB7CiAgICAgICAgICAgICBpZiAodGhpcy5oYXNfY2xhc3Mobm9kZSwgInNsaWRlIikpCiAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgIGlmICh0aGlzLmhhc19jbGFzcyhub2RlLCAiaGFuZG91dCIpKQogICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBuZXh0ID0gbm9kZS5uZXh0U2libGluZzsKICAgICAgICBub2RlID0gZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChub2RlKTsKICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobm9kZSk7CiAgICAgICAgbm9kZSA9IG5leHQ7CiAgICAgIH0gCiAgICB9CiAgfSwKCiAgYXR0YWNoX3RvdWNoX2hhbmRlcnM6IGZ1bmN0aW9uKHNsaWRlcykKICB7CiAgICB2YXIgaSwgc2xpZGU7CgogICAgZm9yIChpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7ICsraSkKICAgIHsKICAgICAgc2xpZGUgPSBzbGlkZXNbaV07CiAgICAgIHRoaXMuYWRkX2xpc3RlbmVyKHNsaWRlLCAidG91Y2hzdGFydCIsIHRoaXMudG91Y2hzdGFydCk7CiAgICAgIHRoaXMuYWRkX2xpc3RlbmVyKHNsaWRlLCAidG91Y2htb3ZlIiwgdGhpcy50b3VjaG1vdmUpOwogICAgICB0aGlzLmFkZF9saXN0ZW5lcihzbGlkZSwgInRvdWNoZW5kIiwgdGhpcy50b3VjaGVuZCk7CiAgICB9CiAgfSwKCi8vIHJldHVybiBuZXcgYXJyYXkgb2YgYWxsIHNsaWRlcwogIGNvbGxlY3Rfc2xpZGVzOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2xpZGVzID0gbmV3IEFycmF5KCk7CiAgICB2YXIgZGl2cyA9IGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRpdiIpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGl2cy5sZW5ndGg7ICsraSkKICAgIHsKICAgICAgZGl2ID0gZGl2cy5pdGVtKGkpOwoKICAgICAgaWYgKHRoaXMuaGFzX2NsYXNzKGRpdiwgInNsaWRlIikpCiAgICAgIHsKICAgICAgICAvLyBhZGQgc2xpZGUgdG8gY29sbGVjdGlvbgogICAgICAgIHNsaWRlc1tzbGlkZXMubGVuZ3RoXSA9IGRpdjsKCiAgICAgICAgLy8gaGlkZSBlYWNoIHNsaWRlIGFzIGl0IGlzIGZvdW5kCiAgICAgICAgdGhpcy5hZGRfY2xhc3MoZGl2LCAiaGlkZGVuIik7CgogICAgICAgIC8vIGFkZCBkdW1teSA8YnIvPiBhdCBlbmQgZm9yIHNjcm9sbGluZyBoYWNrCiAgICAgICAgdmFyIG5vZGUxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnIiKTsKICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobm9kZTEpOwogICAgICAgIHZhciBub2RlMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJyIik7CiAgICAgICAgZGl2LmFwcGVuZENoaWxkKG5vZGUyKTsKICAgICAgfQogICAgICBlbHNlIGlmICh0aGlzLmhhc19jbGFzcyhkaXYsICJiYWNrZ3JvdW5kIikpCiAgICAgIHsgIC8vIHdvcmsgYXJvdW5kIGZvciBGaXJlZm94IFNWRyByZWxvYWQgYnVnCiAgICAgICAgLy8gd2hpY2ggb3RoZXJ3aXNlIHJlcGxhY2VzIDFzdCBTVkcgZ3JhcGhpYyB3aXRoIDJuZAogICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgfQogICAgfQoKICAgIHRoaXMuc2xpZGVzID0gc2xpZGVzOwogIH0sCgogIC8vIHJldHVybiBuZXcgYXJyYXkgb2YgYWxsIDxkaXYgY2xhc3M9ImhhbmRvdXQiPgogIGNvbGxlY3Rfbm90ZXM6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBub3RlcyA9IG5ldyBBcnJheSgpOwogICAgdmFyIGRpdnMgPSBkb2N1bWVudC5ib2R5LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkaXYiKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpdnMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIGRpdiA9IGRpdnMuaXRlbShpKTsKCiAgICAgIGlmICh0aGlzLmhhc19jbGFzcyhkaXYsICJoYW5kb3V0IikpCiAgICAgIHsKICAgICAgICAvLyBhZGQgbm90ZSB0byBjb2xsZWN0aW9uCiAgICAgICAgbm90ZXNbbm90ZXMubGVuZ3RoXSA9IGRpdjsKCiAgICAgICAgLy8gYW5kIGhpZGUgaXQKICAgICAgICB0aGlzLmFkZF9jbGFzcyhkaXYsICJoaWRkZW4iKTsKICAgICAgfQogICAgfQoKICAgIHRoaXMubm90ZXMgPSBub3RlczsKICB9LAoKICAvLyByZXR1cm4gbmV3IGFycmF5IG9mIGFsbCA8ZGl2IGNsYXNzPSJiYWNrZ3JvdW5kIj4KICAvLyBpbmNsdWRpbmcgbmFtZWQgYmFja2dyb3VuZHMgZS5nLiBjbGFzcz0iYmFja2dyb3VuZCB0aXRsZXBhZ2UiCiAgY29sbGVjdF9iYWNrZ3JvdW5kczogZnVuY3Rpb24gKCkgewogICAgdmFyIGJhY2tncm91bmRzID0gbmV3IEFycmF5KCk7CiAgICB2YXIgZGl2cyA9IGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRpdiIpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGl2cy5sZW5ndGg7ICsraSkKICAgIHsKICAgICAgZGl2ID0gZGl2cy5pdGVtKGkpOwoKICAgICAgaWYgKHRoaXMuaGFzX2NsYXNzKGRpdiwgImJhY2tncm91bmQiKSkKICAgICAgewogICAgICAgIC8vIGFkZCBiYWNrZ3JvdW5kIHRvIGNvbGxlY3Rpb24KICAgICAgICBiYWNrZ3JvdW5kc1tiYWNrZ3JvdW5kcy5sZW5ndGhdID0gZGl2OwoKICAgICAgICAvLyBhbmQgaGlkZSBpdAogICAgICAgIHRoaXMuYWRkX2NsYXNzKGRpdiwgImhpZGRlbiIpOwogICAgICB9CiAgICB9CgogICAgdGhpcy5iYWNrZ3JvdW5kcyA9IGJhY2tncm91bmRzOwogIH0sCgogIC8vIHNldCBjbGljayBoYW5kbGVycyBvbiBhbGwgYW5jaG9ycwogIHBhdGNoX2FuY2hvcnM6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdzNjX3NsaWR5OwogICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgLy8gY29tcGFyZSB0aGlzLmhyZWYgd2l0aCBsb2NhdGlvbi5ocmVmCiAgICAgIC8vIGZvciBsaW5rIHRvIGFub3RoZXIgc2xpZGUgaW4gdGhpcyBkb2MKCiAgICAgIGlmIChzZWxmLnBhZ2VfYWRkcmVzcyh0aGlzLmhyZWYpID09IHNlbGYucGFnZV9hZGRyZXNzKGxvY2F0aW9uLmhyZWYpKQogICAgICB7CiAgICAgICAgLy8geWVzLCBzbyBmaW5kIG5ldyBzbGlkZSBudW1iZXIKICAgICAgICB2YXIgbmV3c2xpZGVudW0gPSBzZWxmLmZpbmRfc2xpZGVfbnVtYmVyKHRoaXMuaHJlZik7CgogICAgICAgIGlmIChuZXdzbGlkZW51bSAhPSBzZWxmLnNsaWRlX251bWJlcikKICAgICAgICB7CiAgICAgICAgICB2YXIgc2xpZGUgPSBzZWxmLnNsaWRlc1tzZWxmLnNsaWRlX251bWJlcl07CiAgICAgICAgICBzZWxmLmhpZGVfc2xpZGUoc2xpZGUpOwogICAgICAgICAgc2VsZi5zbGlkZV9udW1iZXIgPSBuZXdzbGlkZW51bTsKICAgICAgICAgIHNsaWRlID0gc2VsZi5zbGlkZXNbc2VsZi5zbGlkZV9udW1iZXJdOwogICAgICAgICAgc2VsZi5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgICAgIHNlbGYuc2V0X2xvY2F0aW9uKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGVsc2UKICAgICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihldmVudCk7CgovLyAgICAgIGVsc2UgaWYgKHRoaXMudGFyZ2V0ID09IG51bGwpCi8vICAgICAgICBsb2NhdGlvbi5ocmVmID0gdGhpcy5ocmVmOwoKICAgICAgdGhpcy5ibHVyKCk7CiAgICAgIHNlbGYuZGlzYWJsZV9zbGlkZV9jbGljayA9IHRydWU7CiAgICB9OwoKICAgIHZhciBhbmNob3JzID0gZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5jaG9ycy5sZW5ndGg7ICsraSkKICAgIHsKICAgICAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKQogICAgICAgIGFuY2hvcnNbaV0uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBoYW5kbGVyLCBmYWxzZSk7CiAgICAgIGVsc2UKICAgICAgICBhbmNob3JzW2ldLmF0dGFjaEV2ZW50KCJvbmNsaWNrIiwgaGFuZGxlcik7CiAgICB9CiAgfSwKCiAgLy8gIyMjIENIRUNLIE1FICMjIyBzZWUgd2hpY2ggZnVuY3Rpb25zIGFyZSBpbnZva2VkIHZpYSBzZXRUaW1lb3V0CiAgLy8gZWl0aGVyIGRpcmVjdGx5IG9yIGluZGlyZWN0bHkgZm9yIHVzZSBvZiB3M2Nfc2xpZHkgdnMgdGhpcwogIHNob3dfc2xpZGVfbnVtYmVyOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdGltZXIgPSB3M2Nfc2xpZHkuZ2V0X3RpbWVyKCk7CiAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyX2VsZW1lbnQuaW5uZXJIVE1MID0gdGltZXIgKyB3M2Nfc2xpZHkubG9jYWxpemUoInNsaWRlIikgKyAiICIgKwogICAgICAgICAgICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyICsgMSkgKyAiLyIgKyB3M2Nfc2xpZHkuc2xpZGVzLmxlbmd0aDsKICB9LAoKICAvLyBldmVyeSAyMDBtUyBjaGVjayBpZiB0aGUgbG9jYXRpb24gaGFzIGJlZW4gY2hhbmdlZCBhcyBhCiAgLy8gcmVzdWx0IG9mIHRoZSB1c2VyIGFjdGl2YXRpbmcgdGhlIEJhY2sgYnV0dG9uL21lbnUgaXRlbQogIC8vIGRvZXNuJ3Qgd29yayBmb3IgT3BlcmEgPCA5LjUKICBjaGVja19sb2NhdGlvbjogZnVuY3Rpb24gKCkgewogICAgdmFyIGhhc2ggPSBsb2NhdGlvbi5oYXNoOwoKICAgIGlmICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID4gMCAmJiAoaGFzaCA9PSAiIiB8fCBoYXNoID09ICIjIikpCiAgICAgIHczY19zbGlkeS5nb3RvX3NsaWRlKDApOwogICAgZWxzZSBpZiAoaGFzaC5sZW5ndGggPiAyICYmIGhhc2ggIT0gIiMoIisodzNjX3NsaWR5LnNsaWRlX251bWJlcisxKSsiKSIpCiAgICB7CiAgICAgIHZhciBudW0gPSBwYXJzZUludChsb2NhdGlvbi5oYXNoLnN1YnN0cigyKSk7CgogICAgICBpZiAoIWlzTmFOKG51bSkpCiAgICAgICAgdzNjX3NsaWR5LmdvdG9fc2xpZGUobnVtLTEpOwogICAgfQoKICAgIGlmICh3M2Nfc2xpZHkudGltZV9sZWZ0ICYmIHczY19zbGlkeS5zbGlkZV9udW1iZXIgPiAwKQogICAgewogICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZV9udW1iZXIoKTsKCiAgICAgIGlmICh3M2Nfc2xpZHkudGltZV9sZWZ0ID4gMCkKICAgICAgICB3M2Nfc2xpZHkudGltZV9sZWZ0IC09IDIwMDsKICAgIH0gCiAgfSwKCiAgZ2V0X3RpbWVyOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdGltZXIgPSAiIjsKICAgIGlmICh3M2Nfc2xpZHkudGltZV9sZWZ0KQogICAgewogICAgICB2YXIgbWlucywgc2VjczsKICAgICAgc2VjcyA9IE1hdGguZmxvb3IodzNjX3NsaWR5LnRpbWVfbGVmdC8xMDAwKTsKICAgICAgbWlucyA9IE1hdGguZmxvb3Ioc2VjcyAvIDYwKTsKICAgICAgc2VjcyA9IHNlY3MgJSA2MDsKICAgICAgdGltZXIgPSAobWlucyA/IG1pbnMrIm0iIDogIiIpICsgc2VjcyArICJzICI7CiAgICB9CgogICAgcmV0dXJuIHRpbWVyOwogIH0sCgogIC8vIHRoaXMgZG9lc24ndCBwdXNoIGxvY2F0aW9uIG9udG8gaGlzdG9yeSBzdGFjayBmb3IgSUUKICAvLyBmb3Igd2hpY2ggYSBoaWRkZW4gaWZyYW1lIGhhY2sgaXMgbmVlZGVkOiBsb2FkIHBhZ2UgaW50bwogIC8vIHRoZSBpZnJhbWUgd2l0aCBzY3JpcHQgdGhhdCBzZXQncyBwYXJlbnQncyBsb2NhdGlvbi5oYXNoCiAgLy8gYnV0IHRoYXQgd29uJ3Qgd29yayBmb3Igc3RhbmRhbG9uZSB1c2UgdW5sZXNzIHdlIGNhbgogIC8vIGNyZWF0ZSB0aGUgcGFnZSBkeW5hbWljYWxseSB2aWEgYSBqYXZhc2NyaXB0OiBVUkwKICAvLyAjIyMgdXNlIGhpc3RvcnkucHVzaFN0YXRlIGlmIGF2YWlsYWJsZQogIHNldF9sb2NhdGlvbjogZnVuY3Rpb24gKCkgewogICAgIHZhciB1cmkgPSB3M2Nfc2xpZHkucGFnZV9hZGRyZXNzKGxvY2F0aW9uLmhyZWYpOwogICAgIHZhciBoYXNoID0gIiMoIiArICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyKzEpICsgIikiOwoKICAgICBpZiAodzNjX3NsaWR5LnNsaWRlX251bWJlciA+PSAwKQogICAgICAgdXJpID0gdXJpICsgaGFzaDsKCiAgICAgaWYgKHR5cGVvZihoaXN0b3J5LnB1c2hTdGF0ZSkgIT0gInVuZGVmaW5lZCIgJiYgbG9jYXRpb24ucHJvdG9jb2wgIT09ICJmaWxlOiIpCiAgICAgewogICAgICAgZG9jdW1lbnQudGl0bGUgPSB3M2Nfc2xpZHkudGl0bGUgKyAiICgiICsgKHczY19zbGlkeS5zbGlkZV9udW1iZXIrMSkgKyAiKSI7CiAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZSgwLCBkb2N1bWVudC50aXRsZSwgaGFzaCk7CiAgICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZV9udW1iZXIoKTsKICAgICAgIHczY19zbGlkeS5ub3RpZnlfb2JzZXJ2ZXJzKCk7CiAgICAgICByZXR1cm47CiAgICAgfQoKICAgICBpZiAodzNjX3NsaWR5LmllICYmICh3M2Nfc2xpZHkuaWU2IHx8IHczY19zbGlkeS5pZTcpKQogICAgICAgdzNjX3NsaWR5LnB1c2hfaGFzaChoYXNoKTsKCiAgICAgaWYgKHVyaSAhPSBsb2NhdGlvbi5ocmVmKSAvLyAmJiAha2h0bWwKICAgICAgICBsb2NhdGlvbi5ocmVmID0gdXJpOwoKICAgICBpZiAodGhpcy5raHRtbCkKICAgICAgICBoYXNoID0gIigiICsgKHczY19zbGlkeS5zbGlkZV9udW1iZXIrMSkgKyAiKSI7CgogICAgIGlmICghdGhpcy5pZSAmJiBsb2NhdGlvbi5oYXNoICE9IGhhc2ggJiYgbG9jYXRpb24uaGFzaCAhPSAiIikKICAgICAgIGxvY2F0aW9uLmhhc2ggPSBoYXNoOwoKICAgICBkb2N1bWVudC50aXRsZSA9IHczY19zbGlkeS50aXRsZSArICIgKCIgKyAodzNjX3NsaWR5LnNsaWRlX251bWJlcisxKSArICIpIjsKICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZV9udW1iZXIoKTsKICAgICB3M2Nfc2xpZHkubm90aWZ5X29ic2VydmVycygpOwogIH0sCgogIG5vdGlmeV9vYnNlcnZlcnM6IGZ1bmN0aW9uICgpCiAgewogICAgdmFyIHNsaWRlID0gdGhpcy5zbGlkZXNbdGhpcy5zbGlkZV9udW1iZXJdOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyArK2kpCiAgICAgIHRoaXMub2JzZXJ2ZXJzW2ldKHRoaXMuc2xpZGVfbnVtYmVyKzEsIHRoaXMuZmluZF9oZWFkaW5nKHNsaWRlKS5pbm5lclRleHQsIGxvY2F0aW9uLmhyZWYpOwogIH0sCgogIGFkZF9vYnNlcnZlcjogZnVuY3Rpb24gKG9ic2VydmVyKQogIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIGlmIChvYnNlcnZlciA9PSB0aGlzLm9ic2VydmVyc1tpXSkKICAgICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7CiAgfSwKCiAgcmVtb3ZlX29ic2VydmVyOiBmdW5jdGlvbiAobykKICB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMub2JzZXJ2ZXJzLmxlbmd0aDsgKytpKQogICAgewogICAgICBpZiAob2JzZXJ2ZXIgPT0gdGhpcy5vYnNlcnZlcnNbaV0pCiAgICAgIHsKICAgICAgICB0aGlzLm9ic2VydmVycy5zcGxpY2UoaSwxKTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0sCgogIHBhZ2VfYWRkcmVzczogZnVuY3Rpb24gKHVyaSkgewogICAgdmFyIGkgPSB1cmkuaW5kZXhPZigiIyIpOwoKICAgIGlmIChpIDwgMCkKICAgICAgaSA9IHVyaS5pbmRleE9mKCIlMjMiKTsKCiAgICAvLyBjaGVjayBpZiBhbmNob3IgaXMgZW50aXJlIHBhZ2UKCiAgICBpZiAoaSA8IDApCiAgICAgIHJldHVybiB1cmk7ICAvLyB5ZXMKCiAgICByZXR1cm4gdXJpLnN1YnN0cigwLCBpKTsKICB9LAoKICAvLyBvbmx5IHVzZWQgZm9yIElFNiBhbmQgSUU3CiAgb25fZnJhbWVfbG9hZGVkOiBmdW5jdGlvbiAoaGFzaCkgewogICAgbG9jYXRpb24uaGFzaCA9IGhhc2g7CiAgICB2YXIgdXJpID0gdzNjX3NsaWR5LnBhZ2VfYWRkcmVzcyhsb2NhdGlvbi5ocmVmKTsKICAgIGxvY2F0aW9uLmhyZWYgPSB1cmkgKyBoYXNoOwogIH0sCgogIC8vIGhpc3RvcnkgaGFjayB3aXRoIHRoYW5rcyB0byBCZXJ0cmFuZCBMZSBSb3kKICBwdXNoX2hhc2g6IGZ1bmN0aW9uIChoYXNoKSB7CiAgICBpZiAoaGFzaCA9PSAiIikgaGFzaCA9ICIjKDEpIjsKICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBoYXNoOwoKICAgIHZhciBkb2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaGlzdG9yeUZyYW1lIikuY29udGVudFdpbmRvdy5kb2N1bWVudDsKICAgIGRvYy5vcGVuKCJqYXZhc2NyaXB0Oic8aHRtbD48L2h0bWw+JyIpOwogICAgZG9jLndyaXRlKCI8aHRtbD48aGVhZD48c2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIj53aW5kb3cucGFyZW50LnczY19zbGlkeS5vbl9mcmFtZV9sb2FkZWQoJyIrCiAgICAgIChoYXNoKSArICInKTs8L3NjcmlwdD48L2hlYWQ+PGJvZHk+aGVsbG8gbXVtPC9ib2R5PjwvaHRtbD4iKTsKICAgICAgZG9jLmNsb3NlKCk7CiAgfSwKCiAgLy8gZmluZCBjdXJyZW50IHNsaWRlIGJhc2VkIHVwb24gbG9jYXRpb24KICAvLyBmaXJzdCBmaW5kIHRhcmdldCBhbmNob3IgYW5kIHRoZW4gbG9vawogIC8vIGZvciBhc3NvY2lhdGVkIGRpdiBlbGVtZW50IGVuY2xvc2luZyBpdAogIC8vIGZpbmFsbHkgbWFwIHRoYXQgdG8gc2xpZGUgbnVtYmVyCiAgZmluZF9zbGlkZV9udW1iZXI6IGZ1bmN0aW9uICh1cmkpIHsKICAgIC8vIGZpcnN0IGdldCBhbmNob3IgZnJvbSBwYWdlIGxvY2F0aW9uCgogICAgdmFyIGkgPSB1cmkuaW5kZXhPZigiIyIpOwoKICAgIC8vIGNoZWNrIGlmIGFuY2hvciBpcyBlbnRpcmUgcGFnZQogICAgaWYgKGkgPCAwKQogICAgICByZXR1cm4gMDsgIC8vIHllcwoKICAgIHZhciBhbmNob3IgPSB1bmVzY2FwZSh1cmkuc3Vic3RyKGkrMSkpOwoKICAgIC8vIG5vdyB1c2UgYW5jaG9yIGFzIFhNTCBJRCB0byBmaW5kIHRhcmdldAogICAgdmFyIHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFuY2hvcik7CgogICAgaWYgKCF0YXJnZXQpCiAgICB7CiAgICAgIC8vIGRvZXMgYW5jaG9yIGxvb2sgbGlrZSAiKDIpIiBmb3Igc2xpZGUgMiA/PwogICAgICAvLyB3aGVyZSBmaXJzdCBzbGlkZSBpcyAoMSkKICAgICAgdmFyIHJlID0gL1woKFxkKStcKS87CgogICAgICBpZiAoYW5jaG9yLm1hdGNoKHJlKSkKICAgICAgewogICAgICAgIHZhciBudW0gPSBwYXJzZUludChhbmNob3Iuc3Vic3RyaW5nKDEsIGFuY2hvci5sZW5ndGgtMSkpOwoKICAgICAgICBpZiAobnVtID4gdGhpcy5zbGlkZXMubGVuZ3RoKQogICAgICAgICAgbnVtID0gMTsKCiAgICAgICAgaWYgKC0tbnVtIDwgMCkKICAgICAgICAgIG51bSA9IDA7CgogICAgICAgIHJldHVybiBudW07CiAgICAgIH0KCiAgICAgIC8vIGFjY2VwdCBbMl0gZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5CiAgICAgIHJlID0gL1xbKFxkKStcXS87CgogICAgICBpZiAoYW5jaG9yLm1hdGNoKHJlKSkKICAgICAgewogICAgICAgICB2YXIgbnVtID0gcGFyc2VJbnQoYW5jaG9yLnN1YnN0cmluZygxLCBhbmNob3IubGVuZ3RoLTEpKTsKCiAgICAgICAgIGlmIChudW0gPiB0aGlzLnNsaWRlcy5sZW5ndGgpCiAgICAgICAgICAgIG51bSA9IDE7CgogICAgICAgICBpZiAoLS1udW0gPCAwKQogICAgICAgICAgICBudW0gPSAwOwoKICAgICAgICAgcmV0dXJuIG51bTsKICAgICAgfQoKICAgICAgLy8gb2ggZGVhciB1bmtub3duIGFuY2hvcgogICAgICByZXR1cm4gMDsKICAgIH0KCiAgICAvLyBzZWFyY2ggZm9yIGVuY2xvc2luZyBzbGlkZQoKICAgIHdoaWxlICh0cnVlKQogICAgewogICAgICAvLyBicm93c2VyIGNvZXJjZXMgaHRtbCBlbGVtZW50cyB0byB1cHBlcmNhc2UhCiAgICAgIGlmICh0YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PSAiZGl2IiAmJgogICAgICAgICAgICB0aGlzLmhhc19jbGFzcyh0YXJnZXQsICJzbGlkZSIpKQogICAgICB7CiAgICAgICAgLy8gZm91bmQgdGhlIHNsaWRlIGVsZW1lbnQKICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgLy8gb3RoZXJ3aXNlIHRyeSBwYXJlbnQgZWxlbWVudCBpZiBhbnkKCiAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlOwoKICAgICAgaWYgKCF0YXJnZXQpCiAgICAgIHsKICAgICAgICByZXR1cm4gMDsgICAvLyBubyBsdWNrIQogICAgICB9CiAgICB9OwoKICAgIGZvciAoaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIGlmIChzbGlkZXNbaV0gPT0gdGFyZ2V0KQogICAgICAgIHJldHVybiBpOyAgLy8gc3VjY2VzcwogICAgfQoKICAgIC8vIG9oIGRlYXIgc3RpbGwgbm8gbHVjawogICAgcmV0dXJuIDA7CiAgfSwKCiAgcHJldmlvdXNfc2xpZGU6IGZ1bmN0aW9uIChpbmNyZW1lbnRhbCkgewogICAgaWYgKCF3M2Nfc2xpZHkudmlld19hbGwpCiAgICB7CiAgICAgIHZhciBzbGlkZTsKCiAgICAgIGlmICgoaW5jcmVtZW50YWwgfHwgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9PSAwKSAmJiB3M2Nfc2xpZHkubGFzdF9zaG93biAhPSBudWxsKQogICAgICB7CiAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSB3M2Nfc2xpZHkuaGlkZV9wcmV2aW91c19pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKTsKICAgICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXMoZmFsc2UpOwogICAgICB9CiAgICAgIGVsc2UgaWYgKHczY19zbGlkeS5zbGlkZV9udW1iZXIgPiAwKQogICAgICB7CiAgICAgICAgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgIHczY19zbGlkeS5oaWRlX3NsaWRlKHNsaWRlKTsKCiAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IHczY19zbGlkeS5zbGlkZV9udW1iZXIgLSAxOwogICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICB3M2Nfc2xpZHkuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJ2aXNpYmxlIik7CiAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSB3M2Nfc2xpZHkucHJldmlvdXNfaW5jcmVtZW50YWxfaXRlbShudWxsKTsKICAgICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXModHJ1ZSk7CiAgICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgICB9CgogICAgICB3M2Nfc2xpZHkuc2V0X2xvY2F0aW9uKCk7CgogICAgICBpZiAoIXczY19zbGlkeS5uc19wb3MpCiAgICAgICAgdzNjX3NsaWR5LnJlZnJlc2hfdG9vbGJhcigyMDApOwogICAgfQogIH0sCgogIG5leHRfc2xpZGU6IGZ1bmN0aW9uIChpbmNyZW1lbnRhbCkgewogICAgaWYgKCF3M2Nfc2xpZHkudmlld19hbGwpCiAgICB7CiAgICAgIHZhciBzbGlkZSwgbGFzdCA9IHczY19zbGlkeS5sYXN0X3Nob3duOwoKICAgICAgaWYgKGluY3JlbWVudGFsIHx8IHczY19zbGlkeS5zbGlkZV9udW1iZXIgPT0gdzNjX3NsaWR5LnNsaWRlcy5sZW5ndGggLSAxKQogICAgICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IHczY19zbGlkeS5yZXZlYWxfbmV4dF9pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKTsKCiAgICAgIGlmICgoIWluY3JlbWVudGFsIHx8IHczY19zbGlkeS5sYXN0X3Nob3duID09IG51bGwpICYmCiAgICAgICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyIDwgdzNjX3NsaWR5LnNsaWRlcy5sZW5ndGggLSAxKQogICAgICB7CiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwoKICAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IHczY19zbGlkeS5zbGlkZV9udW1iZXIgKyAxOwogICAgICAgICBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07CiAgICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbnVsbDsKICAgICAgICAgdzNjX3NsaWR5LnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgiaGlkZGVuIik7CiAgICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgfQogICAgICBlbHNlIGlmICghdzNjX3NsaWR5Lmxhc3Rfc2hvd24pCiAgICAgIHsKICAgICAgICAgaWYgKGxhc3QgJiYgaW5jcmVtZW50YWwpCiAgICAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSBsYXN0OwogICAgICB9CgogICAgICB3M2Nfc2xpZHkuc2V0X2xvY2F0aW9uKCk7CgogICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXMoIXczY19zbGlkeS5uZXh0X2luY3JlbWVudGFsX2l0ZW0odzNjX3NsaWR5Lmxhc3Rfc2hvd24pKTsKCiAgICAgIGlmICghdzNjX3NsaWR5Lm5zX3BvcykKICAgICAgICAgdzNjX3NsaWR5LnJlZnJlc2hfdG9vbGJhcigyMDApOwogICAgIH0KICB9LAoKICAvLyB0byBmaXJzdCBzbGlkZSB3aXRoIG5vdGhpbmcgcmV2ZWFsZWQKICAvLyBpLmUuIHN0YXRlIGF0IHN0YXJ0IG9mIHByZXNlbnRhdGlvbgogIGZpcnN0X3NsaWRlOiBmdW5jdGlvbiAoKSB7CiAgICAgaWYgKCF3M2Nfc2xpZHkudmlld19hbGwpCiAgICAgewogICAgICAgdmFyIHNsaWRlOwoKICAgICAgIGlmICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyICE9IDApCiAgICAgICB7CiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwoKICAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IDA7CiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSBudWxsOwogICAgICAgICB3M2Nfc2xpZHkuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJoaWRkZW4iKTsKICAgICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgICAgfQoKICAgICAgIHczY19zbGlkeS5zZXRfZW9zX3N0YXR1cygKICAgICAgICAgIXczY19zbGlkeS5uZXh0X2luY3JlbWVudGFsX2l0ZW0odzNjX3NsaWR5Lmxhc3Rfc2hvd24pKTsKICAgICAgIHczY19zbGlkeS5zZXRfbG9jYXRpb24oKTsKICAgICB9CiAgfSwKCiAgLy8gZ290byBsYXN0IHNsaWRlIHdpdGggZXZlcnl0aGluZyByZXZlYWxlZAogIC8vIGkuZS4gc3RhdGUgYXQgZW5kIG9mIHByZXNlbnRhdGlvbgogIGxhc3Rfc2xpZGU6IGZ1bmN0aW9uICgpIHsKICAgIGlmICghdzNjX3NsaWR5LnZpZXdfYWxsKQogICAgewogICAgICB2YXIgc2xpZGU7CgogICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IG51bGw7IC8vcmV2ZWFsTmV4dEl0ZW0obGFzdFNob3duKTsKCiAgICAgIGlmICh3M2Nfc2xpZHkubGFzdF9zaG93biA9PSBudWxsICYmCiAgICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyIDwgdzNjX3NsaWR5LnNsaWRlcy5sZW5ndGggLSAxKQogICAgICB7CiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwogICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID0gdzNjX3NsaWR5LnNsaWRlcy5sZW5ndGggLSAxOwogICAgICAgICBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07CiAgICAgICAgIHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsKICAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSB3M2Nfc2xpZHkucHJldmlvdXNfaW5jcmVtZW50YWxfaXRlbShudWxsKTsKCiAgICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgfQogICAgICBlbHNlCiAgICAgIHsKICAgICAgICAgdzNjX3NsaWR5LnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgidmlzaWJsZSIpOwogICAgICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IHczY19zbGlkeS5wcmV2aW91c19pbmNyZW1lbnRhbF9pdGVtKG51bGwpOwogICAgICB9CgogICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXModHJ1ZSk7CiAgICAgIHczY19zbGlkeS5zZXRfbG9jYXRpb24oKTsKICAgIH0KICB9LAoKCiAgLy8gIyMjIGNoZWNrIHRoaXMgYW5kIGNvbnNpZGVyIGFkZC9yZW1vdmUgY2xhc3MKICBzZXRfZW9zX3N0YXR1czogZnVuY3Rpb24gKHN0YXRlKSB7CiAgICBpZiAodGhpcy5lb3MpCiAgICAgIHRoaXMuZW9zLnN0eWxlLmNvbG9yID0gKHN0YXRlID8gInJnYigyNDAsMjQwLDI0MCkiIDogInJlZCIpOwogIH0sCgogIC8vIGZpcnN0IHNsaWRlIGlzIDAKICBnb3RvX3NsaWRlOiBmdW5jdGlvbiAobnVtKSB7CiAgICAvL2FsZXJ0KCJnb2luZyB0byBzbGlkZSAiICsgKG51bSsxKSk7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwogICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IG51bTsKICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbnVsbDsKICAgIHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoImhpZGRlbiIpOwogICAgdzNjX3NsaWR5LnNldF9lb3Nfc3RhdHVzKCF3M2Nfc2xpZHkubmV4dF9pbmNyZW1lbnRhbF9pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKSk7CiAgICBkb2N1bWVudC50aXRsZSA9IHczY19zbGlkeS50aXRsZSArICIgKCIgKyAodzNjX3NsaWR5LnNsaWRlX251bWJlcisxKSArICIpIjsKICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgIHczY19zbGlkeS5zaG93X3NsaWRlX251bWJlcigpOwogIH0sCgoKICBzaG93X3NsaWRlOiBmdW5jdGlvbiAoc2xpZGUpIHsKICAgIHRoaXMuc3luY19iYWNrZ3JvdW5kKHNsaWRlKTsKICAgIHRoaXMucmVtb3ZlX2NsYXNzKHNsaWRlLCAiaGlkZGVuIik7CgogICAgLy8gd29yayBhcm91bmQgSUU5IG9iamVjdCByZW5kZXJpbmcgYnVnCiAgICBzZXRUaW1lb3V0KCJ3aW5kb3cuc2Nyb2xsVG8oMCwwKTsiLCAxKTsKICB9LAoKICBoaWRlX3NsaWRlOiBmdW5jdGlvbiAoc2xpZGUpIHsKICAgIHRoaXMuYWRkX2NsYXNzKHNsaWRlLCAiaGlkZGVuIik7CiAgfSwKCiAgc2V0X2ZvY3VzOiBmdW5jdGlvbiAoZWxlbWVudCkKICB7CiAgICBpZiAoZWxlbWVudCkKICAgICAgZWxlbWVudC5mb2N1cygpOwogICAgZWxzZQogICAgewogICAgICB3M2Nfc2xpZHkuaGVscF9hbmNob3IuZm9jdXMoKTsKCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgdzNjX3NsaWR5LmhlbHBfYW5jaG9yLmJsdXIoKTsKICAgICAgfSwgMSk7CiAgICB9CiAgfSwKCiAgLy8gc2hvdyBqdXN0IHRoZSBiYWNrZ3JvdW5kcyBwZXJ0aW5lbnQgdG8gdGhpcyBzbGlkZQogIC8vIHdoZW4gc2xpZGUgYmFja2dyb3VuZC1jb2xvciBpcyB0cmFuc3BhcmVudAogIC8vIHRoaXMgc2hvdWxkIG5vdyB3b3JrIHdpdGggcmdiYSBjb2xvciB2YWx1ZXMKICBzeW5jX2JhY2tncm91bmQ6IGZ1bmN0aW9uIChzbGlkZSkgewogICAgdmFyIGJhY2tncm91bmQ7CiAgICB2YXIgYmdDb2xvcjsKCiAgICBpZiAoc2xpZGUuY3VycmVudFN0eWxlKQogICAgICBiZ0NvbG9yID0gc2xpZGUuY3VycmVudFN0eWxlWyJiYWNrZ3JvdW5kQ29sb3IiXTsKICAgIGVsc2UgaWYgKGRvY3VtZW50LmRlZmF1bHRWaWV3KQogICAgewogICAgICB2YXIgc3R5bGVzID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShzbGlkZSxudWxsKTsKCiAgICAgIGlmIChzdHlsZXMpCiAgICAgICAgYmdDb2xvciA9IHN0eWxlcy5nZXRQcm9wZXJ0eVZhbHVlKCJiYWNrZ3JvdW5kLWNvbG9yIik7CiAgICAgIGVsc2UgLy8gYnJva2VuIGltcGxlbWVudGF0aW9uIHByb2JhYmx5IGR1ZSBTYWZhcmkgb3IgS29ucXVlcm9yCiAgICAgIHsKICAgICAgICAvL2FsZXJ0KCJkZWZlY3RpdmUgaW1wbGVtZW50YXRpb24gb2YgZ2V0Q29tcHV0ZWRTdHlsZSgpIik7CiAgICAgICAgYmdDb2xvciA9ICJ0cmFuc3BhcmVudCI7CiAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgICAgYmdDb2xvciA9PSAidHJhbnNwYXJlbnQiOwoKICAgIGlmIChiZ0NvbG9yID09ICJ0cmFuc3BhcmVudCIgfHwKICAgICAgICBiZ0NvbG9yLmluZGV4T2YoInJnYmEiKSA+PSAwIHx8CiAgICAgICAgYmdDb2xvci5pbmRleE9mKCJvcGFjaXR5IikgPj0gMCkKICAgIHsKICAgICAgdmFyIHNsaWRlQ2xhc3MgPSB0aGlzLmdldF9jbGFzc19saXN0KHNsaWRlKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5iYWNrZ3JvdW5kcy5sZW5ndGg7IGkrKykKICAgICAgewogICAgICAgIGJhY2tncm91bmQgPSB0aGlzLmJhY2tncm91bmRzW2ldOwoKICAgICAgICB2YXIgYmdDbGFzcyA9IHRoaXMuZ2V0X2NsYXNzX2xpc3QoYmFja2dyb3VuZCk7CgogICAgICAgIGlmICh0aGlzLm1hdGNoaW5nX2JhY2tncm91bmQoc2xpZGVDbGFzcywgYmdDbGFzcykpCiAgICAgICAgICB0aGlzLnJlbW92ZV9jbGFzcyhiYWNrZ3JvdW5kLCAiaGlkZGVuIik7CiAgICAgICAgZWxzZQogICAgICAgICAgdGhpcy5hZGRfY2xhc3MoYmFja2dyb3VuZCwgImhpZGRlbiIpOwogICAgICB9CiAgICB9CiAgICBlbHNlIC8vIGZvcmNpYmx5IGhpZGUgYWxsIGJhY2tncm91bmRzCiAgICAgIHRoaXMuaGlkZV9iYWNrZ3JvdW5kcygpOwogIH0sCgogIGhpZGVfYmFja2dyb3VuZHM6IGZ1bmN0aW9uICgpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5iYWNrZ3JvdW5kcy5sZW5ndGg7IGkrKykKICAgIHsKICAgICAgYmFja2dyb3VuZCA9IHRoaXMuYmFja2dyb3VuZHNbaV07CiAgICAgIHRoaXMuYWRkX2NsYXNzKGJhY2tncm91bmQsICJoaWRkZW4iKTsKICAgIH0KICB9LAoKICAvLyBjb21wYXJlIGNsYXNzZXMgZm9yIHNsaWRlIGFuZCBiYWNrZ3JvdW5kCiAgbWF0Y2hpbmdfYmFja2dyb3VuZDogZnVuY3Rpb24gKHNsaWRlQ2xhc3MsIGJnQ2xhc3MpIHsKICAgIHZhciBpLCBjb3VudCwgcGF0dGVybiwgcmVzdWx0OwoKICAgIC8vIGRlZmluZSBwYXR0ZXJuIGFzIHJlZ3VsYXIgZXhwcmVzc2lvbgogICAgcGF0dGVybiA9IC9cdysvZzsKCiAgICAvLyBjaGVjayBiYWNrZ3JvdW5kIGNsYXNzIG5hbWVzCiAgICByZXN1bHQgPSBiZ0NsYXNzLm1hdGNoKHBhdHRlcm4pOwoKICAgIGZvciAoaSA9IGNvdW50ID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykKICAgIHsKICAgICAgaWYgKHJlc3VsdFtpXSA9PSAiaGlkZGVuIikKICAgICAgICBjb250aW51ZTsKCiAgICAgIGlmIChyZXN1bHRbaV0gPT0gImJhY2tncm91bmQiKQoJY29udGludWU7CgogICAgICArK2NvdW50OwogICAgfQoKICAgIGlmIChjb3VudCA9PSAwKSAgLy8gZGVmYXVsdCBtYXRjaAogICAgICByZXR1cm4gdHJ1ZTsKCiAgICAvLyBjaGVjayBmb3IgbWF0Y2hlcyBhbmQgcGxhY2UgcmVzdWx0IGluIGFycmF5CiAgICByZXN1bHQgPSBzbGlkZUNsYXNzLm1hdGNoKHBhdHRlcm4pOwoKICAgIC8vIG5vdyBjaGVjayBpZiBkZXNpcmVkIG5hbWUgaXMgcHJlc2VudCBmb3IgYmFja2dyb3VuZAogICAgZm9yIChpID0gY291bnQgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKQogICAgewogICAgICBpZiAocmVzdWx0W2ldID09ICJoaWRkZW4iKQogICAgICAgIGNvbnRpbnVlOwoKICAgICAgaWYgKHRoaXMuaGFzX3Rva2VuKGJnQ2xhc3MsIHJlc3VsdFtpXSkpCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0sCgogIHJlc2l6ZWQ6IGZ1bmN0aW9uICgpIHsKICAgICB2YXIgd2lkdGggPSAwOwoKICAgICBpZiAoIHR5cGVvZiggd2luZG93LmlubmVyV2lkdGggKSA9PSAnbnVtYmVyJyApCiAgICAgICB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOyAgLy8gTm9uIElFIGJyb3dzZXIKICAgICBlbHNlIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKQogICAgICAgd2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7ICAvLyBJRTYKICAgICBlbHNlIGlmIChkb2N1bWVudC5ib2R5ICYmIGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgpCiAgICAgICB3aWR0aCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7IC8vIElFNAoKICAgICB2YXIgaGVpZ2h0ID0gMDsKCiAgICAgaWYgKCB0eXBlb2YoIHdpbmRvdy5pbm5lckhlaWdodCApID09ICdudW1iZXInICkKICAgICAgIGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDsgIC8vIE5vbiBJRSBicm93c2VyCiAgICAgZWxzZSBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpCiAgICAgICBoZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0OyAgLy8gSUU2CiAgICAgZWxzZSBpZiAoZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkKICAgICAgIGhlaWdodCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0OyAvLyBJRTQKCiAgICAgaWYgKGhlaWdodCAmJiAod2lkdGgvaGVpZ2h0ID4gMS4wNSoxMDI0Lzc2OCkpCiAgICAgewogICAgICAgd2lkdGggPSBoZWlnaHQgKiAxMDI0LjAvNzY4OwogICAgIH0KCiAgICAgLy8gSUUgZmlyZXMgb25yZXNpemUgZXZlbiB3aGVuIG9ubHkgZm9udCBzaXplIGlzIGNoYW5nZWQhCiAgICAgLy8gc28gd2UgZG8gYSBjaGVjayB0byBhdm9pZCBibG9ja2luZyA8IGFuZCA+IGFjdGlvbnMKICAgICBpZiAod2lkdGggIT0gdzNjX3NsaWR5Lmxhc3Rfd2lkdGggfHwgaGVpZ2h0ICE9IHczY19zbGlkeS5sYXN0X2hlaWdodCkKICAgICB7CiAgICAgICBpZiAod2lkdGggPj0gMTEwMCkKICAgICAgICAgdzNjX3NsaWR5LnNpemVfaW5kZXggPSA1OyAgICAvLyA0CiAgICAgICBlbHNlIGlmICh3aWR0aCA+PSAxMDAwKQogICAgICAgICB3M2Nfc2xpZHkuc2l6ZV9pbmRleCA9IDQ7ICAgIC8vIDMKICAgICAgIGVsc2UgaWYgKHdpZHRoID49IDgwMCkKICAgICAgICAgdzNjX3NsaWR5LnNpemVfaW5kZXggPSAzOyAgICAvLyAyCiAgICAgICBlbHNlIGlmICh3aWR0aCA+PSA2MDApCiAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ID0gMjsgICAgLy8gMQogICAgICAgZWxzZSBpZiAod2lkdGgpCiAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ID0gMDsKCiAgICAgICAvLyBhZGQgaW4gZm9udCBzaXplIGFkanVzdG1lbnQgZnJvbSBtZXRhIGVsZW1lbnQgZS5nLgogICAgICAgLy8gPG1ldGEgbmFtZT0iZm9udC1zaXplLWFkanVzdG1lbnQiIGNvbnRlbnQ9Ii0yIiAvPgogICAgICAgLy8gdXNlZnVsIHdoZW4gc2xpZGVzIGhhdmUgdG9vIG11Y2ggY29udGVudCA7LSkKCiAgICAgICBpZiAoMCA8PSB3M2Nfc2xpZHkuc2l6ZV9pbmRleCArIHczY19zbGlkeS5zaXplX2FkanVzdG1lbnQgJiYKICAgICAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ICsgdzNjX3NsaWR5LnNpemVfYWRqdXN0bWVudCA8IHczY19zbGlkeS5zaXplcy5sZW5ndGgpCiAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ID0gdzNjX3NsaWR5LnNpemVfaW5kZXggKyB3M2Nfc2xpZHkuc2l6ZV9hZGp1c3RtZW50OwoKICAgICAgIC8vIGVuYWJsZXMgY3Jvc3MgYnJvd3NlciB1c2Ugb2YgcmVsYXRpdmUgd2lkdGgvaGVpZ2h0CiAgICAgICAvLyBvbiBvYmplY3QgZWxlbWVudHMgZm9yIHVzZSB3aXRoIFNWRyBhbmQgRmxhc2ggbWVkaWEKICAgICAgIHczY19zbGlkeS5hZGp1c3Rfb2JqZWN0X2RpbWVuc2lvbnMod2lkdGgsIGhlaWdodCk7CgogICAgICAgaWYgKGRvY3VtZW50LmJvZHkuc3R5bGUuZm9udFNpemUgIT0gdzNjX3NsaWR5LnNpemVzW3czY19zbGlkeS5zaXplX2luZGV4XSkKICAgICAgIHsKICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5mb250U2l6ZSA9IHczY19zbGlkeS5zaXplc1t3M2Nfc2xpZHkuc2l6ZV9pbmRleF07CiAgICAgICB9CgogICAgICAgdzNjX3NsaWR5Lmxhc3Rfd2lkdGggPSB3aWR0aDsKICAgICAgIHczY19zbGlkeS5sYXN0X2hlaWdodCA9IGhlaWdodDsKCiAgICAgICAvLyBmb3JjZSByZWZsb3cgdG8gd29yayBhcm91bmQgTW96aWxsYSBidWcKICAgICAgIGlmICh3M2Nfc2xpZHkubnNfcG9zKQogICAgICAgewogICAgICAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgICB3M2Nfc2xpZHkuaGlkZV9zbGlkZShzbGlkZSk7CiAgICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgIH0KCiAgICAgICAvLyBmb3JjZSBjb3JyZWN0IHBvc2l0aW9uaW5nIG9mIHRvb2xiYXIKICAgICAgIHczY19zbGlkeS5yZWZyZXNoX3Rvb2xiYXIoMjAwKTsKICAgICB9CiAgfSwKCiAgc2Nyb2xsZWQ6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3M2Nfc2xpZHkudG9vbGJhciAmJiAhdzNjX3NsaWR5Lm5zX3BvcyAmJiAhdzNjX3NsaWR5LmllNykKICAgIHsKICAgICAgdzNjX3NsaWR5LmhhY2tfb2Zmc2V0ID0gdzNjX3NsaWR5LnNjcm9sbF94X29mZnNldCgpOwogICAgICAvLyBoaWRlIHRvb2xiYXIKICAgICAgdzNjX3NsaWR5LnRvb2xiYXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKCiAgICAgIC8vIG1ha2UgaXQgcmVhcHBlYXIgbGF0ZXIKICAgICAgaWYgKHczY19zbGlkeS5zY3JvbGxoYWNrID09IDAgJiYgIXczY19zbGlkeS52aWV3X2FsbCkKICAgICAgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge3czY19zbGlkeS5zaG93X3Rvb2xiYXIoKTsgfSwgMTAwMCk7CiAgICAgICAgdzNjX3NsaWR5LnNjcm9sbGhhY2sgPSAxOwogICAgICB9CiAgICB9CiAgfSwKCiAgaGlkZV90b29sYmFyOiBmdW5jdGlvbiAoKSB7CiAgICB3M2Nfc2xpZHkuYWRkX2NsYXNzKHczY19zbGlkeS50b29sYmFyLCAiaGlkZGVuIik7CiAgICB3aW5kb3cuZm9jdXMoKTsKICB9LAoKICAvLyB1c2VkIHRvIGVuc3VyZSBJRSByZWZyZXNoZXMgdG9vbGJhciBpbiBjb3JyZWN0IHBvc2l0aW9uCiAgcmVmcmVzaF90b29sYmFyOiBmdW5jdGlvbiAoaW50ZXJ2YWwpIHsKICAgIGlmICghdzNjX3NsaWR5Lm5zX3BvcyAmJiAhdzNjX3NsaWR5LmllNykKICAgIHsKICAgICAgdzNjX3NsaWR5LmhpZGVfdG9vbGJhcigpOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHt3M2Nfc2xpZHkuc2hvd190b29sYmFyKCk7fSwgaW50ZXJ2YWwpOwogICAgfQogIH0sCgogIC8vIHJlc3RvcmVzIHRvb2xiYXIgYWZ0ZXIgc2hvcnQgZGVsYXkKICBzaG93X3Rvb2xiYXI6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3M2Nfc2xpZHkud2FudF90b29sYmFyKQogICAgewogICAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKCiAgICAgIGlmICghdzNjX3NsaWR5Lm5zX3BvcykKICAgICAgewogICAgICAgIC8vIGFkanVzdCBwb3NpdGlvbiB0byBhbGxvdyBmb3Igc2Nyb2xsaW5nCiAgICAgICAgdmFyIHhvZmZzZXQgPSB3M2Nfc2xpZHkuc2Nyb2xsX3hfb2Zmc2V0KCk7CiAgICAgICAgdzNjX3NsaWR5LnRvb2xiYXIuc3R5bGUubGVmdCA9IHhvZmZzZXQ7CiAgICAgICAgdzNjX3NsaWR5LnRvb2xiYXIuc3R5bGUucmlnaHQgPSB4b2Zmc2V0OwoKICAgICAgICAvLyBkZXRlcm1pbmUgdmVydGljYWwgc2Nyb2xsIG9mZnNldAogICAgICAgIC8vdmFyIHlvZmZzZXQgPSBzY3JvbGxZT2Zmc2V0KCk7CgogICAgICAgIC8vIGJvdHRvbSBpcyBkb2MgaGVpZ2h0IC0gd2luZG93IGhlaWdodCAtIHNjcm9sbCBvZmZzZXQKICAgICAgICAvL3ZhciBib3R0b20gPSBkb2N1bWVudEhlaWdodCgpIC0gbGFzdEhlaWdodCAtIHlvZmZzZXQKCiAgICAgICAgLy9pZiAoeW9mZnNldCA+IDAgfHwgZG9jdW1lbnRIZWlnaHQoKSA+IGxhc3RIZWlnaHQpCiAgICAgICAgLy8gICBib3R0b20gKz0gMTY7ICAvLyBhbGxvdyBmb3IgaGVpZ2h0IG9mIHNjcm9sbGJhcgoKICAgICAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5ib3R0b20gPSAwOyAvL2JvdHRvbTsKICAgICAgfQoKICAgICAgdzNjX3NsaWR5LnJlbW92ZV9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpOwogICAgfQoKICAgIHczY19zbGlkeS5zY3JvbGxoYWNrID0gMDsKCgogICAgLy8gc2V0IHRoZSBrZXlib2FyZCBmb2N1cyB0byB0aGUgaGVscCBsaW5rIG9uIHRoZQogICAgLy8gdG9vbGJhciB0byBlbnN1cmUgdGhhdCBkb2N1bWVudCBoYXMgdGhlIGZvY3VzCiAgICAvLyBJRSBkb2Vzbid0IGFsd2F5cyB3b3JrIHdpdGggd2luZG93LmZvY3VzKCkKICAgIC8vIGFuZCB0aGlzIGhhY2sgaGFzIGJlbmVmaXQgb2YgRW50ZXIgZm9yIGhlbHAKCiAgICB0cnkKICAgIHsKICAgICAgaWYgKCF3M2Nfc2xpZHkub3BlcmEpCiAgICAgICAgdzNjX3NsaWR5LnNldF9mb2N1cygpOwogICAgfQogICAgY2F0Y2ggKGUpCiAgICB7CiAgICB9CiAgfSwKCi8vIGludm9rZWQgdmlhIEYga2V5CiAgdG9nZ2xlX3Rvb2xiYXI6IGZ1bmN0aW9uICgpIHsKICAgIGlmICghdzNjX3NsaWR5LnZpZXdfYWxsKQogICAgewogICAgICBpZiAodzNjX3NsaWR5Lmhhc19jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpKQogICAgICB7CiAgICAgICAgdzNjX3NsaWR5LnJlbW92ZV9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpCiAgICAgICAgdzNjX3NsaWR5LndhbnRfdG9vbGJhciA9IDE7CiAgICAgIH0KICAgICAgZWxzZQogICAgICB7CiAgICAgICAgdzNjX3NsaWR5LmFkZF9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpCiAgICAgICAgdzNjX3NsaWR5LndhbnRfdG9vbGJhciA9IDA7CiAgICAgIH0KICAgIH0KICB9LAoKICBzY3JvbGxfeF9vZmZzZXQ6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3aW5kb3cucGFnZVhPZmZzZXQpCiAgICAgIHJldHVybiBzZWxmLnBhZ2VYT2Zmc2V0OwoKICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgCiAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCkKICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0OwoKICAgIGlmIChkb2N1bWVudC5ib2R5KQogICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0OwoKICAgIHJldHVybiAwOwogIH0sCgogIHNjcm9sbF95X29mZnNldDogZnVuY3Rpb24gKCkgewogICAgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCkKICAgICAgcmV0dXJuIHNlbGYucGFnZVlPZmZzZXQ7CgogICAgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiAKICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApCiAgICAgIHJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wOwoKICAgIGlmIChkb2N1bWVudC5ib2R5KQogICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CgogICAgcmV0dXJuIDA7CiAgfSwKCiAgLy8gbG9va2luZyBmb3IgYSB3YXkgdG8gZGV0ZXJtaW5lIGhlaWdodCBvZiBzbGlkZSBjb250ZW50CiAgLy8gdGhlIHNsaWRlIGl0c2VsZiBpcyBzZXQgdG8gdGhlIGhlaWdodCBvZiB0aGUgd2luZG93CiAgb3B0aW1pemVfZm9udF9zaXplOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwoKICAgIC8vdmFyIGRoID0gZG9jdW1lbnRIZWlnaHQoKTsgLy9nZXREb2NIZWlnaHQoZG9jdW1lbnQpOwogICAgdmFyIGRoID0gc2xpZGUuc2Nyb2xsSGVpZ2h0OwogICAgdmFyIHdoID0gZ2V0V2luZG93SGVpZ2h0KCk7CiAgICB2YXIgdSA9IDEwMCAqIGRoIC8gd2g7CgogICAgYWxlcnQoIndpbmRvdyB1dGlsaXphdGlvbiA9ICIgKyB1ICsgIiUgKGRvYyAiCiAgICAgICsgZGggKyAiIHdpbiAiICsgd2ggKyAiKSIpOwogIH0sCgogIC8vIGZyb20gZG9jdW1lbnQgb2JqZWN0CiAgZ2V0X2RvY19oZWlnaHQ6IGZ1bmN0aW9uIChkb2MpIHsKICAgIGlmICghZG9jKQogICAgICBkb2MgPSBkb2N1bWVudDsKCiAgICBpZiAoZG9jICYmIGRvYy5ib2R5ICYmIGRvYy5ib2R5Lm9mZnNldEhlaWdodCkKICAgICAgcmV0dXJuIGRvYy5ib2R5Lm9mZnNldEhlaWdodDsgIC8vIG5zL2dlY2tvIHN5bnRheAoKICAgIGlmIChkb2MgJiYgZG9jLmJvZHkgJiYgZG9jLmJvZHkuc2Nyb2xsSGVpZ2h0KQogICAgICByZXR1cm4gZG9jLmJvZHkuc2Nyb2xsSGVpZ2h0OwoKICAgIGFsZXJ0KCJjb3VsZG4ndCBkZXRlcm1pbmUgZG9jdW1lbnQgaGVpZ2h0Iik7CiAgfSwKCiAgZ2V0X3dpbmRvd19oZWlnaHQ6IGZ1bmN0aW9uICgpIHsKICAgIGlmICggdHlwZW9mKCB3aW5kb3cuaW5uZXJIZWlnaHQgKSA9PSAnbnVtYmVyJyApCiAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQ7ICAvLyBOb24gSUUgYnJvd3NlcgoKICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkKICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7ICAvLyBJRTYKCiAgICBpZiAoZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkKICAgICAgcmV0dXJuIGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0OyAvLyBJRTQKICB9LAoKICBkb2N1bWVudF9oZWlnaHQ6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzaCwgb2g7CgogICAgc2ggPSBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodDsKICAgIG9oID0gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQ7CgogICAgaWYgKHNoICYmIG9oKQogICAgewogICAgICByZXR1cm4gKHNoID4gb2ggPyBzaCA6IG9oKTsKICAgIH0KCiAgICAvLyBubyBpZGVhIQogICAgcmV0dXJuIDA7CiAgfSwKCiAgc21hbGxlcjogZnVuY3Rpb24gKCkgewogICAgaWYgKHczY19zbGlkeS5zaXplX2luZGV4ID4gMCkKICAgIHsKICAgICAgLS13M2Nfc2xpZHkuc2l6ZV9pbmRleDsKICAgIH0KCiAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgZG9jdW1lbnQuYm9keS5zdHlsZS5mb250U2l6ZSA9IHczY19zbGlkeS5zaXplc1t3M2Nfc2xpZHkuc2l6ZV9pbmRleF07CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwogICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7dzNjX3NsaWR5LnNob3dfdG9vbGJhcigpOyB9LCA1MCk7CiAgfSwKCiAgYmlnZ2VyOiBmdW5jdGlvbiAoKSB7CiAgICBpZiAodzNjX3NsaWR5LnNpemVfaW5kZXggPCB3M2Nfc2xpZHkuc2l6ZXMubGVuZ3RoIC0gMSkKICAgIHsKICAgICAgKyt3M2Nfc2xpZHkuc2l6ZV9pbmRleDsKICAgIH0KCiAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgZG9jdW1lbnQuYm9keS5zdHlsZS5mb250U2l6ZSA9IHczY19zbGlkeS5zaXplc1t3M2Nfc2xpZHkuc2l6ZV9pbmRleF07CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwogICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7dzNjX3NsaWR5LnNob3dfdG9vbGJhcigpOyB9LCA1MCk7CiAgfSwKCiAgLy8gZW5hYmxlcyBjcm9zcyBicm93c2VyIHVzZSBvZiByZWxhdGl2ZSB3aWR0aC9oZWlnaHQKICAvLyBvbiBvYmplY3QgZWxlbWVudHMgZm9yIHVzZSB3aXRoIFNWRyBhbmQgRmxhc2ggbWVkaWEKICAvLyB3aXRoIHRoYW5rcyB0byBJdmFuIEhlcm1hbiBmb3IgdGhlIHN1Z2dlc3Rpb24KICBhZGp1c3Rfb2JqZWN0X2RpbWVuc2lvbnM6IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7CiAgICBmb3IoIHZhciBpID0gMDsgaSA8IHczY19zbGlkeS5vYmplY3RzLmxlbmd0aDsgaSsrICkKICAgIHsKICAgICAgdmFyIG9iaiA9IHRoaXMub2JqZWN0c1tpXTsKICAgICAgdmFyIG1pbWVUeXBlID0gb2JqLmdldEF0dHJpYnV0ZSgidHlwZSIpOwoKICAgICAgaWYgKG1pbWVUeXBlID09ICJpbWFnZS9zdmcreG1sIiB8fCBtaW1lVHlwZSA9PSAiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2giKQogICAgICB7CiAgICAgICAgaWYgKCAhb2JqLmluaXRpYWxXaWR0aCApIAogICAgICAgICAgb2JqLmluaXRpYWxXaWR0aCA9IG9iai5nZXRBdHRyaWJ1dGUoIndpZHRoIik7CgogICAgICAgIGlmICggIW9iai5pbml0aWFsSGVpZ2h0ICkgCiAgICAgICAgICBvYmouaW5pdGlhbEhlaWdodCA9IG9iai5nZXRBdHRyaWJ1dGUoImhlaWdodCIpOwoKICAgICAgICBpZiAoIG9iai5pbml0aWFsV2lkdGggJiYgb2JqLmluaXRpYWxXaWR0aC5jaGFyQXQob2JqLmluaXRpYWxXaWR0aC5sZW5ndGgtMSkgPT0gIiUiICkKICAgICAgICB7CiAgICAgICAgICB2YXIgdyA9IHBhcnNlSW50KG9iai5pbml0aWFsV2lkdGguc2xpY2UoMCwgb2JqLmluaXRpYWxXaWR0aC5sZW5ndGgtMSkpOwogICAgICAgICAgdmFyIG5ld1cgPSB3aWR0aCAqICh3LzEwMC4wKTsKICAgICAgICAgIG9iai5zZXRBdHRyaWJ1dGUoIndpZHRoIixuZXdXKTsKICAgICAgICB9CgogICAgICAgIGlmICggb2JqLmluaXRpYWxIZWlnaHQgJiYKICAgICAgICAgICAgIG9iai5pbml0aWFsSGVpZ2h0LmNoYXJBdChvYmouaW5pdGlhbEhlaWdodC5sZW5ndGgtMSkgPT0gIiUiICkKICAgICAgICB7CiAgICAgICAgICB2YXIgaCA9IHBhcnNlSW50KG9iai5pbml0aWFsSGVpZ2h0LnNsaWNlKDAsIG9iai5pbml0aWFsSGVpZ2h0Lmxlbmd0aC0xKSk7CiAgICAgICAgICB2YXIgbmV3SCA9IGhlaWdodCAqIChoLzEwMC4wKTsKICAgICAgICAgIG9iai5zZXRBdHRyaWJ1dGUoImhlaWdodCIsIG5ld0gpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCgogIC8vIG5lZWRlZCBmb3IgT3BlcmEgdG8gaW5oaWJpdCBkZWZhdWx0IGJlaGF2aW9yCiAgLy8gc2luY2UgT3BlcmEgZGVsaXZlcnMga2V5UHJlc3MgZXZlbiBpZiBrZXlEb3duCiAgLy8gd2FzIGNhbmNlbGxlZAogIGtleV9wcmVzczogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICBpZiAoIWV2ZW50KQogICAgICBldmVudCA9IHdpbmRvdy5ldmVudDsKCiAgICBpZiAoIXczY19zbGlkeS5rZXlfd2FudGVkKQogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CgogICAgcmV0dXJuIHRydWU7CiAgfSwKCiAgLy8gIFNlZSBlLmcuIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvanMvZXZlbnRzL2tleXMuaHRtbCBmb3Iga2V5Y29kZXMKICBrZXlfZG93bjogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICB2YXIga2V5LCB0YXJnZXQsIHRhZzsKCiAgICB3M2Nfc2xpZHkua2V5X3dhbnRlZCA9IHRydWU7CgogICAgaWYgKCFldmVudCkKICAgICAgZXZlbnQgPSB3aW5kb3cuZXZlbnQ7CgogICAgLy8ga2x1ZGdlIGFyb3VuZCBOUy9JRSBkaWZmZXJlbmNlcyAKICAgIGlmICh3aW5kb3cuZXZlbnQpCiAgICB7CiAgICAgIGtleSA9IHdpbmRvdy5ldmVudC5rZXlDb2RlOwogICAgICB0YXJnZXQgPSB3aW5kb3cuZXZlbnQuc3JjRWxlbWVudDsKICAgIH0KICAgIGVsc2UgaWYgKGV2ZW50LndoaWNoKQogICAgewogICAgICBrZXkgPSBldmVudC53aGljaDsKICAgICAgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0OwogICAgfQogICAgZWxzZQogICAgICByZXR1cm4gdHJ1ZTsgLy8gWWlrZXMhIHVua25vd24gYnJvd3NlcgoKICAgIC8vIGlnbm9yZSBldmVudCBpZiBrZXkgdmFsdWUgaXMgemVybwogICAgLy8gYXMgZm9yIGFsdCBvbiBPcGVyYSBhbmQgS29ucXVlcm9yCiAgICBpZiAoIWtleSkKICAgICAgIHJldHVybiB0cnVlOwoKICAgIC8vIGF2b2lkIGludGVyZmVyaW5nIHdpdGgga2V5c3Ryb2tlCiAgICAvLyBiZWhhdmlvciBmb3Igbm9uLXNsaWR5IGNocm9tZSBlbGVtZW50cwogICAgaWYgKCF3M2Nfc2xpZHkuc2xpZHlfY2hyb21lKHRhcmdldCkgJiYKICAgICAgICB3M2Nfc2xpZHkuc3BlY2lhbF9lbGVtZW50KHRhcmdldCkpCiAgICAgIHJldHVybiB0cnVlOwoKICAgIC8vIGNoZWNrIGZvciBjb25jdXJyZW50IGNvbnRyb2wvY29tbWFuZC9hbHQga2V5CiAgICAvLyBidXQgYXJlIHRoZXNlIG9ubHkgcHJlc2VudCBvbiBtb3VzZSBldmVudHM/CgogICAgaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQuYWx0S2V5IHx8IGV2ZW50Lm1ldGFLZXkpCiAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAvLyBkaXNtaXNzIHRhYmxlIG9mIGNvbnRlbnRzIGlmIHZpc2libGUKICAgIGlmICh3M2Nfc2xpZHkuaXNfc2hvd25fdG9jKCkgJiYga2V5ICE9IDkgJiYga2V5ICE9IDE2ICYmIGtleSAhPSAzOCAmJiBrZXkgIT0gNDApCiAgICB7CiAgICAgIHczY19zbGlkeS5oaWRlX3RhYmxlX29mX2NvbnRlbnRzKHRydWUpOwoKICAgICAgaWYgKGtleSA9PSAyNyB8fCBrZXkgPT0gODQgfHwga2V5ID09IDY3KQogICAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KCiAgICBpZiAoa2V5ID09IDM0KSAvLyBQYWdlIERvd24KICAgIHsKICAgICAgaWYgKHczY19zbGlkeS52aWV3X2FsbCkKICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgIHczY19zbGlkeS5uZXh0X3NsaWRlKGZhbHNlKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDMzKSAvLyBQYWdlIFVwCiAgICB7CiAgICAgIGlmICh3M2Nfc2xpZHkudmlld19hbGwpCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICB3M2Nfc2xpZHkucHJldmlvdXNfc2xpZGUoZmFsc2UpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMzIpIC8vIHNwYWNlIGJhcgogICAgewogICAgICB3M2Nfc2xpZHkubmV4dF9zbGlkZSh0cnVlKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDM3KSAvLyBMZWZ0IGFycm93CiAgICB7CiAgICAgIHczY19zbGlkeS5wcmV2aW91c19zbGlkZSghZXZlbnQuc2hpZnRLZXkpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMzYpIC8vIEhvbWUKICAgIHsKICAgICAgdzNjX3NsaWR5LmZpcnN0X3NsaWRlKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSAzNSkgLy8gRW5kCiAgICB7CiAgICAgIHczY19zbGlkeS5sYXN0X3NsaWRlKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSAzOSkgLy8gUmlnaHQgYXJyb3cKICAgIHsKICAgICAgdzNjX3NsaWR5Lm5leHRfc2xpZGUoIWV2ZW50LnNoaWZ0S2V5KTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDEzKSAvLyBFbnRlcgogICAgewogICAgICBpZiAodzNjX3NsaWR5Lm91dGxpbmUpCiAgICAgIHsKICAgICAgICBpZiAodzNjX3NsaWR5Lm91dGxpbmUudmlzaWJsZSkKICAgICAgICAgIHczY19zbGlkeS5mb2xkKHczY19zbGlkeS5vdXRsaW5lKTsKICAgICAgICBlbHNlCiAgICAgICAgICB3M2Nfc2xpZHkudW5mb2xkKHczY19zbGlkeS5vdXRsaW5lKTsKICAgICAgICAgIAogICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgICB9CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMTg4KSAgLy8gPCBmb3Igc21hbGxlciBmb250cwogICAgewogICAgICB3M2Nfc2xpZHkuc21hbGxlcigpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMTkwKSAgLy8gPiBmb3IgbGFyZ2VyIGZvbnRzCiAgICB7CiAgICAgIHczY19zbGlkeS5iaWdnZXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDE4OSB8fCBrZXkgPT0gMTA5KSAgLy8gLSBmb3Igc21hbGxlciBmb250cwogICAgewogICAgICB3M2Nfc2xpZHkuc21hbGxlcigpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMTg3IHx8IGtleSA9PSAxOTEgfHwga2V5ID09IDEwNykgIC8vID0gKyAgZm9yIGxhcmdlciBmb250cwogICAgewogICAgICB3M2Nfc2xpZHkuYmlnZ2VyKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA4MykgIC8vIFMgZm9yIHNtYWxsZXIgZm9udHMKICAgIHsKICAgICAgdzNjX3NsaWR5LnNtYWxsZXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDY2KSAgLy8gQiBmb3IgbGFyZ2VyIGZvbnRzCiAgICB7CiAgICAgIHczY19zbGlkeS5iaWdnZXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDkwKSAgLy8gWiBmb3IgbGFzdCBzbGlkZQogICAgewogICAgICB3M2Nfc2xpZHkubGFzdF9zbGlkZSgpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gNzApICAvLyBGIGZvciB0b2dnbGUgdG9vbGJhcgogICAgewogICAgICB3M2Nfc2xpZHkudG9nZ2xlX3Rvb2xiYXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDY1KSAgLy8gQSBmb3IgdG9nZ2xlIHZpZXcgc2luZ2xlL2FsbCBzbGlkZXMKICAgIHsKICAgICAgdzNjX3NsaWR5LnRvZ2dsZV92aWV3KCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA3NSkgIC8vIHRvZ2dsZSBhY3Rpb24gb2YgbGVmdCBjbGljayBmb3IgbmV4dCBwYWdlCiAgICB7CiAgICAgIHczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkID0gIXczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkOwogICAgICB2YXIgYWxlcnRfbXNnID0gKHczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkID8KICAgICAgICAgICAgICAgICJlbmFibGVkIiA6ICJkaXNhYmxlZCIpICsgICIgbW91c2UgY2xpY2sgYWR2YW5jZSI7CgogICAgICBhbGVydCh3M2Nfc2xpZHkubG9jYWxpemUoYWxlcnRfbXNnKSk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA4NCB8fCBrZXkgPT0gNjcpICAvLyBUIG9yIEMgZm9yIHRhYmxlIG9mIGNvbnRlbnRzCiAgICB7CiAgICAgIGlmICh3M2Nfc2xpZHkudG9jKQogICAgICAgIHczY19zbGlkeS50b2dnbGVfdGFibGVfb2ZfY29udGVudHMoKTsKCiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA3MikgLy8gSCBmb3IgaGVscAogICAgewogICAgICB3aW5kb3cubG9jYXRpb24gPSB3M2Nfc2xpZHkuaGVscF9wYWdlOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICAvL2Vsc2UgYWxlcnQoImtleSBjb2RlIGlzICIrIGtleSk7CgogICAgcmV0dXJuIHRydWU7CiAgfSwKCiAgLy8gc2FmZSBmb3IgYm90aCB0ZXh0L2h0bWwgYW5kIGFwcGxpY2F0aW9uL3hodG1sK3htbAogIGNyZWF0ZV9lbGVtZW50OiBmdW5jdGlvbiAobmFtZSkgewogICAgaWYgKHRoaXMueGh0bWwgJiYgKHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMgIT0gJ3VuZGVmaW5lZCcpKQogICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiwgbmFtZSkKCiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKTsKICB9LAoKICBnZXRfZWxlbWVudF9zdHlsZTogZnVuY3Rpb24gKGVsZW0sIElFU3R5bGVQcm9wLCBDU1NTdHlsZVByb3ApIHsKICAgIGlmIChlbGVtLmN1cnJlbnRTdHlsZSkKICAgIHsKICAgICAgcmV0dXJuIGVsZW0uY3VycmVudFN0eWxlW0lFU3R5bGVQcm9wXTsKICAgIH0KICAgIGVsc2UgaWYgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKQogICAgewogICAgICB2YXIgY29tcFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbSwgIiIpOwogICAgICByZXR1cm4gY29tcFN0eWxlLmdldFByb3BlcnR5VmFsdWUoQ1NTU3R5bGVQcm9wKTsKICAgIH0KICAgIHJldHVybiAiIjsKICB9LAoKICAvLyB0aGUgc3RyaW5nIHN0ciBpcyBhIHdoaXRlc3BhY2Ugc2VwYXJhdGVkIGxpc3Qgb2YgdG9rZW5zCiAgLy8gdGVzdCBpZiBzdHIgY29udGFpbnMgYSBwYXJ0aWN1bGFyIHRva2VuLCBlLmcuICJzbGlkZSIKICBoYXNfdG9rZW46IGZ1bmN0aW9uIChzdHIsIHRva2VuKSB7CiAgICBpZiAoc3RyKQogICAgewogICAgICAvLyBkZWZpbmUgcGF0dGVybiBhcyByZWd1bGFyIGV4cHJlc3Npb24KICAgICAgdmFyIHBhdHRlcm4gPSAvXHcrL2c7CgogICAgICAvLyBjaGVjayBmb3IgbWF0Y2hlcwogICAgICAvLyBwbGFjZSByZXN1bHQgaW4gYXJyYXkKICAgICAgdmFyIHJlc3VsdCA9IHN0ci5tYXRjaChwYXR0ZXJuKTsKCiAgICAgIC8vIG5vdyBjaGVjayBpZiBkZXNpcmVkIHRva2VuIGlzIHByZXNlbnQKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspCiAgICAgIHsKICAgICAgICBpZiAocmVzdWx0W2ldID09IHRva2VuKQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfSwKCiAgZ2V0X2NsYXNzX2xpc3Q6IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICBpZiAodHlwZW9mIGVsZW1lbnQuY2xhc3NOYW1lICE9ICd1bmRlZmluZWQnKQogICAgICByZXR1cm4gZWxlbWVudC5jbGFzc05hbWU7CgogICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCJjbGFzcyIpOwogIH0sCgogIGhhc19jbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIG5hbWUpIHsKICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlICE9IDEpCiAgICAgIHJldHVybiBmYWxzZTsKCiAgICB2YXIgcmVnZXhwID0gbmV3IFJlZ0V4cCgiKF58ICkiICsgbmFtZSArICJcVyoiKTsKCiAgICBpZiAodHlwZW9mIGVsZW1lbnQuY2xhc3NOYW1lICE9ICd1bmRlZmluZWQnKQogICAgICByZXR1cm4gcmVnZXhwLnRlc3QoZWxlbWVudC5jbGFzc05hbWUpOwoKICAgIHJldHVybiByZWdleHAudGVzdChlbGVtZW50LmdldEF0dHJpYnV0ZSgiY2xhc3MiKSk7CiAgfSwKCiAgcmVtb3ZlX2NsYXNzOiBmdW5jdGlvbiAoZWxlbWVudCwgbmFtZSkgewogICAgdmFyIHJlZ2V4cCA9IG5ldyBSZWdFeHAoIihefCApIiArIG5hbWUgKyAiXFcqIik7CiAgICB2YXIgY2xzdmFsID0gIiI7CgogICAgaWYgKHR5cGVvZiBlbGVtZW50LmNsYXNzTmFtZSAhPSAndW5kZWZpbmVkJykKICAgIHsKICAgICAgY2xzdmFsID0gZWxlbWVudC5jbGFzc05hbWU7CgogICAgICBpZiAoY2xzdmFsKQogICAgICB7CiAgICAgICAgY2xzdmFsID0gY2xzdmFsLnJlcGxhY2UocmVnZXhwLCAiIik7CiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjbHN2YWw7CiAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgY2xzdmFsID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoImNsYXNzIik7CgogICAgICBpZiAoY2xzdmFsKQogICAgICB7CiAgICAgICAgY2xzdmFsID0gY2xzdmFsLnJlcGxhY2UocmVnZXhwLCAiIik7CiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgY2xzdmFsKTsKICAgICAgfQogICAgfQogIH0sCgogIGFkZF9jbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIG5hbWUpIHsKICAgIGlmICghdGhpcy5oYXNfY2xhc3MoZWxlbWVudCwgbmFtZSkpCiAgICB7CiAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5jbGFzc05hbWUgIT0gJ3VuZGVmaW5lZCcpCiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgKz0gIiAiICsgbmFtZTsKICAgICAgZWxzZQogICAgICB7CiAgICAgICAgdmFyIGNsc3ZhbCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCJjbGFzcyIpOwogICAgICAgIGNsc3ZhbCA9IGNsc3ZhbCA/IGNsc3ZhbCArICIgIiArIG5hbWUgOiBuYW1lOwogICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCJjbGFzcyIsIGNsc3ZhbCk7CiAgICAgIH0KICAgIH0KICB9LAoKICAvLyBIVE1MIGVsZW1lbnRzIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCBjbGFzcz0iaW5jcmVtZW50YWwiCiAgLy8gbm90ZSB0aGF0IHlvdSBjYW4gYWxzbyBwdXQgdGhlIGNsYXNzIG9uIGNvbnRhaW5lcnMgbGlrZQogIC8vIHVwLCBvbCwgZGwsIGFuZCBkaXYgdG8gbWFrZSB0aGVpciBjb250ZW50cyBhcHBlYXIKICAvLyBpbmNyZW1lbnRhbGx5LiBVcHBlciBjYXNlIGlzIHVzZWQgc2luY2UgdGhpcyBpcyB3aGF0CiAgLy8gYnJvd3NlcnMgcmVwb3J0IGZvciBIVE1MIG5vZGUgbmFtZXMgKHRleHQvaHRtbCkuCiAgaW5jcmVtZW50YWxfZWxlbWVudHM6IG51bGwsCiAgb2theV9mb3JfaW5jcmVtZW50YWw6IGZ1bmN0aW9uIChuYW1lKSB7CiAgICBpZiAoIXRoaXMuaW5jcmVtZW50YWxfZWxlbWVudHMpCiAgICB7CiAgICAgIHZhciBpbmNsaXN0ID0gbmV3IEFycmF5KCk7CiAgICAgIGluY2xpc3RbInAiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbInByZSJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsibGkiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImJsb2NrcXVvdGUiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImR0Il0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJkZCJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsiaDIiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImgzIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJoNCJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsiaDUiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImg2Il0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJzcGFuIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJhZGRyZXNzIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJ0YWJsZSJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsidHIiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbInRoIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJ0ZCJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsiaW1nIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJvYmplY3QiXSA9IHRydWU7CiAgICAgIHRoaXMuaW5jcmVtZW50YWxfZWxlbWVudHMgPSBpbmNsaXN0OwogICAgfQogICAgcmV0dXJuIHRoaXMuaW5jcmVtZW50YWxfZWxlbWVudHNbbmFtZS50b0xvd2VyQ2FzZSgpXTsKICB9LAoKICBuZXh0X2luY3JlbWVudGFsX2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICB2YXIgYnIgPSB0aGlzLmlzX3hodG1sID8gImJyIiA6ICJCUiI7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwoKICAgIGZvciAoOzspCiAgICB7CiAgICAgIG5vZGUgPSB3M2Nfc2xpZHkubmV4dF9ub2RlKHNsaWRlLCBub2RlKTsKCiAgICAgIGlmIChub2RlID09IG51bGwgfHwgbm9kZS5wYXJlbnROb2RlID09IG51bGwpCiAgICAgICAgYnJlYWs7CgogICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKSAgLy8gRUxFTUVOVAogICAgICB7CiAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT0gYnIpCiAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgaWYgKHczY19zbGlkeS5oYXNfY2xhc3Mobm9kZSwgImluY3JlbWVudGFsIikKICAgICAgICAgICAgICYmIHczY19zbGlkeS5va2F5X2Zvcl9pbmNyZW1lbnRhbChub2RlLm5vZGVOYW1lKSkKICAgICAgICAgIHJldHVybiBub2RlOwoKICAgICAgICBpZiAodzNjX3NsaWR5Lmhhc19jbGFzcyhub2RlLnBhcmVudE5vZGUsICJpbmNyZW1lbnRhbCIpCiAgICAgICAgICAgICAmJiAhdzNjX3NsaWR5Lmhhc19jbGFzcyhub2RlLCAibm9uLWluY3JlbWVudGFsIikpCiAgICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBub2RlOwogIH0sCgogIHByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICB2YXIgYnIgPSB0aGlzLmlzX3hodG1sID8gImJyIiA6ICJCUiI7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwoKICAgIGZvciAoOzspCiAgICB7CiAgICAgIG5vZGUgPSB3M2Nfc2xpZHkucHJldmlvdXNfbm9kZShzbGlkZSwgbm9kZSk7CgogICAgICBpZiAobm9kZSA9PSBudWxsIHx8IG5vZGUucGFyZW50Tm9kZSA9PSBudWxsKQogICAgICAgIGJyZWFrOwoKICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSkKICAgICAgewogICAgICAgIGlmIChub2RlLm5vZGVOYW1lID09IGJyKQogICAgICAgICAgY29udGludWU7CgogICAgICAgIGlmICh3M2Nfc2xpZHkuaGFzX2NsYXNzKG5vZGUsICJpbmNyZW1lbnRhbCIpCiAgICAgICAgICAgICAmJiB3M2Nfc2xpZHkub2theV9mb3JfaW5jcmVtZW50YWwobm9kZS5ub2RlTmFtZSkpCiAgICAgICAgICByZXR1cm4gbm9kZTsKCiAgICAgICAgaWYgKHczY19zbGlkeS5oYXNfY2xhc3Mobm9kZS5wYXJlbnROb2RlLCAiaW5jcmVtZW50YWwiKQogICAgICAgICAgICAgJiYgIXczY19zbGlkeS5oYXNfY2xhc3Mobm9kZSwgIm5vbi1pbmNyZW1lbnRhbCIpKQogICAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbm9kZTsKICB9LAoKICAvLyBzZXQgdmlzaWJpbGl0eSBmb3IgYWxsIGVsZW1lbnRzIG9uIGN1cnJlbnQgc2xpZGUgd2l0aAogIC8vIGEgcGFyZW50IGVsZW1lbnQgd2l0aCBhdHRyaWJ1dGUgY2xhc3M9ImluY3JlbWVudGFsIgogIHNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbDogZnVuY3Rpb24gKHZhbHVlKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMubmV4dF9pbmNyZW1lbnRhbF9pdGVtKG51bGwpOwoKICAgIGlmICh2YWx1ZSA9PSAiaGlkZGVuIikKICAgIHsKICAgICAgd2hpbGUgKG5vZGUpCiAgICAgIHsKICAgICAgICB3M2Nfc2xpZHkuYWRkX2NsYXNzKG5vZGUsICJpbnZpc2libGUiKTsKICAgICAgICBub2RlID0gdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbShub2RlKTsKICAgICAgfQogICAgfQogICAgZWxzZSAvLyB2YWx1ZSA9PSAidmlzaWJsZSIKICAgIHsKICAgICAgd2hpbGUgKG5vZGUpCiAgICAgIHsKICAgICAgICB3M2Nfc2xpZHkucmVtb3ZlX2NsYXNzKG5vZGUsICJpbnZpc2libGUiKTsKICAgICAgICBub2RlID0gdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbShub2RlKTsKICAgICAgfQogICAgfQogIH0sCgogIC8vIHJldmVhbCB0aGUgbmV4dCBoaWRkZW4gaXRlbSBvbiB0aGUgc2xpZGUKICAvLyBub2RlIGlzIG51bGwgb3IgdGhlIG5vZGUgdGhhdCB3YXMgbGFzdCByZXZlYWxlZAogIHJldmVhbF9uZXh0X2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICBub2RlID0gdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbShub2RlKTsKCiAgICBpZiAobm9kZSAmJiBub2RlLm5vZGVUeXBlID09IDEpICAvLyBhbiBlbGVtZW50CiAgICAgIHczY19zbGlkeS5yZW1vdmVfY2xhc3Mobm9kZSwgImludmlzaWJsZSIpOwoKICAgIHJldHVybiBub2RlOwogIH0sCgogIC8vIGV4YWN0IGludmVyc2Ugb2YgcmV2ZWFsTmV4dEl0ZW0obm9kZSkKICBoaWRlX3ByZXZpb3VzX2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICBpZiAobm9kZSAmJiBub2RlLm5vZGVUeXBlID09IDEpICAvLyBhbiBlbGVtZW50CiAgICAgIHczY19zbGlkeS5hZGRfY2xhc3Mobm9kZSwgImludmlzaWJsZSIpOwoKICAgIHJldHVybiB0aGlzLnByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW0obm9kZSk7CiAgfSwKCiAgLy8gbGVmdCB0byByaWdodCB0cmF2ZXJzYWwgb2Ygcm9vdCdzIGNvbnRlbnQKICBuZXh0X25vZGU6IGZ1bmN0aW9uIChyb290LCBub2RlKSB7CiAgICBpZiAobm9kZSA9PSBudWxsKQogICAgICByZXR1cm4gcm9vdC5maXJzdENoaWxkOwoKICAgIGlmIChub2RlLmZpcnN0Q2hpbGQpCiAgICAgIHJldHVybiBub2RlLmZpcnN0Q2hpbGQ7CgogICAgaWYgKG5vZGUubmV4dFNpYmxpbmcpCiAgICAgIHJldHVybiBub2RlLm5leHRTaWJsaW5nOwoKICAgIGZvciAoOzspCiAgICB7CiAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7CgogICAgICBpZiAoIW5vZGUgfHwgbm9kZSA9PSByb290KQogICAgICAgIGJyZWFrOwoKICAgICAgaWYgKG5vZGUgJiYgbm9kZS5uZXh0U2libGluZykKICAgICAgICByZXR1cm4gbm9kZS5uZXh0U2libGluZzsKICAgIH0KCiAgICByZXR1cm4gbnVsbDsKICB9LAoKICAvLyByaWdodCB0byBsZWZ0IHRyYXZlcnNhbCBvZiByb290J3MgY29udGVudAogIHByZXZpb3VzX25vZGU6IGZ1bmN0aW9uIChyb290LCBub2RlKSB7CiAgICBpZiAobm9kZSA9PSBudWxsKQogICAgewogICAgICBub2RlID0gcm9vdC5sYXN0Q2hpbGQ7CgogICAgICBpZiAobm9kZSkKICAgICAgewogICAgICAgIHdoaWxlIChub2RlLmxhc3RDaGlsZCkKICAgICAgICAgIG5vZGUgPSBub2RlLmxhc3RDaGlsZDsKICAgICAgfQoKICAgICAgcmV0dXJuIG5vZGU7CiAgICB9CgogICAgaWYgKG5vZGUucHJldmlvdXNTaWJsaW5nKQogICAgewogICAgICBub2RlID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7CgogICAgICB3aGlsZSAobm9kZS5sYXN0Q2hpbGQpCiAgICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkOwoKICAgICAgcmV0dXJuIG5vZGU7CiAgICB9CgogICAgaWYgKG5vZGUucGFyZW50Tm9kZSAhPSByb290KQogICAgICByZXR1cm4gbm9kZS5wYXJlbnROb2RlOwoKICAgIHJldHVybiBudWxsOwogIH0sCgogIHByZXZpb3VzX3NpYmxpbmdfZWxlbWVudDogZnVuY3Rpb24gKGVsKSB7CiAgICBlbCA9IGVsLnByZXZpb3VzU2libGluZzsKCiAgICB3aGlsZSAoZWwgJiYgZWwubm9kZVR5cGUgIT0gMSkKICAgICAgZWwgPSBlbC5wcmV2aW91c1NpYmxpbmc7CgogICAgcmV0dXJuIGVsOwogIH0sCgogIG5leHRfc2libGluZ19lbGVtZW50OiBmdW5jdGlvbiAoZWwpIHsKICAgIGVsID0gZWwubmV4dFNpYmxpbmc7CgogICAgd2hpbGUgKGVsICYmIGVsLm5vZGVUeXBlICE9IDEpCiAgICAgIGVsID0gZWwubmV4dFNpYmxpbmc7CgogICAgcmV0dXJuIGVsOwogIH0sCgogIGZpcnN0X2NoaWxkX2VsZW1lbnQ6IGZ1bmN0aW9uIChlbCkgewogICAgdmFyIG5vZGU7CgogICAgZm9yIChub2RlID0gZWwuZmlyc3RDaGlsZDsgbm9kZTsgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmcpCiAgICB7CiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpCiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgcmV0dXJuIG5vZGU7CiAgfSwKCiAgZmlyc3RfdGFnOiBmdW5jdGlvbiAoZWxlbWVudCwgdGFnKSB7CiAgICB2YXIgbm9kZTsKCiAgICBpZiAoIXRoaXMuaXNfeGh0bWwpCiAgICAgIHRhZyA9IHRhZy50b1VwcGVyQ2FzZSgpOwoKICAgIGZvciAobm9kZSA9IGVsZW1lbnQuZmlyc3RDaGlsZDsgbm9kZTsgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmcpCiAgICB7CiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEgJiYgbm9kZS5ub2RlTmFtZSA9PSB0YWcpCiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgcmV0dXJuIG5vZGU7CiAgfSwKCiAgaGlkZV9zZWxlY3Rpb246IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSAvLyBGaXJlZm94LCBDaHJvbWl1bSwgU2FmYXJpLCBPcGVyYQogICAgewogICAgICB2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpOwoKICAgICAgaWYgKHNlbGVjdGlvbi5yYW5nZUNvdW50ID4gMCkKICAgICAgewogICAgICAgIHZhciByYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApOwogICAgICAgIHJhbmdlLmNvbGxhcHNlIChmYWxzZSk7CiAgICAgIH0KICAgIH0KICAgIGVsc2UgLy8gSW50ZXJuZXQgRXhwbG9yZXIKICAgIHsKICAgICAgdmFyIHRleHRSYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSAoKTsKICAgICAgdGV4dFJhbmdlLmNvbGxhcHNlIChmYWxzZSk7CiAgICB9CiAgfSwKCiAgZ2V0X3NlbGVjdGVkX3RleHQ6IGZ1bmN0aW9uICgpIHsKICAgIHRyeQogICAgewogICAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbikKICAgICAgICByZXR1cm4gd2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCk7CgogICAgICBpZiAoZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKQogICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKS50b1N0cmluZygpOwoKICAgICAgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikKICAgICAgICByZXR1cm4gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCkudGV4dDsKICAgIH0KICAgIGNhdGNoIChlKQogICAgewogICAgfQoKICAgIHJldHVybiAiIjsKICB9LAoKICAvLyBtYWtlIG5vdGUgb2YgbGVuZ3RoIG9mIHNlbGVjdGVkIHRleHQKICAvLyBhcyB0aGlzIGV2YWx1YXRlcyB0byB6ZXJvIGluIGNsaWNrIGV2ZW50CiAgbW91c2VfYnV0dG9uX3VwOiBmdW5jdGlvbiAoZSkgewogICAgdzNjX3NsaWR5LnNlbGVjdGVkX3RleHRfbGVuID0gdzNjX3NsaWR5LmdldF9zZWxlY3RlZF90ZXh0KCkubGVuZ3RoOwogIH0sCgogIG1vdXNlX2J1dHRvbl9kb3duOiBmdW5jdGlvbiAoZSkgewogICAgdzNjX3NsaWR5LnNlbGVjdGVkX3RleHRfbGVuID0gdzNjX3NsaWR5LmdldF9zZWxlY3RlZF90ZXh0KCkubGVuZ3RoOwogICAgdzNjX3NsaWR5Lm1vdXNlX3ggPSBlLmNsaWVudFg7CiAgICB3M2Nfc2xpZHkubW91c2VfeSA9IGUuY2xpZW50WTsKICB9LAoKICAvLyByaWdodCBtb3VzZSBidXR0b24gY2xpY2sgaXMgcmVzZXJ2ZWQgZm9yIGNvbnRleHQgbWVudXMKICAvLyBpdCBpcyBtb3JlIHJlbGlhYmxlIHRvIGRldGVjdCByaWdodGNsaWNrIHRoYW4gbGVmdGNsaWNrCiAgbW91c2VfYnV0dG9uX2NsaWNrOiBmdW5jdGlvbiAoZSkgewogICAgaWYgKCFlKQogICAgICB2YXIgZSA9IHdpbmRvdy5ldmVudDsKCiAgICBpZiAoTWF0aC5hYnMoZS5jbGllbnRYIC13M2Nfc2xpZHkubW91c2VfeCkgKwogICAgICAgIE1hdGguYWJzKGUuY2xpZW50WSAtdzNjX3NsaWR5Lm1vdXNlX3kpID4gMTApCiAgICAgIHJldHVybiB0cnVlOwoKICAgIGlmICh3M2Nfc2xpZHkuc2VsZWN0ZWRfdGV4dF9sZW4gPiAwKQogICAgICByZXR1cm4gdHJ1ZTsKCiAgICB2YXIgcmlnaHRjbGljayA9IGZhbHNlOwogICAgdmFyIGxlZnRjbGljayA9IGZhbHNlOwogICAgdmFyIG1pZGRsZWNsaWNrID0gZmFsc2U7CiAgICB2YXIgdGFyZ2V0OwoKICAgIGlmICghZSkKICAgICAgdmFyIGUgPSB3aW5kb3cuZXZlbnQ7CgogICAgaWYgKGUudGFyZ2V0KQogICAgICB0YXJnZXQgPSBlLnRhcmdldDsKICAgIGVsc2UgaWYgKGUuc3JjRWxlbWVudCkKICAgICAgdGFyZ2V0ID0gZS5zcmNFbGVtZW50OwoKICAgIC8vIHdvcmsgYXJvdW5kIFNhZmFyaSBidWcKICAgIGlmICh0YXJnZXQubm9kZVR5cGUgPT0gMykKICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7CgogICAgaWYgKGUud2hpY2gpIC8vIGFsbCBicm93c2VycyBleGNlcHQgSUUKICAgIHsKICAgICAgbGVmdGNsaWNrID0gKGUud2hpY2ggPT0gMSk7CiAgICAgIG1pZGRsZWNsaWNrID0gKGUud2hpY2ggPT0gMik7CiAgICAgIHJpZ2h0Y2xpY2sgPSAoZS53aGljaCA9PSAzKTsKICAgIH0KICAgIGVsc2UgaWYgKGUuYnV0dG9uKQogICAgewogICAgICAvLyBLb25xdWVyb3IgZ2l2ZXMgMSBmb3IgbGVmdCwgNCBmb3IgbWlkZGxlCiAgICAgIC8vIElFNiBnaXZlcyAwIGZvciBsZWZ0IGFuZCBub3QgMSBhcyBJIGV4cGVjdGVkCgogICAgICBpZiAoZS5idXR0b24gPT0gNCkKICAgICAgICBtaWRkbGVjbGljayA9IHRydWU7CgogICAgICAvLyBhbGwgYnJvd3NlcnMgYWdyZWUgb24gMiBmb3IgcmlnaHQgYnV0dG9uCiAgICAgIHJpZ2h0Y2xpY2sgPSAoZS5idXR0b24gPT0gMik7CiAgICB9CiAgICBlbHNlCiAgICAgIGxlZnRjbGljayA9IHRydWU7CgogICAgaWYgKHczY19zbGlkeS5zZWxlY3RlZF90ZXh0X2xlbiA+IDApCiAgICB7CiAgICAgIHczY19zbGlkeS5zdG9wX3Byb3BhZ2F0aW9uKGUpOwogICAgICBlLmNhbmNlbCA9IHRydWU7CiAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vIGRpc21pc3MgdGFibGUgb2YgY29udGVudHMKICAgIHczY19zbGlkeS5oaWRlX3RhYmxlX29mX2NvbnRlbnRzKGZhbHNlKTsKCiAgICAvLyBjaGVjayBpZiB0YXJnZXQgaXMgc29tZXRoaW5nIHRoYXQgcHJvYmFibHkgd2FudCdzIGNsaWNrcwogICAgLy8gZS5nLiBhLCBlbWJlZCwgb2JqZWN0LCBpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCwgb3B0aW9uCiAgICB2YXIgdGFnID0gdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgogICAgaWYgKHczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkICYmIGxlZnRjbGljayAmJgogICAgICAgICF3M2Nfc2xpZHkuc3BlY2lhbF9lbGVtZW50KHRhcmdldCkgJiYKICAgICAgICAhdGFyZ2V0Lm9uY2xpY2spCiAgICB7CiAgICAgIHczY19zbGlkeS5uZXh0X3NsaWRlKHRydWUpOwogICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihlKTsKICAgICAgZS5jYW5jZWwgPSB0cnVlOwogICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9LAoKICBzcGVjaWFsX2VsZW1lbnQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICBpZiAodGhpcy5oYXNfY2xhc3MoZWxlbWVudCwgIm5vbi1pbnRlcmFjdGl2ZSIpKQogICAgICByZXR1cm4gZmFsc2U7CgogICAgdmFyIHRhZyA9IGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCiAgICByZXR1cm4gZWxlbWVudC5vbmtleWRvd24gfHwKICAgICAgZWxlbWVudC5vbmNsaWNrIHx8CiAgICAgIHRhZyA9PSAiYSIgfHwKICAgICAgdGFnID09ICJlbWJlZCIgfHwKICAgICAgdGFnID09ICJvYmplY3QiIHx8CiAgICAgIHRhZyA9PSAidmlkZW8iIHx8CiAgICAgIHRhZyA9PSAiYXVkaW8iIHx8CiAgICAgIHRhZyA9PSAic3ZnIiB8fAogICAgICB0YWcgPT0gImNhbnZhcyIgfHwKICAgICAgdGFnID09ICJpbnB1dCIgfHwKICAgICAgdGFnID09ICJ0ZXh0YXJlYSIgfHwKICAgICAgdGFnID09ICJzZWxlY3QiIHx8CiAgICAgIHRhZyA9PSAib3B0aW9uIjsKICB9LAoKICBzbGlkeV9jaHJvbWU6IGZ1bmN0aW9uIChlbCkgewogICAgd2hpbGUgKGVsKQogICAgewogICAgICBpZiAoZWwgPT0gdzNjX3NsaWR5LnRvYyB8fAogICAgICAgICAgZWwgPT0gdzNjX3NsaWR5LnRvb2xiYXIgfHwKICAgICAgICAgIHczY19zbGlkeS5oYXNfY2xhc3MoZWwsICJvdXRsaW5lIikpCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICBlbCA9IGVsLnBhcmVudE5vZGU7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0sCgogIGdldF9rZXk6IGZ1bmN0aW9uIChlKQogIHsKICAgIHZhciBrZXk7CgogICAgLy8ga2x1ZGdlIGFyb3VuZCBOUy9JRSBkaWZmZXJlbmNlcyAKICAgIGlmICh0eXBlb2Ygd2luZG93LmV2ZW50ICE9ICJ1bmRlZmluZWQiKQogICAgICBrZXkgPSB3aW5kb3cuZXZlbnQua2V5Q29kZTsKICAgIGVsc2UgaWYgKGUud2hpY2gpCiAgICAgIGtleSA9IGUud2hpY2g7CgogICAgcmV0dXJuIGtleTsKICB9LAoKICBnZXRfdGFyZ2V0OiBmdW5jdGlvbiAoZSkgewogICAgdmFyIHRhcmdldDsKCiAgICBpZiAoIWUpCiAgICAgIGUgPSB3aW5kb3cuZXZlbnQ7CgogICAgaWYgKGUudGFyZ2V0KQogICAgICB0YXJnZXQgPSBlLnRhcmdldDsKICAgIGVsc2UgaWYgKGUuc3JjRWxlbWVudCkKICAgICAgdGFyZ2V0ID0gZS5zcmNFbGVtZW50OwoKICAgIGlmICh0YXJnZXQubm9kZVR5cGUgIT0gMSkKICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7CgogICAgcmV0dXJuIHRhcmdldDsKICB9LAoKICAvLyBkb2VzIGRpc3BsYXkgcHJvcGVydHkgcHJvdmlkZSBjb3JyZWN0IGRlZmF1bHRzPwogIGlzX2Jsb2NrOiBmdW5jdGlvbiAoZWxlbSkgewogICAgdmFyIHRhZyA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCiAgICByZXR1cm4gdGFnID09ICJvbCIgfHwgdGFnID09ICJ1bCIgfHwgdGFnID09ICJwIiB8fCB0YWcgPT0gImRsIiB8fAogICAgICAgICAgIHRhZyA9PSAibGkiIHx8IHRhZyA9PSAidGFibGUiIHx8IHRhZyA9PSAicHJlIiB8fAogICAgICAgICAgIHRhZyA9PSAiaDEiIHx8IHRhZyA9PSAiaDIiIHx8IHRhZyA9PSAiaDMiIHx8CiAgICAgICAgICAgdGFnID09ICJoNCIgfHwgdGFnID09ICJoNSIgfHwgdGFnID09ICJoNiIgfHwKICAgICAgICAgICB0YWcgPT0gImJsb2NrcXVvdGUiIHx8IHRhZyA9PSAiYWRkcmVzcyI7IAogIH0sCgogIGFkZF9saXN0ZW5lcjogZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyKSB7CiAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpCiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgZmFsc2UpOwogICAgZWxzZQogICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KCJvbiIrZXZlbnQsIGhhbmRsZXIpOwogIH0sCgogIC8vIHVzZWQgdG8gcHJldmVudCBldmVudCBwcm9wYWdhdGlvbiBmcm9tIGZpZWxkIGNvbnRyb2xzCiAgc3RvcF9wcm9wYWdhdGlvbjogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICBldmVudCA9IGV2ZW50ID8gZXZlbnQgOiB3aW5kb3cuZXZlbnQ7CiAgICBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlOyAgLy8gZm9yIElFCgogICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikKICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CgogICAgcmV0dXJuIHRydWU7CiAgfSwKCiAgY2FuY2VsOiBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIGlmIChldmVudCkKICAgIHsKICAgICAgIGV2ZW50LmNhbmNlbCA9IHRydWU7CiAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlOwoKICAgICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KQogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICB9CgogICAgdzNjX3NsaWR5LmtleV93YW50ZWQgPSBmYWxzZTsKICAgIHJldHVybiBmYWxzZTsKICB9LAoKLy8gZm9yIGVhY2ggbGFuZ3VhZ2UgZGVmaW5lIGFuIGFzc29jaWF0aXZlIGFycmF5Ci8vIGFuZCBhbHNvIHRoZSBoZWxwIHRleHQgd2hpY2ggaXMgbG9uZ2VyCgogIHN0cmluZ3NfZXM6IHsKICAgICJzbGlkZSI6InDDoWcuIiwKICAgICJoZWxwPyI6IkF5dWRhIiwKICAgICJjb250ZW50cz8iOiLDjW5kaWNlIiwKICAgICJ0YWJsZSBvZiBjb250ZW50cyI6InRhYmxhIGRlIGNvbnRlbmlkb3MiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoiVGFibGEgZGUgQ29udGVuaWRvcyIsCiAgICAicmVzdGFydCBwcmVzZW50YXRpb24iOiJSZWluaWNpYXIgcHJlc2VudGFjacOzbiIsCiAgICAicmVzdGFydD8iOiJJbmljaW8iCiAgfSwKICBoZWxwX2VzOgogICAgIlV0aWxpY2UgZWwgcmF0w7NuLCBiYXJyYSBlc3BhY2lhZG9yYSwgdGVjbGFzIEl6ZGEvRGNoYSwgIiArCiAgICAibyBSZSBww6FnIHkgQXYgcMOhZy4gVXNlIFMgeSBCIHBhcmEgY2FtYmlhciBlbCB0YW1hw7FvIGRlIGZ1ZW50ZS4iLAoKICBzdHJpbmdzX2NhOiB7CiAgICAic2xpZGUiOiJww6BnLi4iLAogICAgImhlbHA/IjoiQWp1ZGEiLAogICAgImNvbnRlbnRzPyI6IsONbmRleCIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJ0YXVsYSBkZSBjb250aW5ndXRzIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IlRhdWxhIGRlIENvbnRpbmd1dHMiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiUmVpbmljaWFyIHByZXNlbnRhY2nDsyIsCiAgICAicmVzdGFydD8iOiJJbmljaSIKICB9LAogIGhlbHBfY2E6CiAgICAiVXRpbGl0emkgZWwgcmF0b2zDrSwgYmFycmEgZXNwYWlhZG9yYSwgdGVjbGVzIEVzcS4vRHRhLiAiICsKICAgICJvIFJlIHDDoGcgeSBBdiBww6BnLiBVc2kgUyBpIEIgcGVyIGNhbnZpYXIgZ3JhbmTDoHJpYSBkZSBmb250LiIsCgogIHN0cmluZ3NfY3M6IHsKICAgICJzbGlkZSI6InNuw61tZWsiLAogICAgImhlbHA/IjoibsOhcG92xJtkYSIsCiAgICAiY29udGVudHM/Ijoib2JzYWgiLAogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoib2JzYWggcHJlemVudGFjZSIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiJPYnNhaCBwcmV6ZW50YWNlIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6Inpub3Z1IHNwdXN0aXQgcHJlemVudGFjaSIsCiAgICAicmVzdGFydD8iOiJyZXN0YXJ0IgogIH0sCiAgaGVscF9jczoKICAgICJQcmV6ZW50YWNpIG3Fr8W+ZXRlIHByb2Now6F6ZXQgcG9tb2PDrSBrbGlrbnV0w60gbXnFoWksIG1lemVybsOta3UsICIgKwogICAgIsWhaXBlayB2bGV2byBhIHZwcmF2byBuZWJvIGtsw6F2ZXMgUGFnZVVwIGEgUGFnZURvd24uIFDDrXNtbyBzZSAiICsKICAgICJkw6EgenbEm3TFoWl0IGEgem1lbsWhaXQgcG9tb2PDrSBrbMOhdmVzIEIgYSBTLiIsCgogIHN0cmluZ3Nfbmw6IHsKICAgICJzbGlkZSI6InBhZ2luYSIsCiAgICAiaGVscD8iOiJIZWxwPyIsCiAgICAiY29udGVudHM/IjoiSW5ob3VkPyIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJpbmhvdWRzb3BnYXZlIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IkluaG91ZHNvcGdhdmUiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiaGVyc3RhcnQgcHJlc2VudGF0aWUiLAogICAgInJlc3RhcnQ/IjoiSGVyc3RhcnQ/IgogIH0sCiAgaGVscF9ubDoKICAgICAiTmF2aWdlZXIgZC5tLnYuIGhldCBtdWlzLCBzcGF0aWViYXIsIExpbmtzL1JlY2h0cyB0b2V0c2VuLCAiICsKICAgICAib2YgUGdVcCBlbiBQZ0RuLiBHZWJydWlrIFMgZW4gQiBvbSBkZSBrYXJha3Rlcmdyb290dGUgdGUgdmVyYW5kZXJlbi4iLAoKICBzdHJpbmdzX2RlOiB7CiAgICAic2xpZGUiOiJTZWl0ZSIsCiAgICAiaGVscD8iOiJIaWxmZSIsCiAgICAiY29udGVudHM/Ijoiw5xiZXJzaWNodCIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJJbmhhbHRzdmVyemVpY2huaXMiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoiSW5oYWx0c3ZlcnplaWNobmlzIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6IlByw6RzZW50YXRpb24gbmV1IHN0YXJ0ZW4iLAogICAgInJlc3RhcnQ/IjoiTmV1c3RhcnQiCiAgfSwKICBoZWxwX2RlOgogICAgIkJlbnV0emVuIFNpZSBkaWUgTWF1cywgTGVlcnNjaGxhZywgZGllIEN1cnNvcnRhc3RlbiBsaW5rcy9yZWNodHMgb2RlciAiICsKICAgICJQYWdlIHVwL1BhZ2UgRG93biB6dW0gV2VjaHNlbG4gZGVyIFNlaXRlbiB1bmQgUyB1bmQgQiBmw7xyIGRpZSBTY2hyaWZ0Z3LDtnNzZS4iLAoKICBzdHJpbmdzX3BsOiB7CiAgICAic2xpZGUiOiJzbGFqZCIsCiAgICAiaGVscD8iOiJwb21vYz8iLAogICAgImNvbnRlbnRzPyI6InNwaXMgdHJlxZtjaT8iLAogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoic3BpcyB0cmXFm2NpIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IlNwaXMgVHJlxZtjaSIsCiAgICAicmVzdGFydCBwcmVzZW50YXRpb24iOiJSZXN0YXJ0dWogcHJlemVudGFjasSZIiwKICAgICJyZXN0YXJ0PyI6InJlc3RhcnQ/IgogIH0sCiAgaGVscF9wbDoKICAgICJabWllbmlhaiBzbGFqZHkga2xpa2FqxIVjIG15c3rEhSwgbmFjaXNrYWrEhWMgc3BhY2rEmSwgc3RyemHFgmtpIGxld28vcHJhd28iICsKICAgICJsdWIgUGdVcCAvIFBnRG4uIFXFvHlqIGtsYXdpc3p5IFMgaSBCLCBhYnkgem1pZW5pxIcgcm96bWlhciBjemN6aW9ua2kuIiwKCiAgc3RyaW5nc19mcjogewogICAgInNsaWRlIjoicGFnZSIsCiAgICAiaGVscD8iOiJBaWRlIiwKICAgICJjb250ZW50cz8iOiJJbmRleCIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJ0YWJsZSBkZXMgbWF0acOocmVzIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IlRhYmxlIGRlcyBtYXRpw6hyZXMiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiUmVjb21tZW5jZXIgbCdleHBvc8OpIiwKICAgICJyZXN0YXJ0PyI6IkTDqWJ1dCIKICB9LAogIGhlbHBfZnI6CiAgICAiTmF2aWd1ZXogYXZlYyBsYSBzb3VyaXMsIGxhIGJhcnJlIGQnZXNwYWNlLCBsZXMgZmzDqGNoZXMgIiArCiAgICAiZ2F1Y2hlL2Ryb2l0ZSBvdSBsZXMgdG91Y2hlcyBQZyBVcCwgUGcgRG4uIFV0aWxpc2V6ICIgKwogICAgImxlcyB0b3VjaGVzIFMgZXQgQiBwb3VyIG1vZGlmaWVyIGxhIHRhaWxsZSBkZSBsYSBwb2xpY2UuIiwKCiAgc3RyaW5nc19odTogewogICAgInNsaWRlIjoib2xkYWwiLAogICAgImhlbHA/Ijoic2Vnw610c8OpZyIsCiAgICAiY29udGVudHM/IjoidGFydGFsb20iLAogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoidGFydGFsb21qZWd5esOpayIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiJUYXJ0YWxvbWplZ3l6w6lrIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6ImJlbXV0YXTDsyDDumpyYWluZMOtdMOhc2EiLAogICAgInJlc3RhcnQ/Ijoiw7pqcmFpbmTDrXTDoXMiCiAgfSwKICBoZWxwX2h1OgogICAgIkF6IG9sZGFsYWsga8O2enRpIGzDqXBrZWTDqXNoZXoga2F0dGludHNvbiBheiBlZ8OpcnJlbCwgdmFneSAiICsKICAgICJoYXN6bsOhbGphIGEgc3rDs2vDtnosIGEgYmFsLCB2YWd5IGEgam9iYiBuecOtbCwgaWxsZXR2ZSBhIFBhZ2UgRG93biwgIiArCiAgICAiUGFnZSBVcCBiaWxsZW50ecWxa2V0LiBBeiBTIMOpcyBhIEIgYmlsbGVudHnFsWtrZWwgdsOhbHRvenRhdGhhdGphICIgKwogICAgImEgc3rDtnZlZyBtw6lyZXTDqXQuIiwKCiAgc3RyaW5nc19pdDogewogICAgInNsaWRlIjoicGFnLiIsCiAgICAiaGVscD8iOiJBaXV0byIsCiAgICAiY29udGVudHM/IjoiSW5kaWNlIiwKICAgICJ0YWJsZSBvZiBjb250ZW50cyI6ImluZGljZSIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiJJbmRpY2UiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiUmljb21pbmNpYXJlIGxhIHByZXNlbnRhemlvbmUiLAogICAgInJlc3RhcnQ/IjoiSW5pemlvIgogIH0sCiAgaGVscF9pdDoKICAgICJOYXZpZ2FyZSBjb24gbW91c2UsIGJhcnJhIHNwYXppbywgZnJlY2NlIHNpbmlzdHJhL2Rlc3RyYSBvICIgKwogICAgIlBnVXAgZSBQZ0RuLiBVc2FyZSBTIGUgQiBwZXIgY2FtYmlhcmUgbGEgZGltZW5zaW9uZSBkZWkgY2FyYXR0ZXJpLiIsCgogIHN0cmluZ3NfZWw6IHsKICAgICJzbGlkZSI6Is+DzrXOu86vzrTOsSIsCiAgICAiaGVscD8iOiLOss6/zq7OuM61zrnOsTsiLAogICAgImNvbnRlbnRzPyI6Is+AzrXPgc65zrXPh8+MzrzOtc69zrE7IiwKICAgICJ0YWJsZSBvZiBjb250ZW50cyI6Is+Azq/Ovc6xzrrOsc+CIM+AzrXPgc65zrXPh86/zrzOrc69z4nOvSIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiLOoM6vzr3Osc66zrHPgiDOoM61z4HOuc61z4fOv868zq3Ovc+Jzr0iLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoizrXPgM6xzr3Otc66zrrOr869zrfPg863IM+AzrHPgc6/z4XPg86vzrHPg863z4IiLAogICAgInJlc3RhcnQ/IjoizrXPgM6xzr3Otc66zrrOr869zrfPg863OyIKICB9LAogIGhlbHBfZWw6CiAgICAizqDOu86/zrfOs863zrjOtc6vz4TOtSDOvM61IM+Ezr8gzrrOu86vzrogz4TOv8+FIM+Azr/Ovc+EzrnOus65zr/PjSwgz4TOvyBzcGFjZSwgz4TOsSDOss6tzrvOtyDOsc+BzrnPg8+EzrXPgc6sL860zrXOvs65zqwsICIgKwogICAgIs6uIFBhZ2UgVXAgzrrOsc65IFBhZ2UgRG93bi4gzqfPgc63z4POuc68zr/PgM6/zrnOrs+Dz4TOtSDPhM6xIM+AzrvOrs66z4TPgc6xIFMgzrrOsc65IEIgzrPOuc6xIM69zrEgzrHOu867zqzOvs61z4TOtSAiICsKICAgICLPhM6/IM68zq3Os861zrjOv8+CIM+EzrfPgiDOs8+BzrHOvM68zrHPhM6/z4POtc65z4HOrM+CLiIsCgogIHN0cmluZ3NfamE6IHsKICAgICJzbGlkZSI6IuOCueODqeOCpOODiSIsCiAgICAiaGVscD8iOiLjg5jjg6vjg5ciLAogICAgImNvbnRlbnRzPyI6IuebruasoSIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiLnm67mrKHjgpLooajnpLoiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoi55uu5qyhIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6IuacgOWIneOBi+OCieWGjeeUnyIsCiAgICAicmVzdGFydD8iOiLmnIDliJ3jgYvjgokiCiAgfSwKICBoZWxwX2phOgogICAgICLjg57jgqbjgrnlt6bjgq/jg6rjg4Pjgq8g44O7IOOCueODmuODvOOCuSDjg7sg5bem5Y+z44Kt44O8ICIgKwogICAgICLjgb7jgZ/jga8gUGFnZSBVcCDjg7sgUGFnZSBEb3du44Gn5pON5L2c77yMIFMg44O7IELjgafjg5Xjgqnjg7Pjg4jjgrXjgqTjgrrlpInmm7QiLAoKICBzdHJpbmdzX3poOiB7CiAgICAic2xpZGUiOiLlubvnga/niYciLAogICAgImhlbHA/Ijoi5biu5YqpPyIsCiAgICAiY29udGVudHM/Ijoi5YaF5a65PyIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiLnm67lvZUiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoi55uu5b2VIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6IumHjeaWsOWQr+WKqOWxleekuiIsCiAgICAicmVzdGFydD8iOiLph43mlrDlkK/liqg/IgogIH0sCiAgaGVscF96aDoKICAgICLnlKjpvKDmoIfngrnlh7ssIOepuuagvOadoSwg5bem5Y+z566t5aS0LCBQZyBVcCDlkowgUGcgRG4g5a+86IiqLiAiICsKICAgICLnlKggUywgQiDmlLnlj5jlrZfkvZPlpKflsI8uIiwKCiAgc3RyaW5nc19ydTogewogICAgInNsaWRlIjoi0YHQu9Cw0LnQtCIsCiAgICAiaGVscD8iOiLQv9C+0LzQvtGJ0Yw/IiwKICAgICJjb250ZW50cz8iOiLRgdC+0LTQtdGA0LbQsNC90LjQtT8iLAogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoi0L7Qs9C70LDQstC70LXQvdC40LUiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoi0J7Qs9C70LDQstC70LXQvdC40LUiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoi0L/QtdGA0LXQt9Cw0L/Rg9GB0YLQuNGC0Ywg0L/RgNC10LfQtdC90YLQsNGG0LjRjiIsCiAgICAicmVzdGFydD8iOiLQv9C10YDQtdC30LDQv9GD0YHQuj8iCiAgfSwKICBoZWxwX3J1OgogICAgItCf0LXRgNC10LzQtdGJ0LDQudGC0LXRgdGMINC60LvQuNC60LDRjyDQvNGL0YjQutC+0LksINC40YHQv9C+0LvRjNC30YPRjyDQutC70LDQstC40YjRgyDQv9GA0L7QsdC10LssINGB0YLRgNC10LvQutC4IiArCiAgICAi0LLQu9C10LLQvi/QstC/0YDQsNCy0L4g0LjQu9C4IFBnIFVwINC4IFBnIERuLiDQmtC70LDQstC40YjQuCBTINC4IEIg0LzQtdC90Y/RjtGCINGA0LDQt9C80LXRgCDRiNGA0LjRhNGC0LAuIiwKCiAgc3RyaW5nc19zdjogewogICAgInNsaWRlIjoic2lkYSIsCiAgICAiaGVscD8iOiJoasOkbHAiLAogICAgImNvbnRlbnRzPyI6ImlubmVow6VsbCIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJpbm5laMOlbGxzZsO2cnRlY2tuaW5nIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IklubmVow6VsbHNmw7ZydGVja25pbmciLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoidmlzYSBwcmVzZW50YXRpb25lbiBmcsOlbiBiw7ZyamFuIiwKICAgICJyZXN0YXJ0PyI6ImLDtnJqYSBvbSIKICB9LAogIGhlbHBfc3Y6CiAgICAiQmzDpGRkcmEgbWVkIGV0dCBrbGljayBtZWQgdsOkbnN0cmEgbXVza25hcHBlbiwgbWVsbGFuc2xhZ3N0YW5nZW50ZW4sICIgKwogICAgInbDpG5zdGVyLSBvY2ggaMO2Z2VycGlsdGFuZ2VudGVybmEgZWxsZXIgdGFuZ2VudGVybmEgUGcgVXAsIFBnIERuLiAiICsKICAgICJBbnbDpG5kIHRhbmdlbnRlcm5hIFMgb2NoIEIgZsO2ciBhdHQgw6RuZHJhIHRleHRlbnMgc3Rvcmxlay4iLAoKICBzdHJpbmdzOiB7IH0sCgogIGxvY2FsaXplOiBmdW5jdGlvbiAoc3JjKSB7CiAgICBpZiAoc3JjID09ICIiKQogICAgICByZXR1cm4gc3JjOwoKICAgICAvLyB0cnkgZnVsbCBsYW5ndWFnZSBjb2RlLCBlLmcuIGVuLVVTCiAgICAgdmFyIHMsIGxvb2t1cCA9IHczY19zbGlkeS5zdHJpbmdzW3czY19zbGlkeS5sYW5nXTsKCiAgICAgaWYgKGxvb2t1cCkKICAgICB7CiAgICAgICBzID0gbG9va3VwW3NyY107CgogICAgICAgaWYgKHMpCiAgICAgICAgcmV0dXJuIHM7CiAgICAgfQoKICAgICAvLyBzdHJpcCBjb3VudHJ5IGNvZGUgc3VmZml4LCBlLmcuCiAgICAgLy8gdHJ5IGVuIGlmIHVuZGVmaW5lZCBmb3IgZW4tVVMKICAgICB2YXIgbGcgPSB3M2Nfc2xpZHkubGFuZy5zcGxpdCgiLSIpOwoKICAgICBpZiAobGcubGVuZ3RoID4gMSkKICAgICB7CiAgICAgICBsb29rdXAgPSB3M2Nfc2xpZHkuc3RyaW5nc1tsZ1swXV07CgogICAgICAgaWYgKGxvb2t1cCkKICAgICAgIHsKICAgICAgICAgcyA9IGxvb2t1cFtzcmNdOwoKICAgICAgICAgaWYgKHMpCiAgICAgICAgICByZXR1cm4gczsKICAgICAgIH0KICAgICB9CgogICAgIC8vIG90aGVyd2lzZSBzdHJpbmcgYXMgaXMKICAgICByZXR1cm4gc3JjOwogIH0sCgogIGluaXRfbG9jYWxpemF0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgaTE4biA9IHczY19zbGlkeTsKICAgIHZhciBoZWxwX3RleHQgPSB3M2Nfc2xpZHkuaGVscF90ZXh0OwoKICAgIC8vIGVhY2ggc3VjaCBsYW5ndWFnZSBhcnJheSBpcyBkZWNsYXJlZCBpbiB0aGUgbG9jYWxpemUgYXJyYXkKICAgIC8vIHRoaXMgaXMgdXNlZCBhcyBpbiAgdzNjX3NsaWR5LmxvY2FsaXplKCJmb28iKTsKICAgIHRoaXMuc3RyaW5ncyA9IHsKICAgICAgImVzIjp0aGlzLnN0cmluZ3NfZXMsCiAgICAgICJjYSI6dGhpcy5zdHJpbmdzX2NhLAogICAgICAiY3MiOnRoaXMuc3RyaW5nc19jcywKICAgICAgIm5sIjp0aGlzLnN0cmluZ3NfbmwsCiAgICAgICJkZSI6dGhpcy5zdHJpbmdzX2RlLAogICAgICAicGwiOnRoaXMuc3RyaW5nc19wbCwKICAgICAgImZyIjp0aGlzLnN0cmluZ3NfZnIsCiAgICAgICJodSI6dGhpcy5zdHJpbmdzX2h1LAogICAgICAiaXQiOnRoaXMuc3RyaW5nc19pdCwKICAgICAgImVsIjp0aGlzLnN0cmluZ3NfZWwsCiAgICAgICJqcCI6dGhpcy5zdHJpbmdzX2phLAogICAgICAiemgiOnRoaXMuc3RyaW5nc196aCwKICAgICAgInJ1Ijp0aGlzLnN0cmluZ3NfcnUsCiAgICAgICJzdiI6dGhpcy5zdHJpbmdzX3N2CiAgICB9LAoKICAgIGkxOG4uc3RyaW5nc19lc1toZWxwX3RleHRdID0gaTE4bi5oZWxwX2VzOwogICAgaTE4bi5zdHJpbmdzX2NhW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfY2E7CiAgICBpMThuLnN0cmluZ3NfY3NbaGVscF90ZXh0XSA9IGkxOG4uaGVscF9jczsKICAgIGkxOG4uc3RyaW5nc19ubFtoZWxwX3RleHRdID0gaTE4bi5oZWxwX25sOwogICAgaTE4bi5zdHJpbmdzX2RlW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfZGU7CiAgICBpMThuLnN0cmluZ3NfcGxbaGVscF90ZXh0XSA9IGkxOG4uaGVscF9wbDsKICAgIGkxOG4uc3RyaW5nc19mcltoZWxwX3RleHRdID0gaTE4bi5oZWxwX2ZyOwogICAgaTE4bi5zdHJpbmdzX2h1W2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfaHU7CiAgICBpMThuLnN0cmluZ3NfaXRbaGVscF90ZXh0XSA9IGkxOG4uaGVscF9pdDsKICAgIGkxOG4uc3RyaW5nc19lbFtoZWxwX3RleHRdID0gaTE4bi5oZWxwX2VsOwogICAgaTE4bi5zdHJpbmdzX2phW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfamE7CiAgICBpMThuLnN0cmluZ3NfemhbaGVscF90ZXh0XSA9IGkxOG4uaGVscF96aDsKICAgIGkxOG4uc3RyaW5nc19ydVtoZWxwX3RleHRdID0gaTE4bi5oZWxwX3J1OwogICAgaTE4bi5zdHJpbmdzX3N2W2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfc3Y7CgogICAgdzNjX3NsaWR5LmxhbmcgPSBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCJsYW5nIik7CgogICAgaWYgKCF3M2Nfc2xpZHkubGFuZykKICAgICAgdzNjX3NsaWR5LmxhbmcgPSBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpOwoKICAgIGlmICghdzNjX3NsaWR5LmxhbmcpCiAgICAgIHczY19zbGlkeS5sYW5nID0gImVuIjsKICB9Cn07CgovLyBoYWNrIGZvciBiYWNrIGJ1dHRvbiBiZWhhdmlvcgppZiAodzNjX3NsaWR5LmllNiB8fCB3M2Nfc2xpZHkuaWU3KQp7CiAgZG9jdW1lbnQud3JpdGUoIjxpZnJhbWUgaWQ9J2hpc3RvcnlGcmFtZScgIiArCiAgInNyYz0namF2YXNjcmlwdDpcIjxodG1sIisiPjwvIisiaHRtbD5cIicgIiArCiAgImhlaWdodD0nMScgd2lkdGg9JzEnICIgKwogICJzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7bGVmdDotODAwcHgnPjwvaWZyYW1lPiIpOwp9CgovLyBhdHRhY2ggZXZlbnQgbGlzdGVuZXJzIGZvciBpbml0aWFsaXphdGlvbgp3M2Nfc2xpZHkuc2V0X3VwKCk7CgovLyBoaWRlIHRoZSBzbGlkZXMgYXMgc29vbiBhcyBib2R5IGVsZW1lbnQgaXMgYXZhaWxhYmxlCi8vIHRvIHJlZHVjZSBhbm5veWluZyBzY3JlZW4gbWVzcyBiZWZvcmUgdGhlIG9ubG9hZCBldmVudApzZXRUaW1lb3V0KHczY19zbGlkeS5oaWRlX3NsaWRlcywgNTApOwoK"></script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">Scraping with rvest and RSelenium</h1>
  <p class="author">
Filip Rodik; Ana Janković
  </p>
  <p class="date">2018-04-04</p>
</div>
<div id="scraping-with-rvest-and-rselenium" class="slide section level2">
<h2>Scraping with rvest and RSelenium</h2>
<div class="figure">
<img src="data:image/png;base64,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" />

</div>
<p>Filip Rodik, Ana Janković</p>
<p>HUB385, 2018-04-04</p>
<ul>
<li>Prezentacija: <a href="http://rpubs.com/rodik/zagreb5" class="uri">http://rpubs.com/rodik/zagreb5</a></li>
<li><a href="https://github.com/rodik/ZagReb-meetup5-scraping">Github projekt prezentacije</a></li>
<li><a href="https://github.com/rodik/Sabor">Github projekt Sabor scrapera</a></li>
</ul>
</div>
<div id="teme" class="slide section level2">
<h2>Teme</h2>
<ul>
<li>Scraping</li>
<li><strong>rvest</strong>:
<ul>
<li>simple paging</li>
<li>HTML table &gt; data.frame</li>
<li>kompleksnije strukture</li>
<li>iteriranje</li>
</ul></li>
<li><strong>RSelenium</strong>:
<ul>
<li>browser automation</li>
<li>iframe</li>
</ul></li>
</ul>
</div>
<div id="scraping-sveden-na-3-bulleta" class="slide section level2">
<h2>Scraping (sveden na 3 bulleta)</h2>
<ol style="list-style-type: decimal">
<li>Navigiraj na stranicu (učitaj HTML)</li>
<li>Parsiraj podatke</li>
<li>Počisti pročitane podatke</li>
</ol>
<p>U slučaju da postoji paging</p>
<ol style="list-style-type: decimal">
<li>Inicijalizacija</li>
<li>Iteriraj po stranicama
<ul>
<li>navigiraj</li>
<li>parsiraj</li>
<li>počisti</li>
<li><strong>dodaj</strong> u glavnu kolekciju</li>
</ul></li>
</ol>
</div>
<div id="scraping---korisni-alati" class="slide section level2">
<h2>Scraping - Korisni alati</h2>
<ul>
<li>View the source (Luke)</li>
<li>browser developer tools (F12)</li>
<li><a href="http://selectorgadget.com/" target="_blank">Selector gadget</a>
<ul>
<li>CSS selector</li>
<li>Chrome extension</li>
</ul></li>
</ul>
</div>
<div id="rvest" class="slide section level2">
<h2>rvest</h2>
<ul>
<li><a href="https://github.com/hadley/rvest" target="_blank">GitHub hadley/rvest</a></li>
</ul>
<p>Primjeri:</p>
<ol style="list-style-type: decimal">
<li>Izravno čitanje HTML <strong>table</strong> elementa
<ul>
<li>html_table()</li>
</ul></li>
<li>Parsiranje HTML <em>kompleksne</em> strukture + Paging
<ul>
<li>hijerarhija elemenata</li>
<li>atributi</li>
<li>“dinamički” URL</li>
</ul></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(rvest)
<span class="co"># data cleaning</span>
<span class="kw">library</span>(magrittr)
<span class="kw">library</span>(plyr)
<span class="kw">library</span>(dplyr)</code></pre></div>
</div>
<div id="rvest---navigacija" class="slide section level2">
<h2>rvest - navigacija</h2>
<p>Čitanje HTML-a</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># definiraj url</span>
url &lt;-<span class="st"> &quot;http://www.index.hr/arhiva/vijesti/2018/1/1&quot;</span>
<span class="co"># procitaj stranicu</span>
arhiva_html &lt;-<span class="st"> </span><span class="kw">read_html</span>(url)
<span class="co"># print class</span>
<span class="kw">class</span>(arhiva_html)</code></pre></div>
<pre><code>## [1] &quot;xml_document&quot; &quot;xml_node&quot;</code></pre>
</div>
<div id="rvest---navigacija-paging" class="slide section level2">
<h2>rvest - navigacija paging</h2>
<p>index.hr/arhiva/vijesti/<strong>2018/1/1</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># definiraj staticni dio URL-a</span>
url_root &lt;-<span class="st"> &quot;http://www.index.hr/arhiva/vijesti/&quot;</span>
<span class="co"># definiraj pocetni datum</span>
datum &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&quot;2018-01-01&quot;</span>)
<span class="co"># format(datum, &quot;%Y/%m/%d&quot;)</span>
datum_string &lt;-<span class="st"> </span><span class="kw">paste</span>(
    <span class="kw">format</span>(datum,<span class="st">&quot;%Y&quot;</span>),
    <span class="kw">as.numeric</span>(<span class="kw">format</span>(datum, <span class="st">&quot;%m&quot;</span>)),
    <span class="kw">as.numeric</span>(<span class="kw">format</span>(datum, <span class="st">&quot;%d&quot;</span>)),
    <span class="dt">sep =</span> <span class="st">&quot;/&quot;</span>
)
<span class="co"># napravi puni URL</span>
url &lt;-<span class="st"> </span><span class="kw">paste0</span>(url_root, datum_string) 
url <span class="co"># print</span></code></pre></div>
<pre><code>## [1] &quot;http://www.index.hr/arhiva/vijesti/2018/1/1&quot;</code></pre>
</div>
<div id="rvest---simple" class="slide section level2">
<h2>rvest - simple</h2>
<p><strong>html_table()</strong> funkcija</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">di_url &lt;-<span class="st"> &quot;http://registar-imovina.gov.hr/default.aspx?action=nekretnine&amp;page=1&amp;posiljatelj=&amp;vrsta_nek=6&amp;vrsta_vla=&amp;pbr=&amp;zup=&quot;</span>

parsiraj.stranicu &lt;-<span class="st"> </span><span class="cf">function</span>(url){
    <span class="co"># pokupi html</span>
    stranica &lt;-<span class="st"> </span><span class="kw">read_html</span>(url, <span class="dt">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)
    <span class="co"># dohvati tablicu</span>
    rows &lt;-<span class="st"> </span>stranica <span class="op">%&gt;%</span>
<span class="st">        </span><span class="kw">html_node</span>(<span class="st">&quot;.tblView&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">        </span><span class="kw">html_table</span>()
    <span class="co"># pretvori sve kolone u string</span>
    rows &lt;-<span class="st"> </span>rows <span class="op">%&gt;%</span>
<span class="st">        </span><span class="kw">mutate_all</span>(as.character)
    <span class="co"># vrati tablicu kao data.frame</span>
    rows
}</code></pre></div>
</div>
<div id="rvest---parsiranje-1" class="slide section level2">
<h2>rvest - parsiranje 1</h2>
<pre><code>&lt;a href=&quot;/vijesti/clanak/detalji-tragedije-u-rijeci-kad-je-prvi-poceo-zapomagati-mislio-sam-da-se-sali/1016862.aspx&quot; class=&quot;arhivaBox&quot; title=&quot;Detalji tragedije u Rijeci: &amp;quot;Kad je prvi počeo zapomagati, mislio sam da se šali&amp;quot;&quot;&gt;
   &lt;p class=&quot;naslov&quot;&gt;Detalji tragedije u Rijeci: &amp;quot;Kad je prvi počeo zapomagati, mislio sam da se šali&amp;quot;&lt;/p&gt;
   &lt;p class=&quot;podnaslov&quot;&gt;1.1.2018. 21:59:10 / Vijesti&lt;/p&gt;
   &lt;p&gt;NA tradicionalnom novogodišnjem kupanju na riječkim Pećinama dogodila strašna tragedija, a svjedoci su ispričali kako je to izgledalo.&lt;/p&gt;
&lt;/a&gt;

&lt;a href=&quot;/vijesti/clanak/pogledajte-novogodisnje-poruke-znanstvenika-index-laba/1016801.aspx&quot; class=&quot;arhivaBox&quot; title=&quot;Pogledajte novogodišnje poruke znanstvenika Index laba&quot;&gt;
   &lt;p class=&quot;naslov&quot;&gt;Pogledajte novogodišnje poruke znanstvenika Index laba&lt;/p&gt;
   &lt;p class=&quot;podnaslov&quot;&gt;1.1.2018. 21:55:19 / Vijesti&lt;/p&gt;
   &lt;p&gt;VRHUNSKI hrvatski znanstvenici koji pišu za Index lab čitateljima su uputili svoje prigodne poruke.&lt;/p&gt;
&lt;/a&gt;</code></pre>
</div>
<div id="rvest---parsiranje-2" class="slide section level2">
<h2>rvest - parsiranje 2</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># procitaj stranicu</span>
arhiva_html &lt;-<span class="st"> </span><span class="kw">read_html</span>(url)
<span class="co"># procitaj trenutnu stranicu kao data.frame</span>
trenutne_vijesti &lt;-<span class="st"> </span>arhiva_html <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">html_nodes</span>(<span class="st">&quot;.arhivaBox&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># trazi class</span>
<span class="st">    </span><span class="kw">ldply</span>(obradi.node) <span class="co"># parsiraj svaki node funkcijom</span></code></pre></div>
<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
url
</th>
<th style="text-align:left;">
naslov
</th>
<th style="text-align:left;">
podnaslov
</th>
<th style="text-align:left;">
opis
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
/vijesti/clanak/detalji-tragedije-u-rijeci-kad-je-prvi-poceo-zapomagati-mislio-sam-da-se-sali/1016862.aspx
</td>
<td style="text-align:left;">
Detalji tragedije u Rijeci: “Kad je prvi počeo zapomagati, mislio sam da se šali”
</td>
<td style="text-align:left;">
1.1.2018. 21:59:10 / Vijesti
</td>
<td style="text-align:left;">
NA tradicionalnom novogodišnjem kupanju na riječkim Pećinama dogodila strašna tragedija, a svjedoci su ispričali kako je to izgledalo.
</td>
</tr>
<tr>
<td style="text-align:left;">
/vijesti/clanak/pogledajte-novogodisnje-poruke-znanstvenika-index-laba/1016801.aspx
</td>
<td style="text-align:left;">
Pogledajte novogodišnje poruke znanstvenika Index laba
</td>
<td style="text-align:left;">
1.1.2018. 21:55:19 / Vijesti
</td>
<td style="text-align:left;">
VRHUNSKI hrvatski znanstvenici koji pišu za Index lab čitateljima su uputili svoje prigodne poruke.
</td>
</tr>
</tbody>
</table>
</div>
<div id="rvest---parsiranje-3" class="slide section level2">
<h2>rvest - parsiranje 3</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">obradi.node &lt;-<span class="st"> </span><span class="cf">function</span>(node){
    <span class="kw">data.frame</span>(
        <span class="dt">url =</span> node <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                </span><span class="kw">html_attr</span>(<span class="st">&quot;href&quot;</span>) 
        <span class="dt">naslov =</span> node <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                    </span><span class="kw">html_node</span>(<span class="st">&quot;.naslov&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                    </span><span class="kw">html_text</span>()
        <span class="dt">podnaslov =</span> node <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                        </span><span class="kw">html_node</span>(<span class="st">&quot;.podnaslov&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                        </span><span class="kw">html_text</span>()
        <span class="dt">opis =</span> node <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                </span><span class="kw">html_children</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                </span><span class="kw">extract</span>(<span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                </span><span class="kw">html_text</span>() 
    )
}</code></pre></div>
</div>
<div id="rvest---ciscenje" class="slide section level2">
<h2>rvest - čišćenje</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">trenutne_vijesti &lt;-<span class="st"> </span>trenutne_vijesti <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># razbij podnaslov na dvije kolone</span>
<span class="st">    </span><span class="kw">mutate</span>(
        <span class="dt">vrijeme =</span> <span class="kw">gsub</span>(<span class="st">&quot;/.*&quot;</span>, <span class="st">&quot;&quot;</span>, podnaslov) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># uzmi sve prije '/'</span>
<span class="st">                    </span><span class="kw">trimws</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># trim whitespace</span>
<span class="st">                    </span><span class="kw">strptime</span>(<span class="st">&quot;%d.%m.%Y. %H:%M:%S&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># pretvori u datetime</span>
<span class="st">                    </span><span class="kw">as.POSIXct</span>(), <span class="co"># cast as.POSIXct</span>
        <span class="dt">kategorija =</span> <span class="kw">gsub</span>(<span class="st">&quot;.*/&quot;</span>, <span class="st">&quot;&quot;</span>, podnaslov) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># uzmi sve nakon '/'</span>
<span class="st">                        </span><span class="kw">trimws</span>() <span class="co"># trim whitespace</span>
    ) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">select</span>(<span class="op">-</span>podnaslov) <span class="co"># makni staru kolonu</span></code></pre></div>
<table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
url
</th>
<th style="text-align:left;">
naslov
</th>
<th style="text-align:left;">
opis
</th>
<th style="text-align:left;">
vrijeme
</th>
<th style="text-align:left;">
kategorija
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
/vijesti/clanak/detalji-tragedije-u-rijeci-kad-je-prvi-poceo-zapomagati-mislio-sam-da-se-sali/1016862.aspx
</td>
<td style="text-align:left;">
Detalji tragedije u Rijeci: “Kad je prvi počeo zapomagati, mislio sam da se šali”
</td>
<td style="text-align:left;">
NA tradicionalnom novogodišnjem kupanju na riječkim Pećinama dogodila strašna tragedija, a svjedoci su ispričali kako je to izgledalo.
</td>
<td style="text-align:left;">
2018-01-01 21:59:10
</td>
<td style="text-align:left;">
Vijesti
</td>
</tr>
<tr>
<td style="text-align:left;">
/vijesti/clanak/pogledajte-novogodisnje-poruke-znanstvenika-index-laba/1016801.aspx
</td>
<td style="text-align:left;">
Pogledajte novogodišnje poruke znanstvenika Index laba
</td>
<td style="text-align:left;">
VRHUNSKI hrvatski znanstvenici koji pišu za Index lab čitateljima su uputili svoje prigodne poruke.
</td>
<td style="text-align:left;">
2018-01-01 21:55:19
</td>
<td style="text-align:left;">
Vijesti
</td>
</tr>
</tbody>
</table>
</div>
<div id="rselenium" class="slide section level2">
<h2>RSelenium</h2>
<ul>
<li><a href="https://cran.r-project.org/web/packages/RSelenium/vignettes/RSelenium-basics.html" target="_blank">RSelenium Basics</a></li>
<li>pristup DOM elementima</li>
<li>upisivanje teksta, slanje klikova na elemente</li>
<li>JavaScript injection</li>
<li>pristup (i)frame objektima</li>
</ul>
</div>
<div id="rselenium---instalacija" class="slide section level2">
<h2>RSelenium - instalacija</h2>
<p><a href="http://selenium-release.storage.googleapis.com/index.html" target="_blank">Selenium Standalone Server</a></p>
<p>Browser drivers</p>
<ul>
<li><a href="https://github.com/mozilla/geckodriver/releases" target="_blank">Firefox geckodriver</a></li>
<li><a href="https://sites.google.com/a/chromium.org/chromedriver/" target="_blank">ChromeDriver</a></li>
</ul>
<p>Više detalja na <a href="https://www.seleniumhq.org/download/" target="_blank">seleniumhq.org</a></p>
</div>
<div id="rselenium---pokretanje" class="slide section level2">
<h2>RSelenium - pokretanje</h2>
<p>cmd</p>
<pre><code>&gt;java -jar selenium-server-standalone-x.xx.x.jar [-port xxxx]</code></pre>
<p>Default port = 4444</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(RSelenium)
<span class="co"># ! start Selenium server first !</span>
<span class="co"># connect to browser</span>
remDr &lt;-<span class="st"> </span><span class="kw">remoteDriver</span>(<span class="dt">browser =</span> <span class="st">&quot;chrome&quot;</span>, <span class="dt">port=</span><span class="dv">4444</span>)
<span class="co"># open browser</span>
remDr<span class="op">$</span><span class="kw">open</span>()
<span class="co"># starting url</span>
home_url &lt;-<span class="st"> &quot;http://edoc.sabor.hr/Fonogrami.aspx&quot;</span>
<span class="co"># navigate page</span>
remDr<span class="op">$</span><span class="kw">navigate</span>(home_url)</code></pre></div>
</div>
<div id="rselenium---parsiranje" class="slide section level2">
<h2>RSelenium - parsiranje</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get element by class</span>
remDr<span class="op">$</span><span class="kw">findElements</span>(<span class="dt">using =</span> <span class="st">&quot;class&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;dxgvDataRow_SaborPurpleTheme&quot;</span>)
<span class="co"># get element by css</span>
remDr<span class="op">$</span><span class="kw">findElement</span>(<span class="dt">using =</span> <span class="st">'css'</span>, <span class="dt">value =</span> <span class="st">'.dxp-current'</span>)

<span class="co"># read attribute value </span>
webElem<span class="op">$</span><span class="kw">getElementAttribute</span>(<span class="dt">attrName =</span> <span class="st">&quot;href&quot;</span>) 
<span class="co"># read multiple text values # tds = list of webElements</span>
<span class="kw">sapply</span>(<span class="kw">unlist</span>(tds), <span class="cf">function</span>(x) x<span class="op">$</span><span class="kw">getElementText</span>()) </code></pre></div>
</div>
<div id="rselenium---send-keys-and-clicks" class="slide section level2">
<h2>RSelenium - send keys and clicks</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># click Next page # btnNext = webEelement</span>
btnNext<span class="op">$</span><span class="kw">clickElement</span>()
<span class="co"># wait for reload (!)</span>
<span class="kw">Sys.sleep</span>(<span class="dv">4</span>)

<span class="co"># send keystrokes</span>
remDr<span class="op">$</span><span class="kw">navigate</span>(<span class="st">&quot;http://www.google.com/ncr&quot;</span>)
webElem &lt;-<span class="st"> </span>remDr<span class="op">$</span><span class="kw">findElement</span>(<span class="dt">using =</span> <span class="st">&quot;css&quot;</span>, <span class="st">&quot;[name = 'q']&quot;</span>)
webElem<span class="op">$</span><span class="kw">sendKeysToElement</span>(<span class="kw">list</span>(<span class="st">&quot;R Cran&quot;</span>, <span class="dt">key =</span> <span class="st">&quot;enter&quot;</span>))</code></pre></div>
</div>
<div id="rselenium---iframe-1" class="slide section level2">
<h2>RSelenium - iframe 1</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">remDr &lt;-<span class="st"> </span><span class="kw">remoteDriver</span>(<span class="dt">browser =</span> <span class="st">&quot;chrome&quot;</span>, <span class="dt">port=</span><span class="dv">4567</span>)
<span class="co"># open browser</span>
remDr<span class="op">$</span><span class="kw">open</span>()
url&lt;-<span class="st">&quot;https://eojn.nn.hr/Oglasnik/&quot;</span>

input_br&lt;-<span class="st">&quot;f3&quot;</span>
input_od&lt;-<span class="st">&quot;1.1.2017&quot;</span>
input_do&lt;-<span class="st">&quot;31.3.2017&quot;</span>
input_vrsta&lt;-<span class="kw">c</span>(<span class="st">&quot;Izvođenje radova&quot;</span>, <span class="st">&quot;Pružanje usluga&quot;</span>, <span class="st">&quot;Isporuka roba&quot;</span>)

<span class="co"># hederi # imao sam ih pri ruci</span>
remDr<span class="op">$</span><span class="kw">setTimeout</span>(<span class="dt">type =</span> <span class="st">&quot;implicit&quot;</span>, <span class="dt">milliseconds =</span> <span class="dv">5000</span>)
remDr<span class="op">$</span><span class="kw">setTimeout</span>(<span class="dt">type =</span> <span class="st">&quot;page load&quot;</span>, <span class="dt">milliseconds =</span> <span class="dv">5000</span>)

remDr<span class="op">$</span><span class="kw">navigate</span>(url)
webElem&lt;-remDr<span class="op">$</span><span class="kw">findElements</span>(<span class="dt">using =</span> <span class="st">&quot;css selector&quot;</span>, <span class="dt">value=</span><span class="st">&quot;#TrazilicaCtl1_uiJednostavnaTrazilica&quot;</span>)
webElement&lt;-webElem[[<span class="dv">1</span>]]</code></pre></div>
</div>
<div id="r-selenium---iframe-2" class="slide section level2">
<h2>R Selenium - iframe 2</h2>
<p>Kada su web elementi do kojih želimo doći postavljeni unutar iframe-a, ukratko - potrebno je “ući u iframe” pa tek onda napraviti ono što se želi.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#ovdje dohvatamo neki odgovarajući web element</span>
webElem&lt;-remDr<span class="op">$</span><span class="kw">findElements</span>(<span class="dt">using =</span> <span class="st">&quot;css selector&quot;</span>, <span class="dt">value=</span><span class="st">&quot;#TrazilicaCtl1_uiJednostavnaTrazilica&quot;</span>)
<span class="co">#rezultirajući objekt je bio lista, u kojoj je webelement samo </span>
## prvi element liste (otuda i ovaj odabir samo prvog elementa)
webElement&lt;-webElem[[<span class="dv">1</span>]] 
webElement<span class="op">$</span><span class="kw">clickElement</span>()
<span class="co"># ovim prethodnim smo došli na stranicu koja se otvorila i gdje je cijeli dio, </span>
## u biti &quot;obrazac&quot;+&quot;tablica&quot; unutar iframe-a.

<span class="co"># biramo web element koji je iframe</span>
webElem&lt;-remDr<span class="op">$</span><span class="kw">findElements</span>(<span class="st">&quot;css&quot;</span>, <span class="st">&quot;iframe&quot;</span>)
<span class="co"># naredbom switchtoiframe mu kažemo da na toj stranici koju </span>
## smo otvorili prebaci se unutar iframe-a
remDr<span class="op">$</span><span class="kw">switchToFrame</span>(webElem[[<span class="dv">1</span>]]) </code></pre></div>
</div>
<div id="r-selenium---iframe-3" class="slide section level2">
<h2>R Selenium - iframe 3</h2>
<p>Kada smo unutar iframe-a onda možemo unositi što nam treba u iframe tj. popunjavati parametre koji nam trebaju da dobijemo tržilicom ono što nas interesira; odnosno sada sve naredbe što šaljemo, i elementi koje biramo su unutar ovog iframe-a.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Primjer:</span>
<span class="co">#prethodno su sačuvani određeni parametri koji nas interesiraju:</span>

input_br&lt;-<span class="st">&quot;f3&quot;</span>
input_od&lt;-<span class="st">&quot;1.1.2017&quot;</span>
input_do&lt;-<span class="st">&quot;31.3.2017&quot;</span>
input_vrsta&lt;-<span class="kw">c</span>(<span class="st">&quot;Izvođenje radova&quot;</span>, <span class="st">&quot;Pružanje usluga&quot;</span>, <span class="st">&quot;Isporuka roba&quot;</span>)

<span class="co"># ovim želim npr. unijeti da br. dokumenta mora sadržati f3 (u mom slučaju su to bile one javne nabave </span>
## kod kojih je postupak uspješno okončan i odabran je pružatelj usluge i/ili izvođač radova); 

<span class="co"># datum od i datum do te vrsta ugovora. Ovo inače nije potrebno ali radi specifičnosti kako </span>
## je posložena stranica oglasnika javnih nabava ovo je korišteno kao filter kako bi mogli dohvatiti sve dokumente.</code></pre></div>
</div>
<div id="rselenium---sending-keys-clicks-doubleclicking-itd.-u-iframe" class="slide section level2">
<h2>RSelenium - sending keys, clicks, doubleclicking itd. u iframe</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># dohvat određenih polja u koja se želi staviti vrijednost po kojoj će se filtrirati tablica koja se treba dobiti</span>
broj_objave&lt;-remDr<span class="op">$</span><span class="kw">findElements</span>(<span class="dt">using =</span> <span class="st">&quot;css selector&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;#uiFilter_Txt_OznakaDokumenta&quot;</span>) 
broj_objave&lt;-broj_objave[[<span class="dv">1</span>]]
broj_objave<span class="op">$</span><span class="kw">sendKeysToElement</span>(<span class="kw">list</span>(input_br))
<span class="co"># dohvat određenih polja u koja se želi staviti vrijednost po kojoj će se filtrirati tablica koja se treba dobiti</span>
vrsta_ugovora&lt;-remDr<span class="op">$</span><span class="kw">findElements</span>(<span class="dt">using =</span> <span class="st">&quot;css selector&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;#uiFilter_Txt_TipNabave&quot;</span>)
vrsta_ugovora&lt;-vrsta_ugovora[[<span class="dv">1</span>]]
<span class="co"># ovdje se salje vrsta ugovora tj. da mora sadržati input &quot;izvođenje radova&quot;</span>
vrsta_ugovora<span class="op">$</span><span class="kw">sendKeysToElement</span>(<span class="kw">list</span>(input_vrsta[<span class="dv">1</span>])) </code></pre></div>
<p>Ovo je u konkretnom slučaju bilo nužno da bi se “filtrirala” tablica (pojašnjenje vezano za stranicu EOJN)</p>
</div>
<div id="rselenium---sending-keys-clicks-doubleclicking-itd.-u-iframe-nastavak" class="slide section level2">
<h2>RSelenium - sending keys, clicks, doubleclicking itd. u iframe (nastavak)</h2>
<p>I sad dalje isto se ide odabirom datuma, itd.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">datum_objave_od&lt;-remDr<span class="op">$</span><span class="kw">findElements</span>(<span class="dt">using =</span> <span class="st">&quot;css selector&quot;</span>, <span class="dt">value=</span><span class="st">&quot;#uiFilter_Calendar_DatumObjave_textBox&quot;</span>)
datum_objave_od&lt;-datum_objave_od[[<span class="dv">1</span>]]
datum_objave_od<span class="op">$</span><span class="kw">sendKeysToElement</span>(<span class="kw">list</span>(input_od))
strelica&lt;-remDr<span class="op">$</span><span class="kw">findElements</span>(<span class="dt">using =</span> <span class="st">&quot;css selector&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;#uiFilter_Toggle_DatumObjave_EndValue&quot;</span>)
strelica&lt;-strelica[[<span class="dv">1</span>]]
strelica<span class="op">$</span><span class="kw">clickElement</span>()
datum_objave_do&lt;-remDr<span class="op">$</span><span class="kw">findElements</span>(<span class="dt">using =</span> <span class="st">&quot;css selector&quot;</span>, <span class="dt">value=</span><span class="st">&quot;#uiFilter_Calendar_DatumObjave_EndValue_textBox&quot;</span>)
datum_objave_do&lt;-datum_objave_do[[<span class="dv">1</span>]]
datum_objave_do<span class="op">$</span><span class="kw">sendKeysToElement</span>(<span class="kw">list</span>(input_do))
<span class="kw">Sys.sleep</span>(<span class="dv">3</span>)</code></pre></div>
</div>
<div id="rselenium---sending-keys-clicks-doubleclicking-itd.-u-iframe-nastavak-1" class="slide section level2">
<h2>RSelenium - sending keys, clicks, doubleclicking itd. u iframe (nastavak)</h2>
<p>I na kraju tražimo prema zadanim parametrima:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">trazi&lt;-remDr<span class="op">$</span><span class="kw">findElements</span>(<span class="dt">using =</span> <span class="st">&quot;css selector&quot;</span>, <span class="dt">value=</span><span class="st">&quot;.PreglediTraziButton&quot;</span>)
trazi&lt;-trazi[[<span class="dv">1</span>]]
trazi<span class="op">$</span><span class="kw">clickElement</span>()</code></pre></div>
</div>
<div id="rselenium---sending-keys-clicks-doubleclicking-itd.-u-iframe-nastavak-2" class="slide section level2">
<h2>RSelenium - sending keys, clicks, doubleclicking itd. u iframe (nastavak)</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#kad sam došla do tablice malo teže se išlo pa sam morala ići na css selector</span>
tablica&lt;-remDr<span class="op">$</span><span class="kw">findElements</span>(<span class="dt">using=</span><span class="st">&quot;css selector&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;.font-bold-grey&quot;</span>)
tablica&lt;-tablica[[<span class="dv">1</span>]]
detalji1&lt;-detalji<span class="op">$</span><span class="kw">findElements</span>(<span class="dt">using =</span> <span class="st">&quot;css selector&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;.DetailsBtn&quot;</span>)
detalji1&lt;-detalji1[[<span class="dv">1</span>]]
detalji1<span class="op">$</span><span class="kw">doubleclick</span>()
dokument&lt;-remDr<span class="op">$</span><span class="kw">findElements</span>(<span class="dt">using =</span> <span class="st">&quot;css selector&quot;</span>, <span class="dt">value =</span> <span class="st">&quot;#uiDokumentPodaci_uiDocumentCtl_uiOpenDocumentHtml&quot;</span>)
dokument&lt;-dokument[[<span class="dv">1</span>]]
dokument<span class="op">$</span><span class="kw">clickElement</span>()

povratak&lt;-remDr<span class="op">$</span><span class="kw">findElements</span>(<span class="dt">using =</span> <span class="st">&quot;css selector&quot;</span>, <span class="dt">value=</span><span class="st">&quot;#uiDokumentPodaci_uiOdustani&quot;</span>)
povratak&lt;-povratak[[<span class="dv">1</span>]]
povratak<span class="op">$</span><span class="kw">clickElement</span>()</code></pre></div>
</div>
<div id="plan" class="slide section level2">
<h2>Plan:</h2>
<p>Za olakšati si kasnije namjera mi je složiti to u funkciju……to be continued….</p>
</div>

  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

</body>
</html>
